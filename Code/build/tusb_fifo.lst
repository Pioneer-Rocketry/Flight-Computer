ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"tusb_fifo.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.advance_index,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	advance_index:
  26              	.LVL0:
  27              	.LFB82:
  28              		.file 1 "lib/TinyUSB/src/common/tusb_fifo.c"
   1:lib/TinyUSB/src/common/tusb_fifo.c **** /*
   2:lib/TinyUSB/src/common/tusb_fifo.c ****  * The MIT License (MIT)
   3:lib/TinyUSB/src/common/tusb_fifo.c ****  *
   4:lib/TinyUSB/src/common/tusb_fifo.c ****  * Copyright (c) 2019 Ha Thach (tinyusb.org)
   5:lib/TinyUSB/src/common/tusb_fifo.c ****  * Copyright (c) 2020 Reinhard Panhuber - rework to unmasked pointers
   6:lib/TinyUSB/src/common/tusb_fifo.c ****  *
   7:lib/TinyUSB/src/common/tusb_fifo.c ****  * Permission is hereby granted, free of charge, to any person obtaining a copy
   8:lib/TinyUSB/src/common/tusb_fifo.c ****  * of this software and associated documentation files (the "Software"), to deal
   9:lib/TinyUSB/src/common/tusb_fifo.c ****  * in the Software without restriction, including without limitation the rights
  10:lib/TinyUSB/src/common/tusb_fifo.c ****  * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  11:lib/TinyUSB/src/common/tusb_fifo.c ****  * copies of the Software, and to permit persons to whom the Software is
  12:lib/TinyUSB/src/common/tusb_fifo.c ****  * furnished to do so, subject to the following conditions:
  13:lib/TinyUSB/src/common/tusb_fifo.c ****  *
  14:lib/TinyUSB/src/common/tusb_fifo.c ****  * The above copyright notice and this permission notice shall be included in
  15:lib/TinyUSB/src/common/tusb_fifo.c ****  * all copies or substantial portions of the Software.
  16:lib/TinyUSB/src/common/tusb_fifo.c ****  *
  17:lib/TinyUSB/src/common/tusb_fifo.c ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  18:lib/TinyUSB/src/common/tusb_fifo.c ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  19:lib/TinyUSB/src/common/tusb_fifo.c ****  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  20:lib/TinyUSB/src/common/tusb_fifo.c ****  * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  21:lib/TinyUSB/src/common/tusb_fifo.c ****  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  22:lib/TinyUSB/src/common/tusb_fifo.c ****  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  23:lib/TinyUSB/src/common/tusb_fifo.c ****  * THE SOFTWARE.
  24:lib/TinyUSB/src/common/tusb_fifo.c ****  *
  25:lib/TinyUSB/src/common/tusb_fifo.c ****  * This file is part of the TinyUSB stack.
  26:lib/TinyUSB/src/common/tusb_fifo.c ****  */
  27:lib/TinyUSB/src/common/tusb_fifo.c **** 
  28:lib/TinyUSB/src/common/tusb_fifo.c **** #include "osal/osal.h"
  29:lib/TinyUSB/src/common/tusb_fifo.c **** #include "tusb_fifo.h"
  30:lib/TinyUSB/src/common/tusb_fifo.c **** 
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 2


  31:lib/TinyUSB/src/common/tusb_fifo.c **** #define TU_FIFO_DBG 0
  32:lib/TinyUSB/src/common/tusb_fifo.c **** 
  33:lib/TinyUSB/src/common/tusb_fifo.c **** // Suppress IAR warning
  34:lib/TinyUSB/src/common/tusb_fifo.c **** // Warning[Pa082]: undefined behavior: the order of volatile accesses is undefined in this statemen
  35:lib/TinyUSB/src/common/tusb_fifo.c **** #if defined(__ICCARM__)
  36:lib/TinyUSB/src/common/tusb_fifo.c **** #pragma diag_suppress = Pa082
  37:lib/TinyUSB/src/common/tusb_fifo.c **** #endif
  38:lib/TinyUSB/src/common/tusb_fifo.c **** 
  39:lib/TinyUSB/src/common/tusb_fifo.c **** #if OSAL_MUTEX_REQUIRED
  40:lib/TinyUSB/src/common/tusb_fifo.c **** 
  41:lib/TinyUSB/src/common/tusb_fifo.c **** TU_ATTR_ALWAYS_INLINE static inline void ff_lock(osal_mutex_t mutex) {
  42:lib/TinyUSB/src/common/tusb_fifo.c ****   if (mutex != NULL) {
  43:lib/TinyUSB/src/common/tusb_fifo.c ****     osal_mutex_lock(mutex, OSAL_TIMEOUT_WAIT_FOREVER);
  44:lib/TinyUSB/src/common/tusb_fifo.c ****   }
  45:lib/TinyUSB/src/common/tusb_fifo.c **** }
  46:lib/TinyUSB/src/common/tusb_fifo.c **** 
  47:lib/TinyUSB/src/common/tusb_fifo.c **** TU_ATTR_ALWAYS_INLINE static inline void ff_unlock(osal_mutex_t mutex) {
  48:lib/TinyUSB/src/common/tusb_fifo.c ****   if (mutex != NULL) {
  49:lib/TinyUSB/src/common/tusb_fifo.c ****     osal_mutex_unlock(mutex);
  50:lib/TinyUSB/src/common/tusb_fifo.c ****   }
  51:lib/TinyUSB/src/common/tusb_fifo.c **** }
  52:lib/TinyUSB/src/common/tusb_fifo.c **** 
  53:lib/TinyUSB/src/common/tusb_fifo.c **** #else
  54:lib/TinyUSB/src/common/tusb_fifo.c ****   #define ff_lock(_mutex)
  55:lib/TinyUSB/src/common/tusb_fifo.c ****   #define ff_unlock(_mutex)
  56:lib/TinyUSB/src/common/tusb_fifo.c **** 
  57:lib/TinyUSB/src/common/tusb_fifo.c **** #endif
  58:lib/TinyUSB/src/common/tusb_fifo.c **** 
  59:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
  60:lib/TinyUSB/src/common/tusb_fifo.c **** // Setup API
  61:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
  62:lib/TinyUSB/src/common/tusb_fifo.c **** bool tu_fifo_config(tu_fifo_t *f, void *buffer, uint16_t depth, uint16_t item_size, bool overwritab
  63:lib/TinyUSB/src/common/tusb_fifo.c ****   // Limit index space to 2*depth - this allows for a fast "modulo" calculation
  64:lib/TinyUSB/src/common/tusb_fifo.c ****   // but limits the maximum depth to 2^16/2 = 2^15 and buffer overflows are detectable
  65:lib/TinyUSB/src/common/tusb_fifo.c ****   // only if overflow happens once (important for unsupervised DMA applications)
  66:lib/TinyUSB/src/common/tusb_fifo.c ****   if (depth > 0x8000) {
  67:lib/TinyUSB/src/common/tusb_fifo.c ****     return false;
  68:lib/TinyUSB/src/common/tusb_fifo.c ****   }
  69:lib/TinyUSB/src/common/tusb_fifo.c **** 
  70:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_wr);
  71:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
  72:lib/TinyUSB/src/common/tusb_fifo.c **** 
  73:lib/TinyUSB/src/common/tusb_fifo.c ****   f->buffer       = (uint8_t *)buffer;
  74:lib/TinyUSB/src/common/tusb_fifo.c ****   f->depth        = depth;
  75:lib/TinyUSB/src/common/tusb_fifo.c ****   f->item_size    = (uint16_t)(item_size & 0x7FFFu);
  76:lib/TinyUSB/src/common/tusb_fifo.c ****   f->overwritable = overwritable;
  77:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx       = 0u;
  78:lib/TinyUSB/src/common/tusb_fifo.c ****   f->wr_idx       = 0u;
  79:lib/TinyUSB/src/common/tusb_fifo.c **** 
  80:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_wr);
  81:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
  82:lib/TinyUSB/src/common/tusb_fifo.c **** 
  83:lib/TinyUSB/src/common/tusb_fifo.c ****   return true;
  84:lib/TinyUSB/src/common/tusb_fifo.c **** }
  85:lib/TinyUSB/src/common/tusb_fifo.c **** 
  86:lib/TinyUSB/src/common/tusb_fifo.c **** // clear fifo by resetting read and write indices
  87:lib/TinyUSB/src/common/tusb_fifo.c **** void tu_fifo_clear(tu_fifo_t *f) {
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 3


  88:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_wr);
  89:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
  90:lib/TinyUSB/src/common/tusb_fifo.c **** 
  91:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = 0;
  92:lib/TinyUSB/src/common/tusb_fifo.c ****   f->wr_idx = 0;
  93:lib/TinyUSB/src/common/tusb_fifo.c **** 
  94:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_wr);
  95:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
  96:lib/TinyUSB/src/common/tusb_fifo.c **** }
  97:lib/TinyUSB/src/common/tusb_fifo.c **** 
  98:lib/TinyUSB/src/common/tusb_fifo.c **** // Change the fifo overwritable mode
  99:lib/TinyUSB/src/common/tusb_fifo.c **** void tu_fifo_set_overwritable(tu_fifo_t *f, bool overwritable) {
 100:lib/TinyUSB/src/common/tusb_fifo.c ****   if (f->overwritable == overwritable) {
 101:lib/TinyUSB/src/common/tusb_fifo.c ****     return;
 102:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 103:lib/TinyUSB/src/common/tusb_fifo.c **** 
 104:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_wr);
 105:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 106:lib/TinyUSB/src/common/tusb_fifo.c **** 
 107:lib/TinyUSB/src/common/tusb_fifo.c ****   f->overwritable = overwritable;
 108:lib/TinyUSB/src/common/tusb_fifo.c **** 
 109:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_wr);
 110:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 111:lib/TinyUSB/src/common/tusb_fifo.c **** }
 112:lib/TinyUSB/src/common/tusb_fifo.c **** 
 113:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 114:lib/TinyUSB/src/common/tusb_fifo.c **** // Pull & Push
 115:lib/TinyUSB/src/common/tusb_fifo.c **** // copy data to/from fifo without updating read/write pointers
 116:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 117:lib/TinyUSB/src/common/tusb_fifo.c **** #ifdef CFG_TUSB_FIFO_ACCESS_FIXED_ADDR_RW32
 118:lib/TinyUSB/src/common/tusb_fifo.c **** // Copy to fifo from fixed address buffer (usually a rx register) with TU_FIFO_FIXED_ADDR_RW32 mode
 119:lib/TinyUSB/src/common/tusb_fifo.c **** static void ff_push_fixed_addr_rw32(uint8_t *ff_buf, const volatile uint32_t *reg_rx, uint16_t len)
 120:lib/TinyUSB/src/common/tusb_fifo.c ****   // Reading full available 32 bit words from const app address
 121:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t full_words = len >> 2;
 122:lib/TinyUSB/src/common/tusb_fifo.c ****   while (full_words--) {
 123:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 124:lib/TinyUSB/src/common/tusb_fifo.c ****     tu_unaligned_write32(ff_buf, tmp32);
 125:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_buf += 4;
 126:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 127:lib/TinyUSB/src/common/tusb_fifo.c **** 
 128:lib/TinyUSB/src/common/tusb_fifo.c ****   // Read the remaining 1-3 bytes from const app address
 129:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint8_t bytes_rem = len & 0x03;
 130:lib/TinyUSB/src/common/tusb_fifo.c ****   if (bytes_rem) {
 131:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 132:lib/TinyUSB/src/common/tusb_fifo.c ****     memcpy(ff_buf, &tmp32, bytes_rem);
 133:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 134:lib/TinyUSB/src/common/tusb_fifo.c **** }
 135:lib/TinyUSB/src/common/tusb_fifo.c **** 
 136:lib/TinyUSB/src/common/tusb_fifo.c **** // Copy from fifo to fixed address buffer (usually a tx register) with TU_FIFO_FIXED_ADDR_RW32 mode
 137:lib/TinyUSB/src/common/tusb_fifo.c **** static void ff_pull_fixed_addr_rw32(volatile uint32_t *reg_tx, const uint8_t *ff_buf, uint16_t len)
 138:lib/TinyUSB/src/common/tusb_fifo.c ****   // Write full available 32 bit words to const address
 139:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t full_words = len >> 2u;
 140:lib/TinyUSB/src/common/tusb_fifo.c ****   while (full_words--) {
 141:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tu_unaligned_read32(ff_buf);
 142:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_buf += 4u;
 143:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 144:lib/TinyUSB/src/common/tusb_fifo.c **** 
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 4


 145:lib/TinyUSB/src/common/tusb_fifo.c ****   // Write the remaining 1-3 bytes
 146:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint8_t bytes_rem = len & 0x03;
 147:lib/TinyUSB/src/common/tusb_fifo.c ****   if (bytes_rem) {
 148:lib/TinyUSB/src/common/tusb_fifo.c ****     uint32_t tmp32 = 0u;
 149:lib/TinyUSB/src/common/tusb_fifo.c ****     memcpy(&tmp32, ff_buf, bytes_rem);
 150:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tmp32;
 151:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 152:lib/TinyUSB/src/common/tusb_fifo.c **** }
 153:lib/TinyUSB/src/common/tusb_fifo.c **** #endif
 154:lib/TinyUSB/src/common/tusb_fifo.c **** 
 155:lib/TinyUSB/src/common/tusb_fifo.c **** // send n items to fifo WITHOUT updating write pointer
 156:lib/TinyUSB/src/common/tusb_fifo.c **** static void ff_push_n(const tu_fifo_t *f, const void *app_buf, uint16_t n, uint16_t wr_ptr,
 157:lib/TinyUSB/src/common/tusb_fifo.c ****                       tu_fifo_access_mode_t copy_mode) {
 158:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t lin_count  = f->depth - wr_ptr;
 159:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t wrap_count = n - lin_count;
 160:lib/TinyUSB/src/common/tusb_fifo.c **** 
 161:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t lin_bytes  = lin_count * f->item_size;
 162:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wrap_bytes = wrap_count * f->item_size;
 163:lib/TinyUSB/src/common/tusb_fifo.c **** 
 164:lib/TinyUSB/src/common/tusb_fifo.c ****   // current buffer of fifo
 165:lib/TinyUSB/src/common/tusb_fifo.c ****   uint8_t *ff_buf = f->buffer + (wr_ptr * f->item_size);
 166:lib/TinyUSB/src/common/tusb_fifo.c **** 
 167:lib/TinyUSB/src/common/tusb_fifo.c ****   switch (copy_mode) {
 168:lib/TinyUSB/src/common/tusb_fifo.c ****     case TU_FIFO_INC_ADDR_RW8:
 169:lib/TinyUSB/src/common/tusb_fifo.c ****       if (n <= lin_count) {
 170:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 171:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy(ff_buf, app_buf, n * f->item_size);
 172:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 173:lib/TinyUSB/src/common/tusb_fifo.c ****         // Wrap around
 174:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy(ff_buf, app_buf, lin_bytes);                                    // linear part
 175:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy(f->buffer, ((const uint8_t *)app_buf) + lin_bytes, wrap_bytes); // wrapped part
 176:lib/TinyUSB/src/common/tusb_fifo.c ****       }
 177:lib/TinyUSB/src/common/tusb_fifo.c ****       break;
 178:lib/TinyUSB/src/common/tusb_fifo.c **** 
 179:lib/TinyUSB/src/common/tusb_fifo.c **** #ifdef CFG_TUSB_FIFO_ACCESS_FIXED_ADDR_RW32
 180:lib/TinyUSB/src/common/tusb_fifo.c ****     case TU_FIFO_FIXED_ADDR_RW32: {
 181:lib/TinyUSB/src/common/tusb_fifo.c ****       const volatile uint32_t *reg_rx = (volatile const uint32_t *)app_buf;
 182:lib/TinyUSB/src/common/tusb_fifo.c ****       if (n <= lin_count) {
 183:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 184:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_push_fixed_addr_rw32(ff_buf, reg_rx, n * f->item_size);
 185:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 186:lib/TinyUSB/src/common/tusb_fifo.c ****         // Wrap around
 187:lib/TinyUSB/src/common/tusb_fifo.c **** 
 188:lib/TinyUSB/src/common/tusb_fifo.c ****         // Write full words to linear part of buffer
 189:lib/TinyUSB/src/common/tusb_fifo.c ****         uint16_t lin_4n_bytes = lin_bytes & 0xFFFC;
 190:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_push_fixed_addr_rw32(ff_buf, reg_rx, lin_4n_bytes);
 191:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_buf += lin_4n_bytes;
 192:lib/TinyUSB/src/common/tusb_fifo.c **** 
 193:lib/TinyUSB/src/common/tusb_fifo.c ****         // There could be odd 1-3 bytes before the wrap-around boundary
 194:lib/TinyUSB/src/common/tusb_fifo.c ****         const uint8_t rem = lin_bytes & 0x03;
 195:lib/TinyUSB/src/common/tusb_fifo.c ****         if (rem > 0) {
 196:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint8_t  remrem = (uint8_t)tu_min16(wrap_bytes, 4 - rem);
 197:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint32_t tmp32  = *reg_rx;
 198:lib/TinyUSB/src/common/tusb_fifo.c ****           tu_scatter_write32(tmp32, ff_buf, rem, f->buffer, remrem);
 199:lib/TinyUSB/src/common/tusb_fifo.c **** 
 200:lib/TinyUSB/src/common/tusb_fifo.c ****           wrap_bytes -= remrem;
 201:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_buf = f->buffer + remrem; // wrap around
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 5


 202:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 203:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_buf = f->buffer; // wrap around to beginning
 204:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 205:lib/TinyUSB/src/common/tusb_fifo.c **** 
 206:lib/TinyUSB/src/common/tusb_fifo.c ****         // Write data wrapped part
 207:lib/TinyUSB/src/common/tusb_fifo.c ****         if (wrap_bytes > 0) {
 208:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_push_fixed_addr_rw32(ff_buf, reg_rx, wrap_bytes);
 209:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 210:lib/TinyUSB/src/common/tusb_fifo.c ****       }
 211:lib/TinyUSB/src/common/tusb_fifo.c ****       break;
 212:lib/TinyUSB/src/common/tusb_fifo.c ****     }
 213:lib/TinyUSB/src/common/tusb_fifo.c **** #endif
 214:lib/TinyUSB/src/common/tusb_fifo.c **** 
 215:lib/TinyUSB/src/common/tusb_fifo.c ****     default:
 216:lib/TinyUSB/src/common/tusb_fifo.c ****       break; // unknown mode
 217:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 218:lib/TinyUSB/src/common/tusb_fifo.c **** }
 219:lib/TinyUSB/src/common/tusb_fifo.c **** 
 220:lib/TinyUSB/src/common/tusb_fifo.c **** // get n items from fifo WITHOUT updating read pointer
 221:lib/TinyUSB/src/common/tusb_fifo.c **** static void ff_pull_n(const tu_fifo_t *f, void *app_buf, uint16_t n, uint16_t rd_ptr, tu_fifo_acces
 222:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t lin_count  = f->depth - rd_ptr;
 223:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t wrap_count = n - lin_count; // only used if wrapped
 224:lib/TinyUSB/src/common/tusb_fifo.c **** 
 225:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t lin_bytes  = lin_count * f->item_size;
 226:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wrap_bytes = wrap_count * f->item_size;
 227:lib/TinyUSB/src/common/tusb_fifo.c **** 
 228:lib/TinyUSB/src/common/tusb_fifo.c ****   // current buffer of fifo
 229:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint8_t *ff_buf = f->buffer + (rd_ptr * f->item_size);
 230:lib/TinyUSB/src/common/tusb_fifo.c **** 
 231:lib/TinyUSB/src/common/tusb_fifo.c ****   switch (copy_mode) {
 232:lib/TinyUSB/src/common/tusb_fifo.c ****     case TU_FIFO_INC_ADDR_RW8:
 233:lib/TinyUSB/src/common/tusb_fifo.c ****       if (n <= lin_count) {
 234:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 235:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy(app_buf, ff_buf, n * f->item_size);
 236:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 237:lib/TinyUSB/src/common/tusb_fifo.c ****         // Wrap around
 238:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy(app_buf, ff_buf, lin_bytes);                            // linear part
 239:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy((uint8_t *)app_buf + lin_bytes, f->buffer, wrap_bytes); // wrapped part
 240:lib/TinyUSB/src/common/tusb_fifo.c ****       }
 241:lib/TinyUSB/src/common/tusb_fifo.c ****       break;
 242:lib/TinyUSB/src/common/tusb_fifo.c **** 
 243:lib/TinyUSB/src/common/tusb_fifo.c **** #ifdef  CFG_TUSB_FIFO_ACCESS_FIXED_ADDR_RW32
 244:lib/TinyUSB/src/common/tusb_fifo.c ****     case TU_FIFO_FIXED_ADDR_RW32: {
 245:lib/TinyUSB/src/common/tusb_fifo.c ****       volatile uint32_t *reg_tx = (volatile uint32_t *)app_buf;
 246:lib/TinyUSB/src/common/tusb_fifo.c **** 
 247:lib/TinyUSB/src/common/tusb_fifo.c ****       if (n <= lin_count) {
 248:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 249:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_pull_fixed_addr_rw32(reg_tx, ff_buf, n * f->item_size);
 250:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 251:lib/TinyUSB/src/common/tusb_fifo.c ****         // Wrap around case
 252:lib/TinyUSB/src/common/tusb_fifo.c **** 
 253:lib/TinyUSB/src/common/tusb_fifo.c ****         // Read full words from linear part
 254:lib/TinyUSB/src/common/tusb_fifo.c ****         uint16_t lin_4n_bytes = lin_bytes & 0xFFFC;
 255:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_pull_fixed_addr_rw32(reg_tx, ff_buf, lin_4n_bytes);
 256:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_buf += lin_4n_bytes;
 257:lib/TinyUSB/src/common/tusb_fifo.c **** 
 258:lib/TinyUSB/src/common/tusb_fifo.c ****         // There could be odd 1-3 bytes before the wrap-around boundary
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 6


 259:lib/TinyUSB/src/common/tusb_fifo.c ****         const uint8_t rem = lin_bytes & 0x03;
 260:lib/TinyUSB/src/common/tusb_fifo.c ****         if (rem > 0) {
 261:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint8_t  remrem    = (uint8_t)tu_min16(wrap_bytes, 4 - rem);
 262:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint32_t scatter32 = tu_scatter_read32(ff_buf, rem, f->buffer, remrem);
 263:lib/TinyUSB/src/common/tusb_fifo.c **** 
 264:lib/TinyUSB/src/common/tusb_fifo.c ****           *reg_tx = scatter32;
 265:lib/TinyUSB/src/common/tusb_fifo.c **** 
 266:lib/TinyUSB/src/common/tusb_fifo.c ****           wrap_bytes -= remrem;
 267:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_buf = f->buffer + remrem; // wrap around
 268:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 269:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_buf = f->buffer;          // wrap around to beginning
 270:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 271:lib/TinyUSB/src/common/tusb_fifo.c **** 
 272:lib/TinyUSB/src/common/tusb_fifo.c ****         // Read data wrapped part
 273:lib/TinyUSB/src/common/tusb_fifo.c ****         if (wrap_bytes > 0) {
 274:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_pull_fixed_addr_rw32(reg_tx, ff_buf, wrap_bytes);
 275:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 276:lib/TinyUSB/src/common/tusb_fifo.c ****       }
 277:lib/TinyUSB/src/common/tusb_fifo.c ****       break;
 278:lib/TinyUSB/src/common/tusb_fifo.c ****     }
 279:lib/TinyUSB/src/common/tusb_fifo.c **** #endif
 280:lib/TinyUSB/src/common/tusb_fifo.c **** 
 281:lib/TinyUSB/src/common/tusb_fifo.c ****     default:
 282:lib/TinyUSB/src/common/tusb_fifo.c ****       break; // unknown mode
 283:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 284:lib/TinyUSB/src/common/tusb_fifo.c **** }
 285:lib/TinyUSB/src/common/tusb_fifo.c **** 
 286:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 287:lib/TinyUSB/src/common/tusb_fifo.c **** // Index Helper
 288:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 289:lib/TinyUSB/src/common/tusb_fifo.c **** 
 290:lib/TinyUSB/src/common/tusb_fifo.c **** // Advance an absolute index
 291:lib/TinyUSB/src/common/tusb_fifo.c **** // "absolute" index is only in the range of [0..2*depth)
 292:lib/TinyUSB/src/common/tusb_fifo.c **** static uint16_t advance_index(uint16_t depth, uint16_t idx, uint16_t offset) {
  29              		.loc 1 292 78 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34              		.loc 1 292 78 is_stmt 0 view .LVU1
  35 0000 0346     		mov	r3, r0
 293:lib/TinyUSB/src/common/tusb_fifo.c ****   // We limit the index space of p such that a correct wrap around happens
 294:lib/TinyUSB/src/common/tusb_fifo.c ****   // Check for a wrap around or if we are in unused index space - This has to be checked first!!
 295:lib/TinyUSB/src/common/tusb_fifo.c ****   // We are exploiting the wrap around to the correct index
 296:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t new_idx = (uint16_t)(idx + offset);
  36              		.loc 1 296 3 is_stmt 1 view .LVU2
  37              		.loc 1 296 12 is_stmt 0 view .LVU3
  38 0002 0A44     		add	r2, r2, r1
  39              	.LVL1:
  40              		.loc 1 296 12 view .LVU4
  41 0004 90B2     		uxth	r0, r2
  42              	.LVL2:
 297:lib/TinyUSB/src/common/tusb_fifo.c ****   if ((idx > new_idx) || (new_idx >= 2 * depth)) {
  43              		.loc 1 297 3 is_stmt 1 view .LVU5
  44              		.loc 1 297 6 is_stmt 0 view .LVU6
  45 0006 8142     		cmp	r1, r0
  46 0008 02D8     		bhi	.L2
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 7


  47              		.loc 1 297 23 discriminator 1 view .LVU7
  48 000a B0EB430F 		cmp	r0, r3, lsl #1
  49 000e 03DB     		blt	.L3
  50              	.L2:
  51              	.LBB85:
 298:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint16_t non_used_index_space = (uint16_t)(UINT16_MAX - (2 * depth - 1));
  52              		.loc 1 298 5 is_stmt 1 view .LVU8
  53              		.loc 1 298 43 is_stmt 0 view .LVU9
  54 0010 5B00     		lsls	r3, r3, #1
  55 0012 9BB2     		uxth	r3, r3
  56              	.LVL3:
 299:lib/TinyUSB/src/common/tusb_fifo.c ****     new_idx                             = (uint16_t)(new_idx + non_used_index_space);
  57              		.loc 1 299 5 is_stmt 1 view .LVU10
  58 0014 C01A     		subs	r0, r0, r3
  59              	.LVL4:
  60              		.loc 1 299 5 is_stmt 0 view .LVU11
  61 0016 80B2     		uxth	r0, r0
  62              	.LVL5:
  63              	.L3:
  64              		.loc 1 299 5 view .LVU12
  65              	.LBE85:
 300:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 301:lib/TinyUSB/src/common/tusb_fifo.c **** 
 302:lib/TinyUSB/src/common/tusb_fifo.c ****   return new_idx;
  66              		.loc 1 302 3 is_stmt 1 view .LVU13
 303:lib/TinyUSB/src/common/tusb_fifo.c **** }
  67              		.loc 1 303 1 is_stmt 0 view .LVU14
  68 0018 7047     		bx	lr
  69              		.cfi_endproc
  70              	.LFE82:
  72              		.section	.text.correct_read_index,"ax",%progbits
  73              		.align	1
  74              		.syntax unified
  75              		.thumb
  76              		.thumb_func
  78              	correct_read_index:
  79              	.LVL6:
  80              	.LFB84:
 304:lib/TinyUSB/src/common/tusb_fifo.c **** 
 305:lib/TinyUSB/src/common/tusb_fifo.c **** // index to pointer (0..depth-1), simply a modulo with minus.
 306:lib/TinyUSB/src/common/tusb_fifo.c **** TU_ATTR_ALWAYS_INLINE static inline uint16_t idx2ptr(uint16_t depth, uint16_t idx) {
 307:lib/TinyUSB/src/common/tusb_fifo.c ****   // Only run at most 3 times since index is limit in the range of [0..2*depth)
 308:lib/TinyUSB/src/common/tusb_fifo.c ****   while (idx >= depth) {
 309:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 310:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 311:lib/TinyUSB/src/common/tusb_fifo.c ****   return idx;
 312:lib/TinyUSB/src/common/tusb_fifo.c **** }
 313:lib/TinyUSB/src/common/tusb_fifo.c **** 
 314:lib/TinyUSB/src/common/tusb_fifo.c **** // Works on local copies of w
 315:lib/TinyUSB/src/common/tusb_fifo.c **** // When an overwritable fifo is overflowed, rd_idx will be re-index so that it forms a full fifo
 316:lib/TinyUSB/src/common/tusb_fifo.c **** static uint16_t correct_read_index(tu_fifo_t *f, uint16_t wr_idx) {
  81              		.loc 1 316 67 is_stmt 1 view -0
  82              		.cfi_startproc
  83              		@ args = 0, pretend = 0, frame = 0
  84              		@ frame_needed = 0, uses_anonymous_args = 0
  85              		@ link register save eliminated.
  86              		.loc 1 316 67 is_stmt 0 view .LVU16
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 8


  87 0000 0246     		mov	r2, r0
 317:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t rd_idx;
  88              		.loc 1 317 3 is_stmt 1 view .LVU17
 318:lib/TinyUSB/src/common/tusb_fifo.c ****   if (wr_idx >= f->depth) {
  89              		.loc 1 318 3 view .LVU18
  90              		.loc 1 318 18 is_stmt 0 view .LVU19
  91 0002 8388     		ldrh	r3, [r0, #4]
  92              		.loc 1 318 6 view .LVU20
  93 0004 8B42     		cmp	r3, r1
  94 0006 03D8     		bhi	.L5
 319:lib/TinyUSB/src/common/tusb_fifo.c ****     rd_idx = wr_idx - f->depth;
  95              		.loc 1 319 5 is_stmt 1 view .LVU21
  96              		.loc 1 319 12 is_stmt 0 view .LVU22
  97 0008 CB1A     		subs	r3, r1, r3
  98 000a 98B2     		uxth	r0, r3
  99              	.LVL7:
 100              	.L6:
 320:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 321:lib/TinyUSB/src/common/tusb_fifo.c ****     rd_idx = wr_idx + f->depth;
 322:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 323:lib/TinyUSB/src/common/tusb_fifo.c **** 
 324:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = rd_idx;
 101              		.loc 1 324 3 is_stmt 1 view .LVU23
 102              		.loc 1 324 13 is_stmt 0 view .LVU24
 103 000c 5081     		strh	r0, [r2, #10]	@ movhi
 325:lib/TinyUSB/src/common/tusb_fifo.c ****   return rd_idx;
 104              		.loc 1 325 3 is_stmt 1 view .LVU25
 326:lib/TinyUSB/src/common/tusb_fifo.c **** }
 105              		.loc 1 326 1 is_stmt 0 view .LVU26
 106 000e 7047     		bx	lr
 107              	.LVL8:
 108              	.L5:
 321:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 109              		.loc 1 321 5 is_stmt 1 view .LVU27
 321:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 110              		.loc 1 321 12 is_stmt 0 view .LVU28
 111 0010 0B44     		add	r3, r3, r1
 112 0012 98B2     		uxth	r0, r3
 113              	.LVL9:
 321:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 114              		.loc 1 321 12 view .LVU29
 115 0014 FAE7     		b	.L6
 116              		.cfi_endproc
 117              	.LFE84:
 119              		.section	.text.ff_pull_fixed_addr_rw32,"ax",%progbits
 120              		.align	1
 121              		.syntax unified
 122              		.thumb
 123              		.thumb_func
 125              	ff_pull_fixed_addr_rw32:
 126              	.LVL10:
 127              	.LFB79:
 137:lib/TinyUSB/src/common/tusb_fifo.c ****   // Write full available 32 bit words to const address
 128              		.loc 1 137 101 is_stmt 1 view -0
 129              		.cfi_startproc
 130              		@ args = 0, pretend = 0, frame = 8
 131              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 9


 137:lib/TinyUSB/src/common/tusb_fifo.c ****   // Write full available 32 bit words to const address
 132              		.loc 1 137 101 is_stmt 0 view .LVU31
 133 0000 30B5     		push	{r4, r5, lr}
 134              	.LCFI0:
 135              		.cfi_def_cfa_offset 12
 136              		.cfi_offset 4, -12
 137              		.cfi_offset 5, -8
 138              		.cfi_offset 14, -4
 139 0002 83B0     		sub	sp, sp, #12
 140              	.LCFI1:
 141              		.cfi_def_cfa_offset 24
 142 0004 0546     		mov	r5, r0
 139:lib/TinyUSB/src/common/tusb_fifo.c ****   while (full_words--) {
 143              		.loc 1 139 3 is_stmt 1 view .LVU32
 139:lib/TinyUSB/src/common/tusb_fifo.c ****   while (full_words--) {
 144              		.loc 1 139 12 is_stmt 0 view .LVU33
 145 0006 9408     		lsrs	r4, r2, #2
 146              	.LVL11:
 140:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tu_unaligned_read32(ff_buf);
 147              		.loc 1 140 3 is_stmt 1 view .LVU34
 140:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tu_unaligned_read32(ff_buf);
 148              		.loc 1 140 9 is_stmt 0 view .LVU35
 149 0008 03E0     		b	.L8
 150              	.LVL12:
 151              	.L9:
 141:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_buf += 4u;
 152              		.loc 1 141 5 is_stmt 1 view .LVU36
 153              	.LBB86:
 154              	.LBI86:
 155              		.file 2 "lib/TinyUSB/src/common/tusb_common.h"
   1:lib/TinyUSB/src/common/tusb_common.h **** /*
   2:lib/TinyUSB/src/common/tusb_common.h ****  * The MIT License (MIT)
   3:lib/TinyUSB/src/common/tusb_common.h ****  *
   4:lib/TinyUSB/src/common/tusb_common.h ****  * Copyright (c) 2019 Ha Thach (tinyusb.org)
   5:lib/TinyUSB/src/common/tusb_common.h ****  *
   6:lib/TinyUSB/src/common/tusb_common.h ****  * Permission is hereby granted, free of charge, to any person obtaining a copy
   7:lib/TinyUSB/src/common/tusb_common.h ****  * of this software and associated documentation files (the "Software"), to deal
   8:lib/TinyUSB/src/common/tusb_common.h ****  * in the Software without restriction, including without limitation the rights
   9:lib/TinyUSB/src/common/tusb_common.h ****  * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  10:lib/TinyUSB/src/common/tusb_common.h ****  * copies of the Software, and to permit persons to whom the Software is
  11:lib/TinyUSB/src/common/tusb_common.h ****  * furnished to do so, subject to the following conditions:
  12:lib/TinyUSB/src/common/tusb_common.h ****  *
  13:lib/TinyUSB/src/common/tusb_common.h ****  * The above copyright notice and this permission notice shall be included in
  14:lib/TinyUSB/src/common/tusb_common.h ****  * all copies or substantial portions of the Software.
  15:lib/TinyUSB/src/common/tusb_common.h ****  *
  16:lib/TinyUSB/src/common/tusb_common.h ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  17:lib/TinyUSB/src/common/tusb_common.h ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  18:lib/TinyUSB/src/common/tusb_common.h ****  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  19:lib/TinyUSB/src/common/tusb_common.h ****  * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  20:lib/TinyUSB/src/common/tusb_common.h ****  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  21:lib/TinyUSB/src/common/tusb_common.h ****  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  22:lib/TinyUSB/src/common/tusb_common.h ****  * THE SOFTWARE.
  23:lib/TinyUSB/src/common/tusb_common.h ****  *
  24:lib/TinyUSB/src/common/tusb_common.h ****  * This file is part of the TinyUSB stack.
  25:lib/TinyUSB/src/common/tusb_common.h ****  */
  26:lib/TinyUSB/src/common/tusb_common.h **** 
  27:lib/TinyUSB/src/common/tusb_common.h **** #ifndef TUSB_COMMON_H_
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 10


  28:lib/TinyUSB/src/common/tusb_common.h **** #define TUSB_COMMON_H_
  29:lib/TinyUSB/src/common/tusb_common.h **** 
  30:lib/TinyUSB/src/common/tusb_common.h **** #ifdef __cplusplus
  31:lib/TinyUSB/src/common/tusb_common.h ****  extern "C" {
  32:lib/TinyUSB/src/common/tusb_common.h **** #endif
  33:lib/TinyUSB/src/common/tusb_common.h **** 
  34:lib/TinyUSB/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  35:lib/TinyUSB/src/common/tusb_common.h **** // Macros Helper
  36:lib/TinyUSB/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  37:lib/TinyUSB/src/common/tusb_common.h **** #define TU_ARRAY_SIZE(_arr)           ( sizeof(_arr) / sizeof(_arr[0]) )
  38:lib/TinyUSB/src/common/tusb_common.h **** #define TU_FIELD_SIZE(_type, _field)  (sizeof(((_type *)0)->_field))
  39:lib/TinyUSB/src/common/tusb_common.h **** #define TU_MIN(_x, _y)                ( ( (_x) < (_y) ) ? (_x) : (_y) )
  40:lib/TinyUSB/src/common/tusb_common.h **** #define TU_MAX(_x, _y)                ( ( (_x) > (_y) ) ? (_x) : (_y) )
  41:lib/TinyUSB/src/common/tusb_common.h **** #define TU_DIV_CEIL(n, d)             (((n) + (d) - 1) / (d))
  42:lib/TinyUSB/src/common/tusb_common.h **** #define TU_DIV_ROUND_NEAREST(v, d)    (((v) + (d)/2) / (d) ) // round to nearest integer
  43:lib/TinyUSB/src/common/tusb_common.h **** 
  44:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U16(_high, _low)           ((uint16_t) ((((uint16_t) (_high)) << 8) | ((uint16_t) (_low)
  45:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U16_HIGH(_u16)             ((uint8_t) (((uint16_t) (_u16) >> 8) & 0x00ffu))
  46:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U16_LOW(_u16)              ((uint8_t) ((uint16_t) (_u16) & 0x00ffu))
  47:lib/TinyUSB/src/common/tusb_common.h **** #define U16_TO_U8S_BE(_u16)           TU_U16_HIGH(_u16), TU_U16_LOW(_u16)
  48:lib/TinyUSB/src/common/tusb_common.h **** #define U16_TO_U8S_LE(_u16)           TU_U16_LOW(_u16), TU_U16_HIGH(_u16)
  49:lib/TinyUSB/src/common/tusb_common.h **** 
  50:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U24(_high, _mid, _low)     ((uint32_t) ((((uint32_t) (_high)) << 16) | (((uint32_t) (_mi
  51:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U24_HIGH(_u24)             ((uint8_t) (((uint32_t) (_u24) >> 16) & 0x0000ffu))
  52:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U24_MID(_u24)              ((uint8_t) (((uint32_t) (_u24) >>  8) & 0x0000ffu))
  53:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U24_LOW(_u24)              ((uint8_t) ((uint32_t) (_u24) & 0x0000ffu))
  54:lib/TinyUSB/src/common/tusb_common.h **** #define U24_TO_U8S_BE(_u24)           TU_U24_HIGH(_u24), TU_U24_MID(_u24), TU_U24_LOW(_u24)
  55:lib/TinyUSB/src/common/tusb_common.h **** #define U24_TO_U8S_LE(_u24)           TU_U24_LOW(_u24), TU_U24_MID(_u24), TU_U24_HIGH(_u24)
  56:lib/TinyUSB/src/common/tusb_common.h **** 
  57:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U32_BYTE3(_u32)            ((uint8_t) ((((uint32_t) _u32) >> 24) & 0x000000ff)) // MSB
  58:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U32_BYTE2(_u32)            ((uint8_t) ((((uint32_t) _u32) >> 16) & 0x000000ff))
  59:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U32_BYTE1(_u32)            ((uint8_t) ((((uint32_t) _u32) >>  8) & 0x000000ff))
  60:lib/TinyUSB/src/common/tusb_common.h **** #define TU_U32_BYTE0(_u32)            ((uint8_t) (((uint32_t)  _u32)        & 0x000000ff)) // LSB
  61:lib/TinyUSB/src/common/tusb_common.h **** 
  62:lib/TinyUSB/src/common/tusb_common.h **** #define U32_TO_U8S_BE(_u32)           TU_U32_BYTE3(_u32), TU_U32_BYTE2(_u32), TU_U32_BYTE1(_u32), T
  63:lib/TinyUSB/src/common/tusb_common.h **** #define U32_TO_U8S_LE(_u32)           TU_U32_BYTE0(_u32), TU_U32_BYTE1(_u32), TU_U32_BYTE2(_u32), T
  64:lib/TinyUSB/src/common/tusb_common.h **** 
  65:lib/TinyUSB/src/common/tusb_common.h **** #define TU_BIT(n)                     (1UL << (n))
  66:lib/TinyUSB/src/common/tusb_common.h **** 
  67:lib/TinyUSB/src/common/tusb_common.h **** // Generate a mask with bit from high (31) to low (0) set, e.g TU_GENMASK(3, 0) = 0b1111
  68:lib/TinyUSB/src/common/tusb_common.h **** #define TU_GENMASK(h, l)              ( (UINT32_MAX << (l)) & (UINT32_MAX >> (31 - (h))) )
  69:lib/TinyUSB/src/common/tusb_common.h **** 
  70:lib/TinyUSB/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  71:lib/TinyUSB/src/common/tusb_common.h **** // Includes
  72:lib/TinyUSB/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  73:lib/TinyUSB/src/common/tusb_common.h **** 
  74:lib/TinyUSB/src/common/tusb_common.h **** // Standard Headers
  75:lib/TinyUSB/src/common/tusb_common.h **** #include <stdbool.h>
  76:lib/TinyUSB/src/common/tusb_common.h **** #include <stdint.h>
  77:lib/TinyUSB/src/common/tusb_common.h **** #include <inttypes.h>
  78:lib/TinyUSB/src/common/tusb_common.h **** #include <stddef.h>
  79:lib/TinyUSB/src/common/tusb_common.h **** #include <string.h>
  80:lib/TinyUSB/src/common/tusb_common.h **** 
  81:lib/TinyUSB/src/common/tusb_common.h **** // Tinyusb Common Headers
  82:lib/TinyUSB/src/common/tusb_common.h **** #include "tusb_option.h"
  83:lib/TinyUSB/src/common/tusb_common.h **** #include "tusb_compiler.h"
  84:lib/TinyUSB/src/common/tusb_common.h **** #include "tusb_verify.h"
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 11


  85:lib/TinyUSB/src/common/tusb_common.h **** #include "tusb_types.h"
  86:lib/TinyUSB/src/common/tusb_common.h **** #include "tusb_debug.h"
  87:lib/TinyUSB/src/common/tusb_common.h **** 
  88:lib/TinyUSB/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  89:lib/TinyUSB/src/common/tusb_common.h **** // API implemented by application if needed
  90:lib/TinyUSB/src/common/tusb_common.h **** // TODO move to a more obvious place/file
  91:lib/TinyUSB/src/common/tusb_common.h **** //--------------------------------------------------------------------+
  92:lib/TinyUSB/src/common/tusb_common.h **** 
  93:lib/TinyUSB/src/common/tusb_common.h **** // Get current milliseconds, required by some port/configuration without RTOS
  94:lib/TinyUSB/src/common/tusb_common.h **** extern uint32_t tusb_time_millis_api(void);
  95:lib/TinyUSB/src/common/tusb_common.h **** 
  96:lib/TinyUSB/src/common/tusb_common.h **** // Delay in milliseconds, use tusb_time_millis_api() by default. required by some port/configuratio
  97:lib/TinyUSB/src/common/tusb_common.h **** extern void tusb_time_delay_ms_api(uint32_t ms);
  98:lib/TinyUSB/src/common/tusb_common.h **** 
  99:lib/TinyUSB/src/common/tusb_common.h **** // flush data cache
 100:lib/TinyUSB/src/common/tusb_common.h **** extern void tusb_app_dcache_flush(uintptr_t addr, uint32_t data_size);
 101:lib/TinyUSB/src/common/tusb_common.h **** 
 102:lib/TinyUSB/src/common/tusb_common.h **** // invalidate data cache
 103:lib/TinyUSB/src/common/tusb_common.h **** extern void tusb_app_dcache_invalidate(uintptr_t addr, uint32_t data_size);
 104:lib/TinyUSB/src/common/tusb_common.h **** 
 105:lib/TinyUSB/src/common/tusb_common.h **** // Optional physical <-> virtual address translation
 106:lib/TinyUSB/src/common/tusb_common.h **** extern void* tusb_app_virt_to_phys(void *virt_addr);
 107:lib/TinyUSB/src/common/tusb_common.h **** extern void* tusb_app_phys_to_virt(void *phys_addr);
 108:lib/TinyUSB/src/common/tusb_common.h **** 
 109:lib/TinyUSB/src/common/tusb_common.h **** //--------------------------------------------------------------------+
 110:lib/TinyUSB/src/common/tusb_common.h **** // Internal Inline Functions
 111:lib/TinyUSB/src/common/tusb_common.h **** //--------------------------------------------------------------------+
 112:lib/TinyUSB/src/common/tusb_common.h **** 
 113:lib/TinyUSB/src/common/tusb_common.h **** //------------- Mem -------------//
 114:lib/TinyUSB/src/common/tusb_common.h **** #define tu_memclr(buffer, size)  (void) memset((buffer), 0, (size))
 115:lib/TinyUSB/src/common/tusb_common.h **** #define tu_varclr(_var)          tu_memclr(_var, sizeof(*(_var)))
 116:lib/TinyUSB/src/common/tusb_common.h **** 
 117:lib/TinyUSB/src/common/tusb_common.h **** // This is a backport of memset_s from c11
 118:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline int tu_memset_s(void *dest, size_t destsz, int ch, size_t count
 119:lib/TinyUSB/src/common/tusb_common.h ****   // Validate parameters
 120:lib/TinyUSB/src/common/tusb_common.h ****   if (dest == NULL) {
 121:lib/TinyUSB/src/common/tusb_common.h ****     return -1;
 122:lib/TinyUSB/src/common/tusb_common.h ****   }
 123:lib/TinyUSB/src/common/tusb_common.h **** 
 124:lib/TinyUSB/src/common/tusb_common.h ****   if (count == 0u) {
 125:lib/TinyUSB/src/common/tusb_common.h ****     return 0;
 126:lib/TinyUSB/src/common/tusb_common.h ****   }
 127:lib/TinyUSB/src/common/tusb_common.h **** 
 128:lib/TinyUSB/src/common/tusb_common.h ****   if (count > destsz) {
 129:lib/TinyUSB/src/common/tusb_common.h ****     return -1;
 130:lib/TinyUSB/src/common/tusb_common.h ****   }
 131:lib/TinyUSB/src/common/tusb_common.h **** 
 132:lib/TinyUSB/src/common/tusb_common.h ****   (void) memset(dest, ch, count);
 133:lib/TinyUSB/src/common/tusb_common.h ****   return 0;
 134:lib/TinyUSB/src/common/tusb_common.h **** }
 135:lib/TinyUSB/src/common/tusb_common.h **** 
 136:lib/TinyUSB/src/common/tusb_common.h **** // This is a backport of memcpy_s from c11
 137:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline int tu_memcpy_s(void *dest, size_t destsz, const void *src, siz
 138:lib/TinyUSB/src/common/tusb_common.h ****   if (dest == NULL) {
 139:lib/TinyUSB/src/common/tusb_common.h ****     return -1;
 140:lib/TinyUSB/src/common/tusb_common.h ****   }
 141:lib/TinyUSB/src/common/tusb_common.h **** 
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 12


 142:lib/TinyUSB/src/common/tusb_common.h ****   if (count == 0u) {
 143:lib/TinyUSB/src/common/tusb_common.h ****     return 0;
 144:lib/TinyUSB/src/common/tusb_common.h ****   }
 145:lib/TinyUSB/src/common/tusb_common.h **** 
 146:lib/TinyUSB/src/common/tusb_common.h ****   if (src == NULL) {
 147:lib/TinyUSB/src/common/tusb_common.h ****     return -1;
 148:lib/TinyUSB/src/common/tusb_common.h ****   }
 149:lib/TinyUSB/src/common/tusb_common.h **** 
 150:lib/TinyUSB/src/common/tusb_common.h ****   if (count > destsz) {
 151:lib/TinyUSB/src/common/tusb_common.h ****     return -1;
 152:lib/TinyUSB/src/common/tusb_common.h ****   }
 153:lib/TinyUSB/src/common/tusb_common.h **** 
 154:lib/TinyUSB/src/common/tusb_common.h ****   (void) memcpy(dest, src, count);
 155:lib/TinyUSB/src/common/tusb_common.h ****   return 0;
 156:lib/TinyUSB/src/common/tusb_common.h **** }
 157:lib/TinyUSB/src/common/tusb_common.h **** 
 158:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline bool tu_mem_is_zero(const void *buffer, size_t size) {
 159:lib/TinyUSB/src/common/tusb_common.h ****   const uint8_t* buf8 = (const uint8_t*) buffer;
 160:lib/TinyUSB/src/common/tusb_common.h ****   for (size_t i = 0; i < size; i++) {
 161:lib/TinyUSB/src/common/tusb_common.h ****     if (buf8[i] != 0) { return false; }
 162:lib/TinyUSB/src/common/tusb_common.h ****   }
 163:lib/TinyUSB/src/common/tusb_common.h ****   return true;
 164:lib/TinyUSB/src/common/tusb_common.h **** }
 165:lib/TinyUSB/src/common/tusb_common.h **** 
 166:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline bool tu_mem_is_ff(const void *buffer, size_t size) {
 167:lib/TinyUSB/src/common/tusb_common.h ****   const uint8_t* buf8 = (const uint8_t*) buffer;
 168:lib/TinyUSB/src/common/tusb_common.h ****   for (size_t i = 0; i < size; i++) {
 169:lib/TinyUSB/src/common/tusb_common.h ****     if (buf8[i] != 0xff) { return false; }
 170:lib/TinyUSB/src/common/tusb_common.h ****   }
 171:lib/TinyUSB/src/common/tusb_common.h ****   return true;
 172:lib/TinyUSB/src/common/tusb_common.h **** }
 173:lib/TinyUSB/src/common/tusb_common.h **** 
 174:lib/TinyUSB/src/common/tusb_common.h **** 
 175:lib/TinyUSB/src/common/tusb_common.h **** //------------- Bytes -------------//
 176:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_u32(uint8_t b3, uint8_t b2, uint8_t b1, uint8_t b0)
 177:lib/TinyUSB/src/common/tusb_common.h ****   return (((uint32_t)b3) << 24) | (((uint32_t)b2) << 16) | (((uint32_t)b1) << 8) | b0;
 178:lib/TinyUSB/src/common/tusb_common.h **** }
 179:lib/TinyUSB/src/common/tusb_common.h **** 
 180:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_u32_from_u16(uint16_t high, uint16_t low) {
 181:lib/TinyUSB/src/common/tusb_common.h ****   return (((uint32_t)high) << 16) | low;
 182:lib/TinyUSB/src/common/tusb_common.h **** }
 183:lib/TinyUSB/src/common/tusb_common.h **** 
 184:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_u16(uint8_t high, uint8_t low) {
 185:lib/TinyUSB/src/common/tusb_common.h ****   return (uint16_t)((((uint16_t)high) << 8) | low);
 186:lib/TinyUSB/src/common/tusb_common.h **** }
 187:lib/TinyUSB/src/common/tusb_common.h **** 
 188:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u32_byte3(uint32_t ui32) { return TU_U32_BYTE3(ui32)
 189:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u32_byte2(uint32_t ui32) { return TU_U32_BYTE2(ui32)
 190:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u32_byte1(uint32_t ui32) { return TU_U32_BYTE1(ui32)
 191:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u32_byte0(uint32_t ui32) { return TU_U32_BYTE0(ui32)
 192:lib/TinyUSB/src/common/tusb_common.h **** 
 193:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_u32_high16(uint32_t ui32) { return (uint16_t) (ui32
 194:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_u32_low16 (uint32_t ui32) { return (uint16_t) (ui32
 195:lib/TinyUSB/src/common/tusb_common.h **** 
 196:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u16_high(uint16_t ui16) { return TU_U16_HIGH(ui16); 
 197:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_u16_low (uint16_t ui16) { return TU_U16_LOW(ui16); }
 198:lib/TinyUSB/src/common/tusb_common.h **** 
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 13


 199:lib/TinyUSB/src/common/tusb_common.h **** //------------- Bits -------------//
 200:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_bit_set  (uint32_t value, uint8_t pos) { return val
 201:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_bit_clear(uint32_t value, uint8_t pos) { return val
 202:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline bool     tu_bit_test (uint32_t value, uint8_t pos) { return (va
 203:lib/TinyUSB/src/common/tusb_common.h **** 
 204:lib/TinyUSB/src/common/tusb_common.h **** //------------- Min -------------//
 205:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t  tu_min8  (uint8_t  x, uint8_t y ) { return (x < y) ? x
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_min16 (uint16_t x, uint16_t y) { return (x < y) ? x
 207:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 208:lib/TinyUSB/src/common/tusb_common.h **** 
 209:lib/TinyUSB/src/common/tusb_common.h **** //------------- Max -------------//
 210:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t  tu_max8  (uint8_t  x, uint8_t y ) { return (x > y) ? x
 211:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_max16 (uint16_t x, uint16_t y) { return (x > y) ? x
 212:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_max32 (uint32_t x, uint32_t y) { return (x > y) ? x
 213:lib/TinyUSB/src/common/tusb_common.h **** 
 214:lib/TinyUSB/src/common/tusb_common.h **** //------------- Align -------------//
 215:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_align(uint32_t value, uint32_t alignment) {
 216:lib/TinyUSB/src/common/tusb_common.h ****   return value & ((uint32_t) ~(alignment-1));
 217:lib/TinyUSB/src/common/tusb_common.h **** }
 218:lib/TinyUSB/src/common/tusb_common.h **** 
 219:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_align4  (uint32_t value) { return (value & 0xFFFFFF
 220:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_align8  (uint32_t value) { return (value & 0xFFFFFF
 221:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_align16 (uint32_t value) { return (value & 0xFFFFFF
 222:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_align32 (uint32_t value) { return (value & 0xFFFFFF
 223:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_align4k (uint32_t value) { return (value & 0xFFFFF0
 224:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_offset4k(uint32_t value) { return (value & 0xFFFUL)
 225:lib/TinyUSB/src/common/tusb_common.h **** 
 226:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline bool tu_is_aligned32(uint32_t value) { return (value & 0x1FUL) 
 227:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline bool tu_is_aligned64(uint64_t value) { return (value & 0x3FUL) 
 228:lib/TinyUSB/src/common/tusb_common.h **** 
 229:lib/TinyUSB/src/common/tusb_common.h **** //------------- Mathematics -------------//
 230:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_div_ceil(uint32_t v, uint32_t d) { return TU_DIV_CE
 231:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_div_round_nearest(uint32_t v, uint32_t d) { return 
 232:lib/TinyUSB/src/common/tusb_common.h **** 
 233:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_round_up(uint32_t v, uint32_t f) { return tu_div_ce
 234:lib/TinyUSB/src/common/tusb_common.h **** 
 235:lib/TinyUSB/src/common/tusb_common.h **** // log2 of a value is its MSB's position
 236:lib/TinyUSB/src/common/tusb_common.h **** // TODO use clz TODO remove
 237:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint8_t tu_log2(uint32_t value) {
 238:lib/TinyUSB/src/common/tusb_common.h ****   uint8_t result = 0;
 239:lib/TinyUSB/src/common/tusb_common.h ****   while ((value >>= 1u) != 0u) {
 240:lib/TinyUSB/src/common/tusb_common.h ****     result++;
 241:lib/TinyUSB/src/common/tusb_common.h ****   }
 242:lib/TinyUSB/src/common/tusb_common.h ****   return result;
 243:lib/TinyUSB/src/common/tusb_common.h **** }
 244:lib/TinyUSB/src/common/tusb_common.h **** 
 245:lib/TinyUSB/src/common/tusb_common.h **** //static inline uint8_t tu_log2(uint32_t value)
 246:lib/TinyUSB/src/common/tusb_common.h **** //{
 247:lib/TinyUSB/src/common/tusb_common.h **** //   return sizeof(uint32_t) * CHAR_BIT - __builtin_clz(x) - 1;
 248:lib/TinyUSB/src/common/tusb_common.h **** //}
 249:lib/TinyUSB/src/common/tusb_common.h **** 
 250:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline bool tu_is_power_of_two(uint32_t value) {
 251:lib/TinyUSB/src/common/tusb_common.h ****    return (value != 0) && ((value & (value - 1)) == 0);
 252:lib/TinyUSB/src/common/tusb_common.h **** }
 253:lib/TinyUSB/src/common/tusb_common.h **** 
 254:lib/TinyUSB/src/common/tusb_common.h **** //------------- Unaligned Access -------------//
 255:lib/TinyUSB/src/common/tusb_common.h **** #if TUP_ARCH_STRICT_ALIGN
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 14


 256:lib/TinyUSB/src/common/tusb_common.h **** 
 257:lib/TinyUSB/src/common/tusb_common.h **** // Rely on compiler to generate correct code for unaligned access
 258:lib/TinyUSB/src/common/tusb_common.h **** typedef struct { uint16_t val; } TU_ATTR_PACKED tu_unaligned_uint16_t;
 259:lib/TinyUSB/src/common/tusb_common.h **** typedef struct { uint32_t val; } TU_ATTR_PACKED tu_unaligned_uint32_t;
 260:lib/TinyUSB/src/common/tusb_common.h **** 
 261:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_unaligned_read32(const void *mem) {
 262:lib/TinyUSB/src/common/tusb_common.h ****   tu_unaligned_uint32_t const *ua32 = (tu_unaligned_uint32_t const *) mem;
 263:lib/TinyUSB/src/common/tusb_common.h ****   return ua32->val;
 264:lib/TinyUSB/src/common/tusb_common.h **** }
 265:lib/TinyUSB/src/common/tusb_common.h **** 
 266:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline void tu_unaligned_write32(void *mem, uint32_t value) {
 267:lib/TinyUSB/src/common/tusb_common.h ****   tu_unaligned_uint32_t *ua32 = (tu_unaligned_uint32_t *) mem;
 268:lib/TinyUSB/src/common/tusb_common.h ****   ua32->val = value;
 269:lib/TinyUSB/src/common/tusb_common.h **** }
 270:lib/TinyUSB/src/common/tusb_common.h **** 
 271:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_unaligned_read16(const void *mem) {
 272:lib/TinyUSB/src/common/tusb_common.h ****   tu_unaligned_uint16_t const *ua16 = (tu_unaligned_uint16_t const *) mem;
 273:lib/TinyUSB/src/common/tusb_common.h ****   return ua16->val;
 274:lib/TinyUSB/src/common/tusb_common.h **** }
 275:lib/TinyUSB/src/common/tusb_common.h **** 
 276:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline void tu_unaligned_write16(void *mem, uint16_t value) {
 277:lib/TinyUSB/src/common/tusb_common.h ****   tu_unaligned_uint16_t *ua16 = (tu_unaligned_uint16_t *) mem;
 278:lib/TinyUSB/src/common/tusb_common.h ****   ua16->val = value;
 279:lib/TinyUSB/src/common/tusb_common.h **** }
 280:lib/TinyUSB/src/common/tusb_common.h **** 
 281:lib/TinyUSB/src/common/tusb_common.h **** #elif TUP_MCU_STRICT_ALIGN
 282:lib/TinyUSB/src/common/tusb_common.h **** 
 283:lib/TinyUSB/src/common/tusb_common.h **** // MCU such as LPC_IP3511 Highspeed cannot access unaligned memory on USB_RAM although it is ARM M4
 284:lib/TinyUSB/src/common/tusb_common.h **** // We have to manually pick up bytes since tu_unaligned_uint32_t will still generate unaligned code
 285:lib/TinyUSB/src/common/tusb_common.h **** // NOTE: volatile cast to memory to prevent compiler to optimize and generate unaligned code
 286:lib/TinyUSB/src/common/tusb_common.h **** // TODO Big Endian may need minor changes
 287:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_unaligned_read32(const void* mem) {
 288:lib/TinyUSB/src/common/tusb_common.h ****   volatile uint8_t const* buf8 = (uint8_t const*) mem;
 289:lib/TinyUSB/src/common/tusb_common.h ****   return tu_u32(buf8[3], buf8[2], buf8[1], buf8[0]);
 290:lib/TinyUSB/src/common/tusb_common.h **** }
 291:lib/TinyUSB/src/common/tusb_common.h **** 
 292:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline void tu_unaligned_write32(void* mem, uint32_t value) {
 293:lib/TinyUSB/src/common/tusb_common.h ****   volatile uint8_t* buf8 = (uint8_t*) mem;
 294:lib/TinyUSB/src/common/tusb_common.h ****   buf8[0] = tu_u32_byte0(value);
 295:lib/TinyUSB/src/common/tusb_common.h ****   buf8[1] = tu_u32_byte1(value);
 296:lib/TinyUSB/src/common/tusb_common.h ****   buf8[2] = tu_u32_byte2(value);
 297:lib/TinyUSB/src/common/tusb_common.h ****   buf8[3] = tu_u32_byte3(value);
 298:lib/TinyUSB/src/common/tusb_common.h **** }
 299:lib/TinyUSB/src/common/tusb_common.h **** 
 300:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_unaligned_read16(const void* mem) {
 301:lib/TinyUSB/src/common/tusb_common.h ****   volatile uint8_t const* buf8 = (uint8_t const*) mem;
 302:lib/TinyUSB/src/common/tusb_common.h ****   return tu_u16(buf8[1], buf8[0]);
 303:lib/TinyUSB/src/common/tusb_common.h **** }
 304:lib/TinyUSB/src/common/tusb_common.h **** 
 305:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline void tu_unaligned_write16(void* mem, uint16_t value) {
 306:lib/TinyUSB/src/common/tusb_common.h ****   volatile uint8_t* buf8 = (uint8_t*) mem;
 307:lib/TinyUSB/src/common/tusb_common.h ****   buf8[0] = tu_u16_low(value);
 308:lib/TinyUSB/src/common/tusb_common.h ****   buf8[1] = tu_u16_high(value);
 309:lib/TinyUSB/src/common/tusb_common.h **** }
 310:lib/TinyUSB/src/common/tusb_common.h **** 
 311:lib/TinyUSB/src/common/tusb_common.h **** #else
 312:lib/TinyUSB/src/common/tusb_common.h **** 
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 15


 313:lib/TinyUSB/src/common/tusb_common.h **** // MCU that could access unaligned memory natively
 314:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_unaligned_read32(const void *mem) {
 156              		.loc 2 314 46 view .LVU37
 157              	.LBB87:
 315:lib/TinyUSB/src/common/tusb_common.h ****   return *((uint32_t const *) mem);
 158              		.loc 2 315 3 view .LVU38
 159              		.loc 2 315 10 is_stmt 0 view .LVU39
 160 000a 51F8044B 		ldr	r4, [r1], #4
 161              	.LVL13:
 162              		.loc 2 315 10 view .LVU40
 163              	.LBE87:
 164              	.LBE86:
 141:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_buf += 4u;
 165              		.loc 1 141 13 view .LVU41
 166 000e 2C60     		str	r4, [r5]
 142:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 167              		.loc 1 142 5 is_stmt 1 view .LVU42
 168              	.LVL14:
 140:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tu_unaligned_read32(ff_buf);
 169              		.loc 1 140 20 is_stmt 0 view .LVU43
 170 0010 1C46     		mov	r4, r3
 171              	.LVL15:
 172              	.L8:
 140:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tu_unaligned_read32(ff_buf);
 173              		.loc 1 140 9 is_stmt 1 view .LVU44
 140:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tu_unaligned_read32(ff_buf);
 174              		.loc 1 140 20 is_stmt 0 view .LVU45
 175 0012 631E     		subs	r3, r4, #1
 176 0014 9BB2     		uxth	r3, r3
 177              	.LVL16:
 140:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tu_unaligned_read32(ff_buf);
 178              		.loc 1 140 9 view .LVU46
 179 0016 002C     		cmp	r4, #0
 180 0018 F7D1     		bne	.L9
 146:lib/TinyUSB/src/common/tusb_fifo.c ****   if (bytes_rem) {
 181              		.loc 1 146 3 is_stmt 1 view .LVU47
 182              	.LVL17:
 147:lib/TinyUSB/src/common/tusb_fifo.c ****     uint32_t tmp32 = 0u;
 183              		.loc 1 147 3 view .LVU48
 147:lib/TinyUSB/src/common/tusb_fifo.c ****     uint32_t tmp32 = 0u;
 184              		.loc 1 147 6 is_stmt 0 view .LVU49
 185 001a 12F00302 		ands	r2, r2, #3
 186              	.LVL18:
 147:lib/TinyUSB/src/common/tusb_fifo.c ****     uint32_t tmp32 = 0u;
 187              		.loc 1 147 6 view .LVU50
 188 001e 01D1     		bne	.L12
 189              	.LVL19:
 190              	.L7:
 152:lib/TinyUSB/src/common/tusb_fifo.c **** #endif
 191              		.loc 1 152 1 view .LVU51
 192 0020 03B0     		add	sp, sp, #12
 193              	.LCFI2:
 194              		.cfi_remember_state
 195              		.cfi_def_cfa_offset 12
 196              		@ sp needed
 197 0022 30BD     		pop	{r4, r5, pc}
 198              	.LVL20:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 16


 199              	.L12:
 200              	.LCFI3:
 201              		.cfi_restore_state
 202              	.LBB88:
 148:lib/TinyUSB/src/common/tusb_fifo.c ****     memcpy(&tmp32, ff_buf, bytes_rem);
 203              		.loc 1 148 5 is_stmt 1 view .LVU52
 148:lib/TinyUSB/src/common/tusb_fifo.c ****     memcpy(&tmp32, ff_buf, bytes_rem);
 204              		.loc 1 148 14 is_stmt 0 view .LVU53
 205 0024 0023     		movs	r3, #0
 206              	.LVL21:
 148:lib/TinyUSB/src/common/tusb_fifo.c ****     memcpy(&tmp32, ff_buf, bytes_rem);
 207              		.loc 1 148 14 view .LVU54
 208 0026 0193     		str	r3, [sp, #4]
 149:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tmp32;
 209              		.loc 1 149 5 is_stmt 1 view .LVU55
 210 0028 01A8     		add	r0, sp, #4
 211              	.LVL22:
 149:lib/TinyUSB/src/common/tusb_fifo.c ****     *reg_tx = tmp32;
 212              		.loc 1 149 5 is_stmt 0 view .LVU56
 213 002a FFF7FEFF 		bl	memcpy
 214              	.LVL23:
 150:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 215              		.loc 1 150 5 is_stmt 1 view .LVU57
 150:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 216              		.loc 1 150 13 is_stmt 0 view .LVU58
 217 002e 019B     		ldr	r3, [sp, #4]
 218 0030 2B60     		str	r3, [r5]
 219              	.LBE88:
 152:lib/TinyUSB/src/common/tusb_fifo.c **** #endif
 220              		.loc 1 152 1 view .LVU59
 221 0032 F5E7     		b	.L7
 222              		.cfi_endproc
 223              	.LFE79:
 225              		.section	.text.ff_pull_n,"ax",%progbits
 226              		.align	1
 227              		.syntax unified
 228              		.thumb
 229              		.thumb_func
 231              	ff_pull_n:
 232              	.LVL24:
 233              	.LFB81:
 221:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t lin_count  = f->depth - rd_ptr;
 234              		.loc 1 221 120 is_stmt 1 view -0
 235              		.cfi_startproc
 236              		@ args = 4, pretend = 0, frame = 0
 237              		@ frame_needed = 0, uses_anonymous_args = 0
 221:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t lin_count  = f->depth - rd_ptr;
 238              		.loc 1 221 120 is_stmt 0 view .LVU61
 239 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 240              	.LCFI4:
 241              		.cfi_def_cfa_offset 32
 242              		.cfi_offset 4, -32
 243              		.cfi_offset 5, -28
 244              		.cfi_offset 6, -24
 245              		.cfi_offset 7, -20
 246              		.cfi_offset 8, -16
 247              		.cfi_offset 9, -12
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 17


 248              		.cfi_offset 10, -8
 249              		.cfi_offset 14, -4
 250 0004 0546     		mov	r5, r0
 251 0006 0E46     		mov	r6, r1
 252 0008 9DF82010 		ldrb	r1, [sp, #32]	@ zero_extendqisi2
 253              	.LVL25:
 222:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t wrap_count = n - lin_count; // only used if wrapped
 254              		.loc 1 222 3 is_stmt 1 view .LVU62
 222:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t wrap_count = n - lin_count; // only used if wrapped
 255              		.loc 1 222 32 is_stmt 0 view .LVU63
 256 000c B0F804C0 		ldrh	ip, [r0, #4]
 222:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t wrap_count = n - lin_count; // only used if wrapped
 257              		.loc 1 222 18 view .LVU64
 258 0010 ACEB0308 		sub	r8, ip, r3
 259 0014 1FFA88F0 		uxth	r0, r8
 260              	.LVL26:
 223:lib/TinyUSB/src/common/tusb_fifo.c **** 
 261              		.loc 1 223 3 is_stmt 1 view .LVU65
 223:lib/TinyUSB/src/common/tusb_fifo.c **** 
 262              		.loc 1 223 18 is_stmt 0 view .LVU66
 263 0018 A3EB0C0C 		sub	ip, r3, ip
 264 001c 9444     		add	ip, ip, r2
 265              	.LVL27:
 225:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wrap_bytes = wrap_count * f->item_size;
 266              		.loc 1 225 3 is_stmt 1 view .LVU67
 225:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wrap_bytes = wrap_count * f->item_size;
 267              		.loc 1 225 38 is_stmt 0 view .LVU68
 268 001e B5F806E0 		ldrh	lr, [r5, #6]
 269 0022 CEF30E09 		ubfx	r9, lr, #0, #15
 225:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wrap_bytes = wrap_count * f->item_size;
 270              		.loc 1 225 12 view .LVU69
 271 0026 18FB09F8 		smulbb	r8, r8, r9
 272 002a 1FFA88F8 		uxth	r8, r8
 273              	.LVL28:
 226:lib/TinyUSB/src/common/tusb_fifo.c **** 
 274              		.loc 1 226 3 is_stmt 1 view .LVU70
 226:lib/TinyUSB/src/common/tusb_fifo.c **** 
 275              		.loc 1 226 12 is_stmt 0 view .LVU71
 276 002e 1CFB09FC 		smulbb	ip, ip, r9
 277              	.LVL29:
 226:lib/TinyUSB/src/common/tusb_fifo.c **** 
 278              		.loc 1 226 12 view .LVU72
 279 0032 1FFA8CF4 		uxth	r4, ip
 280              	.LVL30:
 229:lib/TinyUSB/src/common/tusb_fifo.c **** 
 281              		.loc 1 229 3 is_stmt 1 view .LVU73
 229:lib/TinyUSB/src/common/tusb_fifo.c **** 
 282              		.loc 1 229 28 is_stmt 0 view .LVU74
 283 0036 2F68     		ldr	r7, [r5]
 229:lib/TinyUSB/src/common/tusb_fifo.c **** 
 284              		.loc 1 229 18 view .LVU75
 285 0038 09FB0377 		mla	r7, r9, r3, r7
 286              	.LVL31:
 231:lib/TinyUSB/src/common/tusb_fifo.c ****     case TU_FIFO_INC_ADDR_RW8:
 287              		.loc 1 231 3 is_stmt 1 view .LVU76
 288 003c 19B1     		cbz	r1, .L14
 289 003e 0129     		cmp	r1, #1
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 18


 290 0040 16D0     		beq	.L15
 291              	.LVL32:
 292              	.L13:
 284:lib/TinyUSB/src/common/tusb_fifo.c **** 
 293              		.loc 1 284 1 is_stmt 0 view .LVU77
 294 0042 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 295              	.LVL33:
 296              	.L14:
 233:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 297              		.loc 1 233 7 is_stmt 1 view .LVU78
 233:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 298              		.loc 1 233 10 is_stmt 0 view .LVU79
 299 0046 9042     		cmp	r0, r2
 300 0048 06D3     		bcc	.L17
 235:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 301              		.loc 1 235 9 is_stmt 1 view .LVU80
 302 004a 09FB02F2 		mul	r2, r9, r2
 303              	.LVL34:
 235:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 304              		.loc 1 235 9 is_stmt 0 view .LVU81
 305 004e 3946     		mov	r1, r7
 306 0050 3046     		mov	r0, r6
 307              	.LVL35:
 235:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 308              		.loc 1 235 9 view .LVU82
 309 0052 FFF7FEFF 		bl	memcpy
 310              	.LVL36:
 235:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 311              		.loc 1 235 9 view .LVU83
 312 0056 F4E7     		b	.L13
 313              	.LVL37:
 314              	.L17:
 238:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy((uint8_t *)app_buf + lin_bytes, f->buffer, wrap_bytes); // wrapped part
 315              		.loc 1 238 9 is_stmt 1 view .LVU84
 316 0058 4246     		mov	r2, r8
 317              	.LVL38:
 238:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy((uint8_t *)app_buf + lin_bytes, f->buffer, wrap_bytes); // wrapped part
 318              		.loc 1 238 9 is_stmt 0 view .LVU85
 319 005a 3946     		mov	r1, r7
 320 005c 3046     		mov	r0, r6
 321              	.LVL39:
 238:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy((uint8_t *)app_buf + lin_bytes, f->buffer, wrap_bytes); // wrapped part
 322              		.loc 1 238 9 view .LVU86
 323 005e FFF7FEFF 		bl	memcpy
 324              	.LVL40:
 239:lib/TinyUSB/src/common/tusb_fifo.c ****       }
 325              		.loc 1 239 9 is_stmt 1 view .LVU87
 326 0062 2246     		mov	r2, r4
 327 0064 2968     		ldr	r1, [r5]
 328 0066 06EB0800 		add	r0, r6, r8
 329 006a FFF7FEFF 		bl	memcpy
 330              	.LVL41:
 331 006e E8E7     		b	.L13
 332              	.LVL42:
 333              	.L15:
 334              	.LBB89:
 245:lib/TinyUSB/src/common/tusb_fifo.c **** 
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 19


 335              		.loc 1 245 7 view .LVU88
 247:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 336              		.loc 1 247 7 view .LVU89
 247:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 337              		.loc 1 247 10 is_stmt 0 view .LVU90
 338 0070 9042     		cmp	r0, r2
 339 0072 07D3     		bcc	.L18
 249:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 340              		.loc 1 249 9 is_stmt 1 view .LVU91
 341 0074 19FB02F2 		smulbb	r2, r9, r2
 342              	.LVL43:
 249:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 343              		.loc 1 249 9 is_stmt 0 view .LVU92
 344 0078 92B2     		uxth	r2, r2
 345 007a 3946     		mov	r1, r7
 346 007c 3046     		mov	r0, r6
 347              	.LVL44:
 249:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 348              		.loc 1 249 9 view .LVU93
 349 007e FFF7FEFF 		bl	ff_pull_fixed_addr_rw32
 350              	.LVL45:
 249:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 351              		.loc 1 249 9 view .LVU94
 352 0082 DEE7     		b	.L13
 353              	.LVL46:
 354              	.L18:
 355              	.LBB90:
 254:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_pull_fixed_addr_rw32(reg_tx, ff_buf, lin_4n_bytes);
 356              		.loc 1 254 9 is_stmt 1 view .LVU95
 254:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_pull_fixed_addr_rw32(reg_tx, ff_buf, lin_4n_bytes);
 357              		.loc 1 254 18 is_stmt 0 view .LVU96
 358 0084 28F00309 		bic	r9, r8, #3
 359 0088 1FFA89F9 		uxth	r9, r9
 360              	.LVL47:
 255:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_buf += lin_4n_bytes;
 361              		.loc 1 255 9 is_stmt 1 view .LVU97
 362 008c 4A46     		mov	r2, r9
 363              	.LVL48:
 255:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_buf += lin_4n_bytes;
 364              		.loc 1 255 9 is_stmt 0 view .LVU98
 365 008e 3946     		mov	r1, r7
 366 0090 3046     		mov	r0, r6
 367              	.LVL49:
 255:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_buf += lin_4n_bytes;
 368              		.loc 1 255 9 view .LVU99
 369 0092 FFF7FEFF 		bl	ff_pull_fixed_addr_rw32
 370              	.LVL50:
 256:lib/TinyUSB/src/common/tusb_fifo.c **** 
 371              		.loc 1 256 9 is_stmt 1 view .LVU100
 259:lib/TinyUSB/src/common/tusb_fifo.c ****         if (rem > 0) {
 372              		.loc 1 259 9 view .LVU101
 260:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint8_t  remrem    = (uint8_t)tu_min16(wrap_bytes, 4 - rem);
 373              		.loc 1 260 9 view .LVU102
 260:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint8_t  remrem    = (uint8_t)tu_min16(wrap_bytes, 4 - rem);
 374              		.loc 1 260 12 is_stmt 0 view .LVU103
 375 0096 18F00308 		ands	r8, r8, #3
 376              	.LVL51:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 20


 260:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint8_t  remrem    = (uint8_t)tu_min16(wrap_bytes, 4 - rem);
 377              		.loc 1 260 12 view .LVU104
 378 009a 38D0     		beq	.L19
 379              	.LBB91:
 261:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint32_t scatter32 = tu_scatter_read32(ff_buf, rem, f->buffer, remrem);
 380              		.loc 1 261 11 is_stmt 1 view .LVU105
 261:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint32_t scatter32 = tu_scatter_read32(ff_buf, rem, f->buffer, remrem);
 381              		.loc 1 261 47 is_stmt 0 view .LVU106
 382 009c C8F1040C 		rsb	ip, r8, #4
 383 00a0 1FFA8CFC 		uxth	ip, ip
 384              	.LVL52:
 385              	.LBB92:
 386              	.LBI92:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 387              		.loc 2 206 46 is_stmt 1 view .LVU107
 388              	.LBB93:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 389              		.loc 2 206 82 view .LVU108
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 390              		.loc 2 206 101 is_stmt 0 view .LVU109
 391 00a4 A445     		cmp	ip, r4
 392 00a6 28BF     		it	cs
 393 00a8 A446     		movcs	ip, r4
 394              	.LVL53:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 395              		.loc 2 206 101 view .LVU110
 396              	.LBE93:
 397              	.LBE92:
 261:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint32_t scatter32 = tu_scatter_read32(ff_buf, rem, f->buffer, remrem);
 398              		.loc 1 261 26 view .LVU111
 399 00aa 5FFA8CF1 		uxtb	r1, ip
 400              	.LVL54:
 262:lib/TinyUSB/src/common/tusb_fifo.c **** 
 401              		.loc 1 262 11 is_stmt 1 view .LVU112
 262:lib/TinyUSB/src/common/tusb_fifo.c **** 
 402              		.loc 1 262 70 is_stmt 0 view .LVU113
 403 00ae D5F800E0 		ldr	lr, [r5]
 404              	.LVL55:
 405              	.LBB94:
 406              	.LBI94:
 316:lib/TinyUSB/src/common/tusb_common.h **** }
 317:lib/TinyUSB/src/common/tusb_common.h **** 
 318:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_unaligned_read16(const void *mem) {
 319:lib/TinyUSB/src/common/tusb_common.h ****   return *((uint16_t const *) mem);
 320:lib/TinyUSB/src/common/tusb_common.h **** }
 321:lib/TinyUSB/src/common/tusb_common.h **** 
 322:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline void tu_unaligned_write32(void *mem, uint32_t value) {
 323:lib/TinyUSB/src/common/tusb_common.h ****   *((uint32_t *) mem) = value;
 324:lib/TinyUSB/src/common/tusb_common.h **** }
 325:lib/TinyUSB/src/common/tusb_common.h **** 
 326:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline void tu_unaligned_write16(void *mem, uint16_t value) {
 327:lib/TinyUSB/src/common/tusb_common.h ****   *((uint16_t *) mem) = value;
 328:lib/TinyUSB/src/common/tusb_common.h **** }
 329:lib/TinyUSB/src/common/tusb_common.h **** 
 330:lib/TinyUSB/src/common/tusb_common.h **** #endif
 331:lib/TinyUSB/src/common/tusb_common.h **** 
 332:lib/TinyUSB/src/common/tusb_common.h **** // scatter read 4 bytes from two buffers. Parameter are not checked
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 21


 333:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_scatter_read32(const uint8_t *buf1, uint8_t len1, c
 407              		.loc 2 333 46 is_stmt 1 view .LVU114
 408              	.LBB95:
 409              	.LBB96:
 334:lib/TinyUSB/src/common/tusb_common.h ****                                                                uint8_t len2) {
 335:lib/TinyUSB/src/common/tusb_common.h ****   uint32_t result = 0;
 336:lib/TinyUSB/src/common/tusb_common.h ****   uint8_t  shift  = 0;
 337:lib/TinyUSB/src/common/tusb_common.h **** 
 338:lib/TinyUSB/src/common/tusb_common.h ****   for (uint8_t i = 0; i < len1; ++i) {
 410              		.loc 2 338 16 is_stmt 0 view .LVU115
 411 00b2 0022     		movs	r2, #0
 412              	.LBE96:
 336:lib/TinyUSB/src/common/tusb_common.h **** 
 413              		.loc 2 336 12 view .LVU116
 414 00b4 1346     		mov	r3, r2
 335:lib/TinyUSB/src/common/tusb_common.h ****   uint8_t  shift  = 0;
 415              		.loc 2 335 12 view .LVU117
 416 00b6 1046     		mov	r0, r2
 417 00b8 0BE0     		b	.L20
 418              	.LVL56:
 419              	.L21:
 420              	.LBB97:
 339:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf1[i]) << shift;
 421              		.loc 2 339 5 is_stmt 1 view .LVU118
 422              		.loc 2 339 30 is_stmt 0 view .LVU119
 423 00ba 07EB090A 		add	r10, r7, r9
 424 00be 1AF802A0 		ldrb	r10, [r10, r2]	@ zero_extendqisi2
 425              		.loc 2 339 35 view .LVU120
 426 00c2 0AFA03FA 		lsl	r10, r10, r3
 427              		.loc 2 339 12 view .LVU121
 428 00c6 40EA0A00 		orr	r0, r0, r10
 429              	.LVL57:
 340:lib/TinyUSB/src/common/tusb_common.h ****     shift += 8;
 430              		.loc 2 340 5 is_stmt 1 view .LVU122
 431              		.loc 2 340 11 is_stmt 0 view .LVU123
 432 00ca 0833     		adds	r3, r3, #8
 433              	.LVL58:
 434              		.loc 2 340 11 view .LVU124
 435 00cc DBB2     		uxtb	r3, r3
 436              	.LVL59:
 338:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf1[i]) << shift;
 437              		.loc 2 338 33 is_stmt 1 view .LVU125
 438 00ce 0132     		adds	r2, r2, #1
 439              	.LVL60:
 338:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf1[i]) << shift;
 440              		.loc 2 338 33 is_stmt 0 view .LVU126
 441 00d0 D2B2     		uxtb	r2, r2
 442              	.LVL61:
 443              	.L20:
 338:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf1[i]) << shift;
 444              		.loc 2 338 23 is_stmt 1 view .LVU127
 338:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf1[i]) << shift;
 445              		.loc 2 338 3 is_stmt 0 view .LVU128
 446 00d2 9045     		cmp	r8, r2
 447 00d4 F1D8     		bhi	.L21
 448              	.LBE97:
 449              	.LBB98:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 22


 341:lib/TinyUSB/src/common/tusb_common.h ****   }
 342:lib/TinyUSB/src/common/tusb_common.h **** 
 343:lib/TinyUSB/src/common/tusb_common.h ****   for (uint8_t i = 0; i < len2; ++i) {
 450              		.loc 2 343 16 view .LVU129
 451 00d6 0022     		movs	r2, #0
 452              	.LVL62:
 453              		.loc 2 343 16 view .LVU130
 454 00d8 07E0     		b	.L22
 455              	.LVL63:
 456              	.L23:
 344:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf2[i]) << shift;
 457              		.loc 2 344 5 is_stmt 1 view .LVU131
 458              		.loc 2 344 30 is_stmt 0 view .LVU132
 459 00da 1EF80270 		ldrb	r7, [lr, r2]	@ zero_extendqisi2
 460              		.loc 2 344 35 view .LVU133
 461 00de 9F40     		lsls	r7, r7, r3
 462              		.loc 2 344 12 view .LVU134
 463 00e0 3843     		orrs	r0, r0, r7
 464              	.LVL64:
 345:lib/TinyUSB/src/common/tusb_common.h ****     shift += 8;
 465              		.loc 2 345 5 is_stmt 1 view .LVU135
 466              		.loc 2 345 11 is_stmt 0 view .LVU136
 467 00e2 0833     		adds	r3, r3, #8
 468              	.LVL65:
 469              		.loc 2 345 11 view .LVU137
 470 00e4 DBB2     		uxtb	r3, r3
 471              	.LVL66:
 343:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf2[i]) << shift;
 472              		.loc 2 343 33 is_stmt 1 view .LVU138
 473 00e6 0132     		adds	r2, r2, #1
 474              	.LVL67:
 343:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf2[i]) << shift;
 475              		.loc 2 343 33 is_stmt 0 view .LVU139
 476 00e8 D2B2     		uxtb	r2, r2
 477              	.LVL68:
 478              	.L22:
 343:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf2[i]) << shift;
 479              		.loc 2 343 23 is_stmt 1 view .LVU140
 343:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf2[i]) << shift;
 480              		.loc 2 343 3 is_stmt 0 view .LVU141
 481 00ea 9142     		cmp	r1, r2
 482 00ec F5D8     		bhi	.L23
 343:lib/TinyUSB/src/common/tusb_common.h ****     result |= ((uint32_t)buf2[i]) << shift;
 483              		.loc 2 343 3 view .LVU142
 484              	.LBE98:
 346:lib/TinyUSB/src/common/tusb_common.h ****   }
 347:lib/TinyUSB/src/common/tusb_common.h **** 
 348:lib/TinyUSB/src/common/tusb_common.h ****   return result;
 485              		.loc 2 348 3 is_stmt 1 view .LVU143
 486              	.LVL69:
 487              		.loc 2 348 3 is_stmt 0 view .LVU144
 488              	.LBE95:
 489              	.LBE94:
 264:lib/TinyUSB/src/common/tusb_fifo.c **** 
 490              		.loc 1 264 11 is_stmt 1 view .LVU145
 264:lib/TinyUSB/src/common/tusb_fifo.c **** 
 491              		.loc 1 264 19 is_stmt 0 view .LVU146
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 23


 492 00ee 3060     		str	r0, [r6]
 266:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_buf = f->buffer + remrem; // wrap around
 493              		.loc 1 266 11 is_stmt 1 view .LVU147
 266:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_buf = f->buffer + remrem; // wrap around
 494              		.loc 1 266 22 is_stmt 0 view .LVU148
 495 00f0 5FFA8CFC 		uxtb	ip, ip
 496 00f4 A4EB0C0C 		sub	ip, r4, ip
 497 00f8 1FFA8CF4 		uxth	r4, ip
 498              	.LVL70:
 267:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 499              		.loc 1 267 11 is_stmt 1 view .LVU149
 267:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 500              		.loc 1 267 21 is_stmt 0 view .LVU150
 501 00fc 2B68     		ldr	r3, [r5]
 267:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 502              		.loc 1 267 18 view .LVU151
 503 00fe 1944     		add	r1, r1, r3
 504              	.LVL71:
 505              	.L24:
 267:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 506              		.loc 1 267 18 view .LVU152
 507              	.LBE91:
 273:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_pull_fixed_addr_rw32(reg_tx, ff_buf, wrap_bytes);
 508              		.loc 1 273 9 is_stmt 1 view .LVU153
 273:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_pull_fixed_addr_rw32(reg_tx, ff_buf, wrap_bytes);
 509              		.loc 1 273 12 is_stmt 0 view .LVU154
 510 0100 002C     		cmp	r4, #0
 511 0102 9ED0     		beq	.L13
 274:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 512              		.loc 1 274 11 is_stmt 1 view .LVU155
 513 0104 2246     		mov	r2, r4
 514 0106 3046     		mov	r0, r6
 515 0108 FFF7FEFF 		bl	ff_pull_fixed_addr_rw32
 516              	.LVL72:
 274:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 517              		.loc 1 274 11 is_stmt 0 view .LVU156
 518              	.LBE90:
 519              	.LBE89:
 284:lib/TinyUSB/src/common/tusb_fifo.c **** 
 520              		.loc 1 284 1 view .LVU157
 521 010c 99E7     		b	.L13
 522              	.LVL73:
 523              	.L19:
 524              	.LBB100:
 525              	.LBB99:
 269:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 526              		.loc 1 269 11 is_stmt 1 view .LVU158
 269:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 527              		.loc 1 269 18 is_stmt 0 view .LVU159
 528 010e 2968     		ldr	r1, [r5]
 529              	.LVL74:
 269:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 530              		.loc 1 269 18 view .LVU160
 531 0110 F6E7     		b	.L24
 532              	.LBE99:
 533              	.LBE100:
 534              		.cfi_endproc
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 24


 535              	.LFE81:
 537              		.section	.text.ff_push_fixed_addr_rw32,"ax",%progbits
 538              		.align	1
 539              		.syntax unified
 540              		.thumb
 541              		.thumb_func
 543              	ff_push_fixed_addr_rw32:
 544              	.LVL75:
 545              	.LFB78:
 119:lib/TinyUSB/src/common/tusb_fifo.c ****   // Reading full available 32 bit words from const app address
 546              		.loc 1 119 101 is_stmt 1 view -0
 547              		.cfi_startproc
 548              		@ args = 0, pretend = 0, frame = 8
 549              		@ frame_needed = 0, uses_anonymous_args = 0
 119:lib/TinyUSB/src/common/tusb_fifo.c ****   // Reading full available 32 bit words from const app address
 550              		.loc 1 119 101 is_stmt 0 view .LVU162
 551 0000 10B5     		push	{r4, lr}
 552              	.LCFI5:
 553              		.cfi_def_cfa_offset 8
 554              		.cfi_offset 4, -8
 555              		.cfi_offset 14, -4
 556 0002 82B0     		sub	sp, sp, #8
 557              	.LCFI6:
 558              		.cfi_def_cfa_offset 16
 121:lib/TinyUSB/src/common/tusb_fifo.c ****   while (full_words--) {
 559              		.loc 1 121 3 is_stmt 1 view .LVU163
 121:lib/TinyUSB/src/common/tusb_fifo.c ****   while (full_words--) {
 560              		.loc 1 121 12 is_stmt 0 view .LVU164
 561 0004 9408     		lsrs	r4, r2, #2
 562              	.LVL76:
 122:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 563              		.loc 1 122 3 is_stmt 1 view .LVU165
 122:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 564              		.loc 1 122 9 is_stmt 0 view .LVU166
 565 0006 03E0     		b	.L27
 566              	.LVL77:
 567              	.L28:
 568              	.LBB101:
 123:lib/TinyUSB/src/common/tusb_fifo.c ****     tu_unaligned_write32(ff_buf, tmp32);
 569              		.loc 1 123 5 is_stmt 1 view .LVU167
 123:lib/TinyUSB/src/common/tusb_fifo.c ****     tu_unaligned_write32(ff_buf, tmp32);
 570              		.loc 1 123 20 is_stmt 0 view .LVU168
 571 0008 0C68     		ldr	r4, [r1]
 572              	.LVL78:
 124:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_buf += 4;
 573              		.loc 1 124 5 is_stmt 1 view .LVU169
 574              	.LBB102:
 575              	.LBI102:
 322:lib/TinyUSB/src/common/tusb_common.h ****   *((uint32_t *) mem) = value;
 576              		.loc 2 322 42 view .LVU170
 577              	.LBB103:
 323:lib/TinyUSB/src/common/tusb_common.h **** }
 578              		.loc 2 323 3 view .LVU171
 323:lib/TinyUSB/src/common/tusb_common.h **** }
 579              		.loc 2 323 23 is_stmt 0 view .LVU172
 580 000a 40F8044B 		str	r4, [r0], #4
 581              	.LVL79:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 25


 323:lib/TinyUSB/src/common/tusb_common.h **** }
 582              		.loc 2 323 23 view .LVU173
 583              	.LBE103:
 584              	.LBE102:
 125:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 585              		.loc 1 125 5 is_stmt 1 view .LVU174
 125:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 586              		.loc 1 125 5 is_stmt 0 view .LVU175
 587              	.LBE101:
 122:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 588              		.loc 1 122 20 view .LVU176
 589 000e 1C46     		mov	r4, r3
 590              	.LVL80:
 591              	.L27:
 122:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 592              		.loc 1 122 9 is_stmt 1 view .LVU177
 122:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 593              		.loc 1 122 20 is_stmt 0 view .LVU178
 594 0010 631E     		subs	r3, r4, #1
 595 0012 9BB2     		uxth	r3, r3
 596              	.LVL81:
 122:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 597              		.loc 1 122 9 view .LVU179
 598 0014 002C     		cmp	r4, #0
 599 0016 F7D1     		bne	.L28
 129:lib/TinyUSB/src/common/tusb_fifo.c ****   if (bytes_rem) {
 600              		.loc 1 129 3 is_stmt 1 view .LVU180
 601              	.LVL82:
 130:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 602              		.loc 1 130 3 view .LVU181
 130:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 603              		.loc 1 130 6 is_stmt 0 view .LVU182
 604 0018 12F00302 		ands	r2, r2, #3
 605              	.LVL83:
 130:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint32_t tmp32 = *reg_rx;
 606              		.loc 1 130 6 view .LVU183
 607 001c 01D1     		bne	.L31
 608              	.LVL84:
 609              	.L26:
 134:lib/TinyUSB/src/common/tusb_fifo.c **** 
 610              		.loc 1 134 1 view .LVU184
 611 001e 02B0     		add	sp, sp, #8
 612              	.LCFI7:
 613              		.cfi_remember_state
 614              		.cfi_def_cfa_offset 8
 615              		@ sp needed
 616 0020 10BD     		pop	{r4, pc}
 617              	.LVL85:
 618              	.L31:
 619              	.LCFI8:
 620              		.cfi_restore_state
 621              	.LBB104:
 131:lib/TinyUSB/src/common/tusb_fifo.c ****     memcpy(ff_buf, &tmp32, bytes_rem);
 622              		.loc 1 131 5 is_stmt 1 view .LVU185
 131:lib/TinyUSB/src/common/tusb_fifo.c ****     memcpy(ff_buf, &tmp32, bytes_rem);
 623              		.loc 1 131 28 is_stmt 0 view .LVU186
 624 0022 0B68     		ldr	r3, [r1]
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 26


 625              	.LVL86:
 131:lib/TinyUSB/src/common/tusb_fifo.c ****     memcpy(ff_buf, &tmp32, bytes_rem);
 626              		.loc 1 131 20 view .LVU187
 627 0024 0193     		str	r3, [sp, #4]
 132:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 628              		.loc 1 132 5 is_stmt 1 view .LVU188
 629 0026 01A9     		add	r1, sp, #4
 630              	.LVL87:
 132:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 631              		.loc 1 132 5 is_stmt 0 view .LVU189
 632 0028 FFF7FEFF 		bl	memcpy
 633              	.LVL88:
 132:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 634              		.loc 1 132 5 view .LVU190
 635              	.LBE104:
 134:lib/TinyUSB/src/common/tusb_fifo.c **** 
 636              		.loc 1 134 1 view .LVU191
 637 002c F7E7     		b	.L26
 638              		.cfi_endproc
 639              	.LFE78:
 641              		.section	.text.ff_push_n,"ax",%progbits
 642              		.align	1
 643              		.syntax unified
 644              		.thumb
 645              		.thumb_func
 647              	ff_push_n:
 648              	.LVL89:
 649              	.LFB80:
 157:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t lin_count  = f->depth - wr_ptr;
 650              		.loc 1 157 56 is_stmt 1 view -0
 651              		.cfi_startproc
 652              		@ args = 4, pretend = 0, frame = 0
 653              		@ frame_needed = 0, uses_anonymous_args = 0
 157:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t lin_count  = f->depth - wr_ptr;
 654              		.loc 1 157 56 is_stmt 0 view .LVU193
 655 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 656              	.LCFI9:
 657              		.cfi_def_cfa_offset 32
 658              		.cfi_offset 3, -32
 659              		.cfi_offset 4, -28
 660              		.cfi_offset 5, -24
 661              		.cfi_offset 6, -20
 662              		.cfi_offset 7, -16
 663              		.cfi_offset 8, -12
 664              		.cfi_offset 9, -8
 665              		.cfi_offset 14, -4
 666 0004 0546     		mov	r5, r0
 667 0006 0E46     		mov	r6, r1
 668 0008 9DF82010 		ldrb	r1, [sp, #32]	@ zero_extendqisi2
 669              	.LVL90:
 158:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t wrap_count = n - lin_count;
 670              		.loc 1 158 3 is_stmt 1 view .LVU194
 158:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t wrap_count = n - lin_count;
 671              		.loc 1 158 32 is_stmt 0 view .LVU195
 672 000c B0F804C0 		ldrh	ip, [r0, #4]
 158:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t wrap_count = n - lin_count;
 673              		.loc 1 158 18 view .LVU196
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 27


 674 0010 ACEB0308 		sub	r8, ip, r3
 675 0014 1FFA88F0 		uxth	r0, r8
 676              	.LVL91:
 159:lib/TinyUSB/src/common/tusb_fifo.c **** 
 677              		.loc 1 159 3 is_stmt 1 view .LVU197
 159:lib/TinyUSB/src/common/tusb_fifo.c **** 
 678              		.loc 1 159 18 is_stmt 0 view .LVU198
 679 0018 A3EB0C0C 		sub	ip, r3, ip
 680 001c 9444     		add	ip, ip, r2
 681              	.LVL92:
 161:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wrap_bytes = wrap_count * f->item_size;
 682              		.loc 1 161 3 is_stmt 1 view .LVU199
 161:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wrap_bytes = wrap_count * f->item_size;
 683              		.loc 1 161 38 is_stmt 0 view .LVU200
 684 001e B5F806E0 		ldrh	lr, [r5, #6]
 685 0022 CEF30E09 		ubfx	r9, lr, #0, #15
 161:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wrap_bytes = wrap_count * f->item_size;
 686              		.loc 1 161 12 view .LVU201
 687 0026 18FB09F8 		smulbb	r8, r8, r9
 688 002a 1FFA88F8 		uxth	r8, r8
 689              	.LVL93:
 162:lib/TinyUSB/src/common/tusb_fifo.c **** 
 690              		.loc 1 162 3 is_stmt 1 view .LVU202
 162:lib/TinyUSB/src/common/tusb_fifo.c **** 
 691              		.loc 1 162 12 is_stmt 0 view .LVU203
 692 002e 1CFB09FC 		smulbb	ip, ip, r9
 693              	.LVL94:
 162:lib/TinyUSB/src/common/tusb_fifo.c **** 
 694              		.loc 1 162 12 view .LVU204
 695 0032 1FFA8CF4 		uxth	r4, ip
 696              	.LVL95:
 165:lib/TinyUSB/src/common/tusb_fifo.c **** 
 697              		.loc 1 165 3 is_stmt 1 view .LVU205
 165:lib/TinyUSB/src/common/tusb_fifo.c **** 
 698              		.loc 1 165 22 is_stmt 0 view .LVU206
 699 0036 2F68     		ldr	r7, [r5]
 165:lib/TinyUSB/src/common/tusb_fifo.c **** 
 700              		.loc 1 165 12 view .LVU207
 701 0038 09FB0377 		mla	r7, r9, r3, r7
 702              	.LVL96:
 167:lib/TinyUSB/src/common/tusb_fifo.c ****     case TU_FIFO_INC_ADDR_RW8:
 703              		.loc 1 167 3 is_stmt 1 view .LVU208
 704 003c 19B1     		cbz	r1, .L33
 705 003e 0129     		cmp	r1, #1
 706 0040 16D0     		beq	.L34
 707              	.LVL97:
 708              	.L32:
 218:lib/TinyUSB/src/common/tusb_fifo.c **** 
 709              		.loc 1 218 1 is_stmt 0 view .LVU209
 710 0042 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 711              	.LVL98:
 712              	.L33:
 169:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 713              		.loc 1 169 7 is_stmt 1 view .LVU210
 169:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 714              		.loc 1 169 10 is_stmt 0 view .LVU211
 715 0046 9042     		cmp	r0, r2
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 28


 716 0048 06D3     		bcc	.L36
 171:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 717              		.loc 1 171 9 is_stmt 1 view .LVU212
 718 004a 09FB02F2 		mul	r2, r9, r2
 719              	.LVL99:
 171:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 720              		.loc 1 171 9 is_stmt 0 view .LVU213
 721 004e 3146     		mov	r1, r6
 722 0050 3846     		mov	r0, r7
 723              	.LVL100:
 171:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 724              		.loc 1 171 9 view .LVU214
 725 0052 FFF7FEFF 		bl	memcpy
 726              	.LVL101:
 171:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 727              		.loc 1 171 9 view .LVU215
 728 0056 F4E7     		b	.L32
 729              	.LVL102:
 730              	.L36:
 174:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy(f->buffer, ((const uint8_t *)app_buf) + lin_bytes, wrap_bytes); // wrapped part
 731              		.loc 1 174 9 is_stmt 1 view .LVU216
 732 0058 4246     		mov	r2, r8
 733              	.LVL103:
 174:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy(f->buffer, ((const uint8_t *)app_buf) + lin_bytes, wrap_bytes); // wrapped part
 734              		.loc 1 174 9 is_stmt 0 view .LVU217
 735 005a 3146     		mov	r1, r6
 736 005c 3846     		mov	r0, r7
 737              	.LVL104:
 174:lib/TinyUSB/src/common/tusb_fifo.c ****         memcpy(f->buffer, ((const uint8_t *)app_buf) + lin_bytes, wrap_bytes); // wrapped part
 738              		.loc 1 174 9 view .LVU218
 739 005e FFF7FEFF 		bl	memcpy
 740              	.LVL105:
 175:lib/TinyUSB/src/common/tusb_fifo.c ****       }
 741              		.loc 1 175 9 is_stmt 1 view .LVU219
 742 0062 2246     		mov	r2, r4
 743 0064 06EB0801 		add	r1, r6, r8
 744 0068 2868     		ldr	r0, [r5]
 745 006a FFF7FEFF 		bl	memcpy
 746              	.LVL106:
 747 006e E8E7     		b	.L32
 748              	.LVL107:
 749              	.L34:
 750              	.LBB105:
 181:lib/TinyUSB/src/common/tusb_fifo.c ****       if (n <= lin_count) {
 751              		.loc 1 181 7 view .LVU220
 182:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 752              		.loc 1 182 7 view .LVU221
 182:lib/TinyUSB/src/common/tusb_fifo.c ****         // Linear only
 753              		.loc 1 182 10 is_stmt 0 view .LVU222
 754 0070 9042     		cmp	r0, r2
 755 0072 07D3     		bcc	.L37
 184:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 756              		.loc 1 184 9 is_stmt 1 view .LVU223
 757 0074 19FB02F2 		smulbb	r2, r9, r2
 758              	.LVL108:
 184:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 759              		.loc 1 184 9 is_stmt 0 view .LVU224
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 29


 760 0078 92B2     		uxth	r2, r2
 761 007a 3146     		mov	r1, r6
 762 007c 3846     		mov	r0, r7
 763              	.LVL109:
 184:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 764              		.loc 1 184 9 view .LVU225
 765 007e FFF7FEFF 		bl	ff_push_fixed_addr_rw32
 766              	.LVL110:
 184:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 767              		.loc 1 184 9 view .LVU226
 768 0082 DEE7     		b	.L32
 769              	.LVL111:
 770              	.L37:
 771              	.LBB106:
 189:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_push_fixed_addr_rw32(ff_buf, reg_rx, lin_4n_bytes);
 772              		.loc 1 189 9 is_stmt 1 view .LVU227
 189:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_push_fixed_addr_rw32(ff_buf, reg_rx, lin_4n_bytes);
 773              		.loc 1 189 18 is_stmt 0 view .LVU228
 774 0084 28F00309 		bic	r9, r8, #3
 775 0088 1FFA89F9 		uxth	r9, r9
 776              	.LVL112:
 190:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_buf += lin_4n_bytes;
 777              		.loc 1 190 9 is_stmt 1 view .LVU229
 778 008c 4A46     		mov	r2, r9
 779              	.LVL113:
 190:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_buf += lin_4n_bytes;
 780              		.loc 1 190 9 is_stmt 0 view .LVU230
 781 008e 3146     		mov	r1, r6
 782 0090 3846     		mov	r0, r7
 783              	.LVL114:
 190:lib/TinyUSB/src/common/tusb_fifo.c ****         ff_buf += lin_4n_bytes;
 784              		.loc 1 190 9 view .LVU231
 785 0092 FFF7FEFF 		bl	ff_push_fixed_addr_rw32
 786              	.LVL115:
 191:lib/TinyUSB/src/common/tusb_fifo.c **** 
 787              		.loc 1 191 9 is_stmt 1 view .LVU232
 194:lib/TinyUSB/src/common/tusb_fifo.c ****         if (rem > 0) {
 788              		.loc 1 194 9 view .LVU233
 195:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint8_t  remrem = (uint8_t)tu_min16(wrap_bytes, 4 - rem);
 789              		.loc 1 195 9 view .LVU234
 195:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint8_t  remrem = (uint8_t)tu_min16(wrap_bytes, 4 - rem);
 790              		.loc 1 195 12 is_stmt 0 view .LVU235
 791 0096 18F00308 		ands	r8, r8, #3
 792              	.LVL116:
 195:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint8_t  remrem = (uint8_t)tu_min16(wrap_bytes, 4 - rem);
 793              		.loc 1 195 12 view .LVU236
 794 009a 2DD0     		beq	.L38
 795              	.LBB107:
 196:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint32_t tmp32  = *reg_rx;
 796              		.loc 1 196 11 is_stmt 1 view .LVU237
 196:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint32_t tmp32  = *reg_rx;
 797              		.loc 1 196 44 is_stmt 0 view .LVU238
 798 009c C8F1040C 		rsb	ip, r8, #4
 799 00a0 1FFA8CFC 		uxth	ip, ip
 800              	.LVL117:
 801              	.LBB108:
 802              	.LBI108:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 30


 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 803              		.loc 2 206 46 is_stmt 1 view .LVU239
 804              	.LBB109:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 805              		.loc 2 206 82 view .LVU240
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 806              		.loc 2 206 101 is_stmt 0 view .LVU241
 807 00a4 A445     		cmp	ip, r4
 808 00a6 28BF     		it	cs
 809 00a8 A446     		movcs	ip, r4
 810              	.LVL118:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 811              		.loc 2 206 101 view .LVU242
 812              	.LBE109:
 813              	.LBE108:
 196:lib/TinyUSB/src/common/tusb_fifo.c ****           const uint32_t tmp32  = *reg_rx;
 814              		.loc 1 196 26 view .LVU243
 815 00aa 5FFA8CF0 		uxtb	r0, ip
 816              	.LVL119:
 197:lib/TinyUSB/src/common/tusb_fifo.c ****           tu_scatter_write32(tmp32, ff_buf, rem, f->buffer, remrem);
 817              		.loc 1 197 11 is_stmt 1 view .LVU244
 197:lib/TinyUSB/src/common/tusb_fifo.c ****           tu_scatter_write32(tmp32, ff_buf, rem, f->buffer, remrem);
 818              		.loc 1 197 26 is_stmt 0 view .LVU245
 819 00ae 3268     		ldr	r2, [r6]
 820              	.LVL120:
 198:lib/TinyUSB/src/common/tusb_fifo.c **** 
 821              		.loc 1 198 11 is_stmt 1 view .LVU246
 822 00b0 D5F800E0 		ldr	lr, [r5]
 823              	.LVL121:
 824              	.LBB110:
 825              	.LBI110:
 349:lib/TinyUSB/src/common/tusb_common.h **** }
 350:lib/TinyUSB/src/common/tusb_common.h **** 
 351:lib/TinyUSB/src/common/tusb_common.h **** // scatter write 4 bytes to two buffers. Parameter are not checked
 352:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline void tu_scatter_write32(uint32_t value, uint8_t *buf1, uint8_t 
 826              		.loc 2 352 42 view .LVU247
 827              	.LBB111:
 353:lib/TinyUSB/src/common/tusb_common.h ****                                                             uint8_t *buf2, uint8_t len2) {
 354:lib/TinyUSB/src/common/tusb_common.h ****   for (uint8_t i = 0; i < len1; ++i) {
 828              		.loc 2 354 16 is_stmt 0 view .LVU248
 829 00b4 0023     		movs	r3, #0
 830 00b6 05E0     		b	.L39
 831              	.LVL122:
 832              	.L40:
 355:lib/TinyUSB/src/common/tusb_common.h ****     buf1[i] = (uint8_t)(value & 0xFF);
 833              		.loc 2 355 5 is_stmt 1 view .LVU249
 834              		.loc 2 355 9 is_stmt 0 view .LVU250
 835 00b8 09EB0301 		add	r1, r9, r3
 836              		.loc 2 355 13 view .LVU251
 837 00bc 7A54     		strb	r2, [r7, r1]
 356:lib/TinyUSB/src/common/tusb_common.h ****     value >>= 8;
 838              		.loc 2 356 5 is_stmt 1 view .LVU252
 839              		.loc 2 356 11 is_stmt 0 view .LVU253
 840 00be 120A     		lsrs	r2, r2, #8
 841              	.LVL123:
 354:lib/TinyUSB/src/common/tusb_common.h ****     buf1[i] = (uint8_t)(value & 0xFF);
 842              		.loc 2 354 33 is_stmt 1 view .LVU254
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 31


 843 00c0 0133     		adds	r3, r3, #1
 844              	.LVL124:
 354:lib/TinyUSB/src/common/tusb_common.h ****     buf1[i] = (uint8_t)(value & 0xFF);
 845              		.loc 2 354 33 is_stmt 0 view .LVU255
 846 00c2 DBB2     		uxtb	r3, r3
 847              	.LVL125:
 848              	.L39:
 354:lib/TinyUSB/src/common/tusb_common.h ****     buf1[i] = (uint8_t)(value & 0xFF);
 849              		.loc 2 354 23 is_stmt 1 view .LVU256
 354:lib/TinyUSB/src/common/tusb_common.h ****     buf1[i] = (uint8_t)(value & 0xFF);
 850              		.loc 2 354 3 is_stmt 0 view .LVU257
 851 00c4 9845     		cmp	r8, r3
 852 00c6 F7D8     		bhi	.L40
 354:lib/TinyUSB/src/common/tusb_common.h ****     buf1[i] = (uint8_t)(value & 0xFF);
 853              		.loc 2 354 3 view .LVU258
 854              	.LBE111:
 855              	.LBB112:
 357:lib/TinyUSB/src/common/tusb_common.h ****   }
 358:lib/TinyUSB/src/common/tusb_common.h **** 
 359:lib/TinyUSB/src/common/tusb_common.h ****   for (uint8_t i = 0; i < len2; ++i) {
 856              		.loc 2 359 16 view .LVU259
 857 00c8 0023     		movs	r3, #0
 858              	.LVL126:
 859              		.loc 2 359 16 view .LVU260
 860 00ca 04E0     		b	.L41
 861              	.LVL127:
 862              	.L42:
 360:lib/TinyUSB/src/common/tusb_common.h ****     buf2[i] = (uint8_t)(value & 0xFF);
 863              		.loc 2 360 5 is_stmt 1 view .LVU261
 864              		.loc 2 360 13 is_stmt 0 view .LVU262
 865 00cc 0EF80320 		strb	r2, [lr, r3]
 361:lib/TinyUSB/src/common/tusb_common.h ****     value >>= 8;
 866              		.loc 2 361 5 is_stmt 1 view .LVU263
 867              		.loc 2 361 11 is_stmt 0 view .LVU264
 868 00d0 120A     		lsrs	r2, r2, #8
 869              	.LVL128:
 359:lib/TinyUSB/src/common/tusb_common.h ****     buf2[i] = (uint8_t)(value & 0xFF);
 870              		.loc 2 359 33 is_stmt 1 view .LVU265
 871 00d2 0133     		adds	r3, r3, #1
 872              	.LVL129:
 359:lib/TinyUSB/src/common/tusb_common.h ****     buf2[i] = (uint8_t)(value & 0xFF);
 873              		.loc 2 359 33 is_stmt 0 view .LVU266
 874 00d4 DBB2     		uxtb	r3, r3
 875              	.LVL130:
 876              	.L41:
 359:lib/TinyUSB/src/common/tusb_common.h ****     buf2[i] = (uint8_t)(value & 0xFF);
 877              		.loc 2 359 23 is_stmt 1 view .LVU267
 359:lib/TinyUSB/src/common/tusb_common.h ****     buf2[i] = (uint8_t)(value & 0xFF);
 878              		.loc 2 359 3 is_stmt 0 view .LVU268
 879 00d6 9842     		cmp	r0, r3
 880 00d8 F8D8     		bhi	.L42
 881              	.LVL131:
 359:lib/TinyUSB/src/common/tusb_common.h ****     buf2[i] = (uint8_t)(value & 0xFF);
 882              		.loc 2 359 3 view .LVU269
 883              	.LBE112:
 884              	.LBE110:
 200:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_buf = f->buffer + remrem; // wrap around
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 32


 885              		.loc 1 200 11 is_stmt 1 view .LVU270
 200:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_buf = f->buffer + remrem; // wrap around
 886              		.loc 1 200 22 is_stmt 0 view .LVU271
 887 00da 5FFA8CFC 		uxtb	ip, ip
 888 00de A4EB0C0C 		sub	ip, r4, ip
 889 00e2 1FFA8CF4 		uxth	r4, ip
 890              	.LVL132:
 201:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 891              		.loc 1 201 11 is_stmt 1 view .LVU272
 201:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 892              		.loc 1 201 21 is_stmt 0 view .LVU273
 893 00e6 2B68     		ldr	r3, [r5]
 201:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 894              		.loc 1 201 18 view .LVU274
 895 00e8 1844     		add	r0, r0, r3
 896              	.LVL133:
 897              	.L43:
 201:lib/TinyUSB/src/common/tusb_fifo.c ****         } else {
 898              		.loc 1 201 18 view .LVU275
 899              	.LBE107:
 207:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_push_fixed_addr_rw32(ff_buf, reg_rx, wrap_bytes);
 900              		.loc 1 207 9 is_stmt 1 view .LVU276
 207:lib/TinyUSB/src/common/tusb_fifo.c ****           ff_push_fixed_addr_rw32(ff_buf, reg_rx, wrap_bytes);
 901              		.loc 1 207 12 is_stmt 0 view .LVU277
 902 00ea 002C     		cmp	r4, #0
 903 00ec A9D0     		beq	.L32
 208:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 904              		.loc 1 208 11 is_stmt 1 view .LVU278
 905 00ee 2246     		mov	r2, r4
 906 00f0 3146     		mov	r1, r6
 907 00f2 FFF7FEFF 		bl	ff_push_fixed_addr_rw32
 908              	.LVL134:
 208:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 909              		.loc 1 208 11 is_stmt 0 view .LVU279
 910              	.LBE106:
 911              	.LBE105:
 218:lib/TinyUSB/src/common/tusb_fifo.c **** 
 912              		.loc 1 218 1 view .LVU280
 913 00f6 A4E7     		b	.L32
 914              	.LVL135:
 915              	.L38:
 916              	.LBB114:
 917              	.LBB113:
 203:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 918              		.loc 1 203 11 is_stmt 1 view .LVU281
 203:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 919              		.loc 1 203 18 is_stmt 0 view .LVU282
 920 00f8 2868     		ldr	r0, [r5]
 921              	.LVL136:
 203:lib/TinyUSB/src/common/tusb_fifo.c ****         }
 922              		.loc 1 203 18 view .LVU283
 923 00fa F6E7     		b	.L43
 924              	.LBE113:
 925              	.LBE114:
 926              		.cfi_endproc
 927              	.LFE80:
 929              		.section	.text.ff_peek_local,"ax",%progbits
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 33


 930              		.align	1
 931              		.syntax unified
 932              		.thumb
 933              		.thumb_func
 935              	ff_peek_local:
 936              	.LVL137:
 937              	.LFB90:
 327:lib/TinyUSB/src/common/tusb_fifo.c **** 
 328:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 329:lib/TinyUSB/src/common/tusb_fifo.c **** // n-API
 330:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 331:lib/TinyUSB/src/common/tusb_fifo.c **** 
 332:lib/TinyUSB/src/common/tusb_fifo.c **** // Works on local copies of w and r
 333:lib/TinyUSB/src/common/tusb_fifo.c **** // Must be protected by read mutex since in case of an overflow read pointer gets modified
 334:lib/TinyUSB/src/common/tusb_fifo.c **** uint16_t tu_fifo_peek_n_access_mode(tu_fifo_t *f, void *p_buffer, uint16_t n, uint16_t wr_idx, uint
 335:lib/TinyUSB/src/common/tusb_fifo.c ****                                     tu_fifo_access_mode_t access_mode) {
 336:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t count = tu_ff_overflow_count(f->depth, wr_idx, rd_idx);
 337:lib/TinyUSB/src/common/tusb_fifo.c ****   if (count == 0) {
 338:lib/TinyUSB/src/common/tusb_fifo.c ****     return 0; // nothing to peek
 339:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 340:lib/TinyUSB/src/common/tusb_fifo.c **** 
 341:lib/TinyUSB/src/common/tusb_fifo.c ****   // Check overflow and correct if required
 342:lib/TinyUSB/src/common/tusb_fifo.c ****   if (count > f->depth) {
 343:lib/TinyUSB/src/common/tusb_fifo.c ****     rd_idx = correct_read_index(f, wr_idx);
 344:lib/TinyUSB/src/common/tusb_fifo.c ****     count  = f->depth;
 345:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 346:lib/TinyUSB/src/common/tusb_fifo.c **** 
 347:lib/TinyUSB/src/common/tusb_fifo.c ****   if (count < n) {
 348:lib/TinyUSB/src/common/tusb_fifo.c ****     n = count; // limit to available count
 349:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 350:lib/TinyUSB/src/common/tusb_fifo.c **** 
 351:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t rd_ptr = idx2ptr(f->depth, rd_idx);
 352:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_pull_n(f, p_buffer, n, rd_ptr, access_mode);
 353:lib/TinyUSB/src/common/tusb_fifo.c **** 
 354:lib/TinyUSB/src/common/tusb_fifo.c ****   return n;
 355:lib/TinyUSB/src/common/tusb_fifo.c **** }
 356:lib/TinyUSB/src/common/tusb_fifo.c **** 
 357:lib/TinyUSB/src/common/tusb_fifo.c **** // Read n items without removing it from the FIFO, correct read pointer if overflowed
 358:lib/TinyUSB/src/common/tusb_fifo.c **** uint16_t tu_fifo_peek_n(tu_fifo_t *f, void *p_buffer, uint16_t n) {
 359:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 360:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t ret = tu_fifo_peek_n_access_mode(f, p_buffer, n, f->wr_idx, f->rd_idx, TU_FIFO_INC
 361:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 362:lib/TinyUSB/src/common/tusb_fifo.c ****   return ret;
 363:lib/TinyUSB/src/common/tusb_fifo.c **** }
 364:lib/TinyUSB/src/common/tusb_fifo.c **** 
 365:lib/TinyUSB/src/common/tusb_fifo.c **** // Read n items from fifo with access mode
 366:lib/TinyUSB/src/common/tusb_fifo.c **** uint16_t tu_fifo_read_n_access_mode(tu_fifo_t *f, void *buffer, uint16_t n, tu_fifo_access_mode_t a
 367:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 368:lib/TinyUSB/src/common/tusb_fifo.c **** 
 369:lib/TinyUSB/src/common/tusb_fifo.c ****   // Peek the data: f->rd_idx might get modified in case of an overflow so we can not use a local v
 370:lib/TinyUSB/src/common/tusb_fifo.c ****   n         = tu_fifo_peek_n_access_mode(f, buffer, n, f->wr_idx, f->rd_idx, access_mode);
 371:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = advance_index(f->depth, f->rd_idx, n);
 372:lib/TinyUSB/src/common/tusb_fifo.c **** 
 373:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 374:lib/TinyUSB/src/common/tusb_fifo.c ****   return n;
 375:lib/TinyUSB/src/common/tusb_fifo.c **** }
 376:lib/TinyUSB/src/common/tusb_fifo.c **** 
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 34


 377:lib/TinyUSB/src/common/tusb_fifo.c **** // Write n items to fifo with access mode
 378:lib/TinyUSB/src/common/tusb_fifo.c **** uint16_t tu_fifo_write_n_access_mode(tu_fifo_t *f, const void *data, uint16_t n, tu_fifo_access_mod
 379:lib/TinyUSB/src/common/tusb_fifo.c ****   if (n == 0) {
 380:lib/TinyUSB/src/common/tusb_fifo.c ****     return 0;
 381:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 382:lib/TinyUSB/src/common/tusb_fifo.c **** 
 383:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_wr);
 384:lib/TinyUSB/src/common/tusb_fifo.c **** 
 385:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wr_idx = f->wr_idx;
 386:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t rd_idx = f->rd_idx;
 387:lib/TinyUSB/src/common/tusb_fifo.c **** 
 388:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint8_t *buf8 = (const uint8_t *)data;
 389:lib/TinyUSB/src/common/tusb_fifo.c **** 
 390:lib/TinyUSB/src/common/tusb_fifo.c ****   TU_LOG(TU_FIFO_DBG, "rd = %3u, wr = %3u, count = %3u, remain = %3u, n = %3u:  ", rd_idx, wr_idx,
 391:lib/TinyUSB/src/common/tusb_fifo.c ****          tu_ff_overflow_count(f->depth, wr_idx, rd_idx), tu_ff_remaining_local(f->depth, wr_idx, rd
 392:lib/TinyUSB/src/common/tusb_fifo.c **** 
 393:lib/TinyUSB/src/common/tusb_fifo.c ****   if (!f->overwritable) {
 394:lib/TinyUSB/src/common/tusb_fifo.c ****     // limit up to full
 395:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint16_t remain = tu_ff_remaining_local(f->depth, wr_idx, rd_idx);
 396:lib/TinyUSB/src/common/tusb_fifo.c ****     n                     = tu_min16(n, remain);
 397:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 398:lib/TinyUSB/src/common/tusb_fifo.c ****     // In over-writable mode, fifo_write() is allowed even when fifo is full. In such case,
 399:lib/TinyUSB/src/common/tusb_fifo.c ****     // oldest data in fifo i.e. at read pointer data will be overwritten
 400:lib/TinyUSB/src/common/tusb_fifo.c ****     // Note: we can modify read buffer contents however we must not modify the read index itself wi
 401:lib/TinyUSB/src/common/tusb_fifo.c ****     // function! Since it would end up in a race condition with read functions!
 402:lib/TinyUSB/src/common/tusb_fifo.c ****     if (n >= f->depth) {
 403:lib/TinyUSB/src/common/tusb_fifo.c ****       // Only copy last part
 404:lib/TinyUSB/src/common/tusb_fifo.c ****       if (access_mode == TU_FIFO_INC_ADDR_RW8) {
 405:lib/TinyUSB/src/common/tusb_fifo.c ****         buf8 += (n - f->depth) * f->item_size;
 406:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 407:lib/TinyUSB/src/common/tusb_fifo.c ****         // TODO should read from hw fifo to discard data, however reading an odd number could
 408:lib/TinyUSB/src/common/tusb_fifo.c ****         // accidentally discard data.
 409:lib/TinyUSB/src/common/tusb_fifo.c ****       }
 410:lib/TinyUSB/src/common/tusb_fifo.c **** 
 411:lib/TinyUSB/src/common/tusb_fifo.c ****       n = f->depth;
 412:lib/TinyUSB/src/common/tusb_fifo.c **** 
 413:lib/TinyUSB/src/common/tusb_fifo.c ****       // We start writing at the read pointer's position since we fill the whole buffer
 414:lib/TinyUSB/src/common/tusb_fifo.c ****       wr_idx = rd_idx;
 415:lib/TinyUSB/src/common/tusb_fifo.c ****     } else {
 416:lib/TinyUSB/src/common/tusb_fifo.c ****       const uint16_t overflowable_count = tu_ff_overflow_count(f->depth, wr_idx, rd_idx);
 417:lib/TinyUSB/src/common/tusb_fifo.c ****       if (overflowable_count + n >= 2 * f->depth) {
 418:lib/TinyUSB/src/common/tusb_fifo.c ****         // Double overflowed
 419:lib/TinyUSB/src/common/tusb_fifo.c ****         // Index is bigger than the allowed range [0,2*depth)
 420:lib/TinyUSB/src/common/tusb_fifo.c ****         // re-position write index to have a full fifo after pushed
 421:lib/TinyUSB/src/common/tusb_fifo.c ****         wr_idx = advance_index(f->depth, rd_idx, f->depth - n);
 422:lib/TinyUSB/src/common/tusb_fifo.c **** 
 423:lib/TinyUSB/src/common/tusb_fifo.c ****         // TODO we should also shift out n bytes from read index since we avoid changing rd index !
 424:lib/TinyUSB/src/common/tusb_fifo.c ****         // However memmove() is expensive due to actual copying + wrapping consideration.
 425:lib/TinyUSB/src/common/tusb_fifo.c ****         // Also race condition could happen anyway if read() is invoke while moving result in corru
 426:lib/TinyUSB/src/common/tusb_fifo.c ****         // currently deliberately not implemented --> result in incorrect data read back
 427:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 428:lib/TinyUSB/src/common/tusb_fifo.c ****         // normal + single overflowed:
 429:lib/TinyUSB/src/common/tusb_fifo.c ****         // Index is in the range of [0,2*depth) and thus detect and recoverable. Recovering is hand
 430:lib/TinyUSB/src/common/tusb_fifo.c ****         // Therefore we just increase write index
 431:lib/TinyUSB/src/common/tusb_fifo.c ****         // we will correct (re-position) read index later on in fifo_read() function
 432:lib/TinyUSB/src/common/tusb_fifo.c ****       }
 433:lib/TinyUSB/src/common/tusb_fifo.c ****     }
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 35


 434:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 435:lib/TinyUSB/src/common/tusb_fifo.c **** 
 436:lib/TinyUSB/src/common/tusb_fifo.c ****   if (n) {
 437:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint16_t wr_ptr = idx2ptr(f->depth, wr_idx);
 438:lib/TinyUSB/src/common/tusb_fifo.c ****     TU_LOG(TU_FIFO_DBG, "actual_n = %u, wr_ptr = %u", n, wr_ptr);
 439:lib/TinyUSB/src/common/tusb_fifo.c **** 
 440:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_push_n(f, buf8, n, wr_ptr, access_mode);
 441:lib/TinyUSB/src/common/tusb_fifo.c ****     f->wr_idx = advance_index(f->depth, wr_idx, n);
 442:lib/TinyUSB/src/common/tusb_fifo.c **** 
 443:lib/TinyUSB/src/common/tusb_fifo.c ****     TU_LOG(TU_FIFO_DBG, "\tnew_wr = %u\r\n", f->wr_idx);
 444:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 445:lib/TinyUSB/src/common/tusb_fifo.c **** 
 446:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_wr);
 447:lib/TinyUSB/src/common/tusb_fifo.c **** 
 448:lib/TinyUSB/src/common/tusb_fifo.c ****   return n;
 449:lib/TinyUSB/src/common/tusb_fifo.c **** }
 450:lib/TinyUSB/src/common/tusb_fifo.c **** 
 451:lib/TinyUSB/src/common/tusb_fifo.c **** uint16_t tu_fifo_discard_n(tu_fifo_t *f, uint16_t n) {
 452:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t count = tu_min16(n, tu_fifo_count(f)); // limit to available count
 453:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 454:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = advance_index(f->depth, f->rd_idx, count);
 455:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 456:lib/TinyUSB/src/common/tusb_fifo.c **** 
 457:lib/TinyUSB/src/common/tusb_fifo.c ****   return count;
 458:lib/TinyUSB/src/common/tusb_fifo.c **** }
 459:lib/TinyUSB/src/common/tusb_fifo.c **** 
 460:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 461:lib/TinyUSB/src/common/tusb_fifo.c **** // One API
 462:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 463:lib/TinyUSB/src/common/tusb_fifo.c **** 
 464:lib/TinyUSB/src/common/tusb_fifo.c **** // peek() using local write/read index, correct read index if overflowed
 465:lib/TinyUSB/src/common/tusb_fifo.c **** // Be careful, caller must not lock mutex, since this Will also try to lock mutex
 466:lib/TinyUSB/src/common/tusb_fifo.c **** static bool ff_peek_local(tu_fifo_t *f, void *buf, uint16_t wr_idx, uint16_t rd_idx) {
 938              		.loc 1 466 86 is_stmt 1 view -0
 939              		.cfi_startproc
 940              		@ args = 0, pretend = 0, frame = 0
 941              		@ frame_needed = 0, uses_anonymous_args = 0
 942              		.loc 1 466 86 is_stmt 0 view .LVU285
 943 0000 38B5     		push	{r3, r4, r5, lr}
 944              	.LCFI10:
 945              		.cfi_def_cfa_offset 16
 946              		.cfi_offset 3, -16
 947              		.cfi_offset 4, -12
 948              		.cfi_offset 5, -8
 949              		.cfi_offset 14, -4
 950 0002 0446     		mov	r4, r0
 951 0004 0D46     		mov	r5, r1
 467:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t ovf_count = tu_ff_overflow_count(f->depth, wr_idx, rd_idx);
 952              		.loc 1 467 3 is_stmt 1 view .LVU286
 953              		.loc 1 467 30 is_stmt 0 view .LVU287
 954 0006 8188     		ldrh	r1, [r0, #4]
 955              	.LVL138:
 956              	.LBB115:
 957              	.LBI115:
 958              		.file 3 "lib/TinyUSB/src/common/tusb_fifo.h"
   1:lib/TinyUSB/src/common/tusb_fifo.h **** /*
   2:lib/TinyUSB/src/common/tusb_fifo.h ****  * The MIT License (MIT)
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 36


   3:lib/TinyUSB/src/common/tusb_fifo.h ****  *
   4:lib/TinyUSB/src/common/tusb_fifo.h ****  * Copyright (c) 2019 Ha Thach (tinyusb.org)
   5:lib/TinyUSB/src/common/tusb_fifo.h ****  * Copyright (c) 2020 Reinhard Panhuber - rework to unmasked pointers
   6:lib/TinyUSB/src/common/tusb_fifo.h ****  *
   7:lib/TinyUSB/src/common/tusb_fifo.h ****  * Permission is hereby granted, free of charge, to any person obtaining a copy
   8:lib/TinyUSB/src/common/tusb_fifo.h ****  * of this software and associated documentation files (the "Software"), to deal
   9:lib/TinyUSB/src/common/tusb_fifo.h ****  * in the Software without restriction, including without limitation the rights
  10:lib/TinyUSB/src/common/tusb_fifo.h ****  * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  11:lib/TinyUSB/src/common/tusb_fifo.h ****  * copies of the Software, and to permit persons to whom the Software is
  12:lib/TinyUSB/src/common/tusb_fifo.h ****  * furnished to do so, subject to the following conditions:
  13:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  14:lib/TinyUSB/src/common/tusb_fifo.h ****  * The above copyright notice and this permission notice shall be included in
  15:lib/TinyUSB/src/common/tusb_fifo.h ****  * all copies or substantial portions of the Software.
  16:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  17:lib/TinyUSB/src/common/tusb_fifo.h ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  18:lib/TinyUSB/src/common/tusb_fifo.h ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  19:lib/TinyUSB/src/common/tusb_fifo.h ****  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  20:lib/TinyUSB/src/common/tusb_fifo.h ****  * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  21:lib/TinyUSB/src/common/tusb_fifo.h ****  * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  22:lib/TinyUSB/src/common/tusb_fifo.h ****  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  23:lib/TinyUSB/src/common/tusb_fifo.h ****  * THE SOFTWARE.
  24:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  25:lib/TinyUSB/src/common/tusb_fifo.h ****  * This file is part of the TinyUSB stack.
  26:lib/TinyUSB/src/common/tusb_fifo.h ****  */
  27:lib/TinyUSB/src/common/tusb_fifo.h **** 
  28:lib/TinyUSB/src/common/tusb_fifo.h **** #ifndef TUSB_FIFO_H_
  29:lib/TinyUSB/src/common/tusb_fifo.h **** #define TUSB_FIFO_H_
  30:lib/TinyUSB/src/common/tusb_fifo.h **** 
  31:lib/TinyUSB/src/common/tusb_fifo.h **** #ifdef __cplusplus
  32:lib/TinyUSB/src/common/tusb_fifo.h **** extern "C" {
  33:lib/TinyUSB/src/common/tusb_fifo.h **** #endif
  34:lib/TinyUSB/src/common/tusb_fifo.h **** 
  35:lib/TinyUSB/src/common/tusb_fifo.h **** // Due to the use of unmasked pointers, this FIFO does not suffer from losing
  36:lib/TinyUSB/src/common/tusb_fifo.h **** // one item slice. Furthermore, write and read operations are completely
  37:lib/TinyUSB/src/common/tusb_fifo.h **** // decoupled as write and read functions do not modify a common state. Henceforth,
  38:lib/TinyUSB/src/common/tusb_fifo.h **** // writing or reading from the FIFO within an ISR is safe as long as no other
  39:lib/TinyUSB/src/common/tusb_fifo.h **** // process (thread or ISR) interferes.
  40:lib/TinyUSB/src/common/tusb_fifo.h **** // Also, this FIFO is ready to be used in combination with a DMA as the write and
  41:lib/TinyUSB/src/common/tusb_fifo.h **** // read pointers can be updated from within a DMA ISR. Overflows are detectable
  42:lib/TinyUSB/src/common/tusb_fifo.h **** // within a certain number (see tu_fifo_overflow()).
  43:lib/TinyUSB/src/common/tusb_fifo.h **** 
  44:lib/TinyUSB/src/common/tusb_fifo.h **** #include "common/tusb_common.h"
  45:lib/TinyUSB/src/common/tusb_fifo.h **** #include "osal/osal.h"
  46:lib/TinyUSB/src/common/tusb_fifo.h **** 
  47:lib/TinyUSB/src/common/tusb_fifo.h **** // mutex is only needed for RTOS
  48:lib/TinyUSB/src/common/tusb_fifo.h **** // for OS None, we don't get preempted
  49:lib/TinyUSB/src/common/tusb_fifo.h **** #define CFG_FIFO_MUTEX      OSAL_MUTEX_REQUIRED
  50:lib/TinyUSB/src/common/tusb_fifo.h **** 
  51:lib/TinyUSB/src/common/tusb_fifo.h **** #if CFG_TUD_EDPT_DEDICATED_HWFIFO || CFG_TUH_EDPT_DEDICATED_HWFIFO
  52:lib/TinyUSB/src/common/tusb_fifo.h ****   #define CFG_TUSB_FIFO_ACCESS_FIXED_ADDR_RW32
  53:lib/TinyUSB/src/common/tusb_fifo.h **** #endif
  54:lib/TinyUSB/src/common/tusb_fifo.h **** 
  55:lib/TinyUSB/src/common/tusb_fifo.h **** /* Write/Read "pointer" is in the range of: 0 .. depth - 1, and is used to get the fifo data.
  56:lib/TinyUSB/src/common/tusb_fifo.h ****  * Write/Read "index" is always in the range of: 0 .. 2*depth-1
  57:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  58:lib/TinyUSB/src/common/tusb_fifo.h ****  * The extra window allow us to determine the fifo state of empty or full with only 2 indices
  59:lib/TinyUSB/src/common/tusb_fifo.h ****  * Following are examples with depth = 3
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 37


  60:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  61:lib/TinyUSB/src/common/tusb_fifo.h ****  * - empty: W = R
  62:lib/TinyUSB/src/common/tusb_fifo.h ****  *                |
  63:lib/TinyUSB/src/common/tusb_fifo.h ****  *    -------------------------
  64:lib/TinyUSB/src/common/tusb_fifo.h ****  *    | 0 | RW| 2 | 3 | 4 | 5 |
  65:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  66:lib/TinyUSB/src/common/tusb_fifo.h ****  * - full 1: W > R
  67:lib/TinyUSB/src/common/tusb_fifo.h ****  *                |
  68:lib/TinyUSB/src/common/tusb_fifo.h ****  *    -------------------------
  69:lib/TinyUSB/src/common/tusb_fifo.h ****  *    | 0 | R | 2 | 3 | W | 5 |
  70:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  71:lib/TinyUSB/src/common/tusb_fifo.h ****  * - full 2: W < R
  72:lib/TinyUSB/src/common/tusb_fifo.h ****  *                |
  73:lib/TinyUSB/src/common/tusb_fifo.h ****  *    -------------------------
  74:lib/TinyUSB/src/common/tusb_fifo.h ****  *    | 0 | 1 | W | 3 | 4 | R |
  75:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  76:lib/TinyUSB/src/common/tusb_fifo.h ****  * - Number of items in the fifo can be determined in either cases:
  77:lib/TinyUSB/src/common/tusb_fifo.h ****  *    - case W >= R: Count = W - R
  78:lib/TinyUSB/src/common/tusb_fifo.h ****  *    - case W <  R: Count = 2*depth - (R - W)
  79:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  80:lib/TinyUSB/src/common/tusb_fifo.h ****  * In non-overwritable mode, computed Count (in above 2 cases) is at most equal to depth.
  81:lib/TinyUSB/src/common/tusb_fifo.h ****  * However, in over-writable mode, write index can be repeatedly increased and count can be
  82:lib/TinyUSB/src/common/tusb_fifo.h ****  * temporarily larger than depth (overflowed condition) e.g
  83:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  84:lib/TinyUSB/src/common/tusb_fifo.h ****  *  - Overflowed 1: write(3), write(1)
  85:lib/TinyUSB/src/common/tusb_fifo.h ****  *    In this case we will adjust Read index when read()/peek() is called so that count = depth.
  86:lib/TinyUSB/src/common/tusb_fifo.h ****  *                  |
  87:lib/TinyUSB/src/common/tusb_fifo.h ****  *      -------------------------
  88:lib/TinyUSB/src/common/tusb_fifo.h ****  *      | R | 1 | 2 | 3 | W | 5 |
  89:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  90:lib/TinyUSB/src/common/tusb_fifo.h ****  *  - Double Overflowed i.e index is out of allowed range [0,2*depth)
  91:lib/TinyUSB/src/common/tusb_fifo.h ****  *    This occurs when we continue to write after 1st overflowed to 2nd overflowed. e.g:
  92:lib/TinyUSB/src/common/tusb_fifo.h ****  *      write(3), write(1), write(2)
  93:lib/TinyUSB/src/common/tusb_fifo.h ****  *    This must be prevented since it will cause unrecoverable state, in above example
  94:lib/TinyUSB/src/common/tusb_fifo.h ****  *    if not handled the fifo will be empty instead of continue-to-be full. Since we must not modif
  95:lib/TinyUSB/src/common/tusb_fifo.h ****  *    read index in write() function, which cause race condition. We will re-position write index s
  96:lib/TinyUSB/src/common/tusb_fifo.h ****  *    after data is written it is a full fifo i.e W = depth - R
  97:lib/TinyUSB/src/common/tusb_fifo.h ****  *
  98:lib/TinyUSB/src/common/tusb_fifo.h ****  *      re-position W = 1 before write(2)
  99:lib/TinyUSB/src/common/tusb_fifo.h ****  *      Note: we should also move data from mem[3] to read index as well, but deliberately skipped 
 100:lib/TinyUSB/src/common/tusb_fifo.h ****  *      since it is an expensive operation !!!
 101:lib/TinyUSB/src/common/tusb_fifo.h ****  *                  |
 102:lib/TinyUSB/src/common/tusb_fifo.h ****  *      -------------------------
 103:lib/TinyUSB/src/common/tusb_fifo.h ****  *      | R | W | 2 | 3 | 4 | 5 |
 104:lib/TinyUSB/src/common/tusb_fifo.h ****  *
 105:lib/TinyUSB/src/common/tusb_fifo.h ****  *      perform write(2), result is still a full fifo.
 106:lib/TinyUSB/src/common/tusb_fifo.h ****  *
 107:lib/TinyUSB/src/common/tusb_fifo.h ****  *                  |
 108:lib/TinyUSB/src/common/tusb_fifo.h ****  *      -------------------------
 109:lib/TinyUSB/src/common/tusb_fifo.h ****  *      | R | 1 | 2 | W | 4 | 5 |
 110:lib/TinyUSB/src/common/tusb_fifo.h ****  */
 111:lib/TinyUSB/src/common/tusb_fifo.h **** typedef struct {
 112:lib/TinyUSB/src/common/tusb_fifo.h ****   uint8_t *buffer;              // buffer pointer
 113:lib/TinyUSB/src/common/tusb_fifo.h ****   uint16_t depth;               // max items
 114:lib/TinyUSB/src/common/tusb_fifo.h **** 
 115:lib/TinyUSB/src/common/tusb_fifo.h ****   struct TU_ATTR_PACKED {
 116:lib/TinyUSB/src/common/tusb_fifo.h ****     uint16_t item_size    : 15; // size of each item
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 38


 117:lib/TinyUSB/src/common/tusb_fifo.h ****     bool     overwritable : 1;  // ovwerwritable when full
 118:lib/TinyUSB/src/common/tusb_fifo.h ****   };
 119:lib/TinyUSB/src/common/tusb_fifo.h **** 
 120:lib/TinyUSB/src/common/tusb_fifo.h ****   volatile uint16_t wr_idx;     // write index
 121:lib/TinyUSB/src/common/tusb_fifo.h ****   volatile uint16_t rd_idx;     // read index
 122:lib/TinyUSB/src/common/tusb_fifo.h **** 
 123:lib/TinyUSB/src/common/tusb_fifo.h **** #if OSAL_MUTEX_REQUIRED
 124:lib/TinyUSB/src/common/tusb_fifo.h ****   osal_mutex_t mutex_wr;
 125:lib/TinyUSB/src/common/tusb_fifo.h ****   osal_mutex_t mutex_rd;
 126:lib/TinyUSB/src/common/tusb_fifo.h **** #endif
 127:lib/TinyUSB/src/common/tusb_fifo.h **** 
 128:lib/TinyUSB/src/common/tusb_fifo.h **** } tu_fifo_t;
 129:lib/TinyUSB/src/common/tusb_fifo.h **** 
 130:lib/TinyUSB/src/common/tusb_fifo.h **** typedef struct {
 131:lib/TinyUSB/src/common/tusb_fifo.h ****   struct {
 132:lib/TinyUSB/src/common/tusb_fifo.h ****     uint16_t len; // length
 133:lib/TinyUSB/src/common/tusb_fifo.h ****     uint8_t *ptr; // buffer pointer
 134:lib/TinyUSB/src/common/tusb_fifo.h ****   } linear, wrapped;
 135:lib/TinyUSB/src/common/tusb_fifo.h **** } tu_fifo_buffer_info_t;
 136:lib/TinyUSB/src/common/tusb_fifo.h **** 
 137:lib/TinyUSB/src/common/tusb_fifo.h **** #define TU_FIFO_INIT(_buffer, _depth, _type, _overwritable) \
 138:lib/TinyUSB/src/common/tusb_fifo.h ****   {                                                         \
 139:lib/TinyUSB/src/common/tusb_fifo.h ****     .buffer       = _buffer,                                \
 140:lib/TinyUSB/src/common/tusb_fifo.h ****     .depth        = _depth,                                 \
 141:lib/TinyUSB/src/common/tusb_fifo.h ****     .item_size    = sizeof(_type),                          \
 142:lib/TinyUSB/src/common/tusb_fifo.h ****     .overwritable = _overwritable,                          \
 143:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 144:lib/TinyUSB/src/common/tusb_fifo.h **** 
 145:lib/TinyUSB/src/common/tusb_fifo.h **** #define TU_FIFO_DEF(_name, _depth, _type, _overwritable)                      \
 146:lib/TinyUSB/src/common/tusb_fifo.h ****     uint8_t _name##_buf[_depth*sizeof(_type)];                                \
 147:lib/TinyUSB/src/common/tusb_fifo.h ****     tu_fifo_t _name = TU_FIFO_INIT(_name##_buf, _depth, _type, _overwritable)
 148:lib/TinyUSB/src/common/tusb_fifo.h **** 
 149:lib/TinyUSB/src/common/tusb_fifo.h **** // Write modes intended to allow special read and write functions to be able to
 150:lib/TinyUSB/src/common/tusb_fifo.h **** // copy data to and from USB hardware FIFOs as needed for e.g. STM32s and others
 151:lib/TinyUSB/src/common/tusb_fifo.h **** typedef enum {
 152:lib/TinyUSB/src/common/tusb_fifo.h ****   TU_FIFO_INC_ADDR_RW8,    // increased address read/write by bytes - normal (default) mode
 153:lib/TinyUSB/src/common/tusb_fifo.h ****   TU_FIFO_FIXED_ADDR_RW32, // fixed address read/write by 4 bytes (word). Used for STM32 access int
 154:lib/TinyUSB/src/common/tusb_fifo.h **** } tu_fifo_access_mode_t;
 155:lib/TinyUSB/src/common/tusb_fifo.h **** 
 156:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 157:lib/TinyUSB/src/common/tusb_fifo.h **** // Setup API
 158:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 159:lib/TinyUSB/src/common/tusb_fifo.h **** bool tu_fifo_config(tu_fifo_t *f, void *buffer, uint16_t depth, uint16_t item_size, bool overwritab
 160:lib/TinyUSB/src/common/tusb_fifo.h **** void tu_fifo_set_overwritable(tu_fifo_t *f, bool overwritable);
 161:lib/TinyUSB/src/common/tusb_fifo.h **** void tu_fifo_clear(tu_fifo_t *f);
 162:lib/TinyUSB/src/common/tusb_fifo.h **** 
 163:lib/TinyUSB/src/common/tusb_fifo.h **** #if OSAL_MUTEX_REQUIRED
 164:lib/TinyUSB/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline
 165:lib/TinyUSB/src/common/tusb_fifo.h **** void tu_fifo_config_mutex(tu_fifo_t *f, osal_mutex_t wr_mutex, osal_mutex_t rd_mutex) {
 166:lib/TinyUSB/src/common/tusb_fifo.h ****   f->mutex_wr = wr_mutex;
 167:lib/TinyUSB/src/common/tusb_fifo.h ****   f->mutex_rd = rd_mutex;
 168:lib/TinyUSB/src/common/tusb_fifo.h **** }
 169:lib/TinyUSB/src/common/tusb_fifo.h **** #else
 170:lib/TinyUSB/src/common/tusb_fifo.h **** #define tu_fifo_config_mutex(_f, _wr_mutex, _rd_mutex)
 171:lib/TinyUSB/src/common/tusb_fifo.h **** #endif
 172:lib/TinyUSB/src/common/tusb_fifo.h **** 
 173:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 39


 174:lib/TinyUSB/src/common/tusb_fifo.h **** // Index API
 175:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 176:lib/TinyUSB/src/common/tusb_fifo.h **** void tu_fifo_correct_read_pointer(tu_fifo_t *f);
 177:lib/TinyUSB/src/common/tusb_fifo.h **** 
 178:lib/TinyUSB/src/common/tusb_fifo.h **** // Pointer modifications intended to be used in combinations with DMAs.
 179:lib/TinyUSB/src/common/tusb_fifo.h **** // USE WITH CARE - NO SAFETY CHECKS CONDUCTED HERE! NOT MUTEX PROTECTED!
 180:lib/TinyUSB/src/common/tusb_fifo.h **** void tu_fifo_advance_write_pointer(tu_fifo_t *f, uint16_t n);
 181:lib/TinyUSB/src/common/tusb_fifo.h **** void tu_fifo_advance_read_pointer(tu_fifo_t *f, uint16_t n);
 182:lib/TinyUSB/src/common/tusb_fifo.h **** 
 183:lib/TinyUSB/src/common/tusb_fifo.h **** // If you want to read/write from/to the FIFO by use of a DMA, you may need to conduct two copies
 184:lib/TinyUSB/src/common/tusb_fifo.h **** // to handle a possible wrapping part. These functions deliver a pointer to start
 185:lib/TinyUSB/src/common/tusb_fifo.h **** // reading/writing from/to and a valid linear length along which no wrap occurs.
 186:lib/TinyUSB/src/common/tusb_fifo.h **** void tu_fifo_get_read_info(tu_fifo_t *f, tu_fifo_buffer_info_t *info);
 187:lib/TinyUSB/src/common/tusb_fifo.h **** void tu_fifo_get_write_info(tu_fifo_t *f, tu_fifo_buffer_info_t *info);
 188:lib/TinyUSB/src/common/tusb_fifo.h **** 
 189:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 190:lib/TinyUSB/src/common/tusb_fifo.h **** // Peek API
 191:lib/TinyUSB/src/common/tusb_fifo.h **** // peek() will correct/re-index read pointer in case of an overflowed fifo to form a full fifo
 192:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 193:lib/TinyUSB/src/common/tusb_fifo.h **** uint16_t tu_fifo_peek_n_access_mode(tu_fifo_t *f, void *p_buffer, uint16_t n, uint16_t wr_idx, uint
 194:lib/TinyUSB/src/common/tusb_fifo.h ****                                     tu_fifo_access_mode_t access_mode);
 195:lib/TinyUSB/src/common/tusb_fifo.h **** bool     tu_fifo_peek(tu_fifo_t *f, void *p_buffer);
 196:lib/TinyUSB/src/common/tusb_fifo.h **** uint16_t tu_fifo_peek_n(tu_fifo_t *f, void *p_buffer, uint16_t n);
 197:lib/TinyUSB/src/common/tusb_fifo.h **** 
 198:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 199:lib/TinyUSB/src/common/tusb_fifo.h **** // Read API
 200:lib/TinyUSB/src/common/tusb_fifo.h **** // peek() + advance read index
 201:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 202:lib/TinyUSB/src/common/tusb_fifo.h **** uint16_t tu_fifo_read_n_access_mode(tu_fifo_t *f, void *buffer, uint16_t n, tu_fifo_access_mode_t a
 203:lib/TinyUSB/src/common/tusb_fifo.h **** bool     tu_fifo_read(tu_fifo_t *f, void *buffer);
 204:lib/TinyUSB/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_fifo_read_n(tu_fifo_t *f, void *buffer, uint16_t n)
 205:lib/TinyUSB/src/common/tusb_fifo.h ****   return tu_fifo_read_n_access_mode(f, buffer, n, TU_FIFO_INC_ADDR_RW8);
 206:lib/TinyUSB/src/common/tusb_fifo.h **** }
 207:lib/TinyUSB/src/common/tusb_fifo.h **** 
 208:lib/TinyUSB/src/common/tusb_fifo.h **** // discard first n items from fifo i.e advance read pointer by n with mutex
 209:lib/TinyUSB/src/common/tusb_fifo.h **** // return number of discarded items
 210:lib/TinyUSB/src/common/tusb_fifo.h **** uint16_t tu_fifo_discard_n(tu_fifo_t *f, uint16_t n);
 211:lib/TinyUSB/src/common/tusb_fifo.h **** 
 212:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 213:lib/TinyUSB/src/common/tusb_fifo.h **** // Write API
 214:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 215:lib/TinyUSB/src/common/tusb_fifo.h **** uint16_t tu_fifo_write_n_access_mode(tu_fifo_t *f, const void *data, uint16_t n, tu_fifo_access_mod
 216:lib/TinyUSB/src/common/tusb_fifo.h **** bool     tu_fifo_write(tu_fifo_t *f, const void *data);
 217:lib/TinyUSB/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_fifo_write_n(tu_fifo_t *f, const void *data, uint16
 218:lib/TinyUSB/src/common/tusb_fifo.h ****   return tu_fifo_write_n_access_mode(f, data, n, TU_FIFO_INC_ADDR_RW8);
 219:lib/TinyUSB/src/common/tusb_fifo.h **** }
 220:lib/TinyUSB/src/common/tusb_fifo.h **** 
 221:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 222:lib/TinyUSB/src/common/tusb_fifo.h **** // Internal Helper Local
 223:lib/TinyUSB/src/common/tusb_fifo.h **** // work on local copies of read/write indices in order to only access them once for re-entrancy
 224:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 225:lib/TinyUSB/src/common/tusb_fifo.h **** // return overflowable count (index difference), which can be used to determine both fifo count and
 226:lib/TinyUSB/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_ff_overflow_count(uint16_t depth, uint16_t wr_idx, 
 959              		.loc 3 226 46 is_stmt 1 view .LVU288
 960              	.LBB116:
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   const int32_t diff = (int32_t)wr_idx - (int32_t)rd_idx;
 961              		.loc 3 227 3 view .LVU289
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 40


 962              		.loc 3 227 17 is_stmt 0 view .LVU290
 963 0008 D01A     		subs	r0, r2, r3
 964              	.LVL139:
 228:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 965              		.loc 3 228 3 is_stmt 1 view .LVU291
 966              		.loc 3 228 6 is_stmt 0 view .LVU292
 967 000a 0028     		cmp	r0, #0
 968 000c 05DB     		blt	.L46
 229:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 969              		.loc 3 229 5 is_stmt 1 view .LVU293
 970              		.loc 3 229 12 is_stmt 0 view .LVU294
 971 000e 80B2     		uxth	r0, r0
 972              	.LVL140:
 973              	.L47:
 974              		.loc 3 229 12 view .LVU295
 975              	.LBE116:
 976              	.LBE115:
 468:lib/TinyUSB/src/common/tusb_fifo.c ****   if (ovf_count == 0) {
 977              		.loc 1 468 3 is_stmt 1 view .LVU296
 978              		.loc 1 468 6 is_stmt 0 view .LVU297
 979 0010 E8B1     		cbz	r0, .L52
 469:lib/TinyUSB/src/common/tusb_fifo.c ****     return false; // nothing to peek
 470:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 471:lib/TinyUSB/src/common/tusb_fifo.c **** 
 472:lib/TinyUSB/src/common/tusb_fifo.c ****   // Correct read index if overflow
 473:lib/TinyUSB/src/common/tusb_fifo.c ****   if (ovf_count > f->depth) {
 980              		.loc 1 473 3 is_stmt 1 view .LVU298
 981              		.loc 1 473 6 is_stmt 0 view .LVU299
 982 0012 8142     		cmp	r1, r0
 983 0014 06D3     		bcc	.L54
 984              	.LVL141:
 985              	.L49:
 474:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_lock(f->mutex_rd);
 475:lib/TinyUSB/src/common/tusb_fifo.c ****     rd_idx = correct_read_index(f, wr_idx);
 476:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 986              		.loc 1 476 27 is_stmt 1 view .LVU300
 477:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 478:lib/TinyUSB/src/common/tusb_fifo.c **** 
 479:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t rd_ptr = idx2ptr(f->depth, rd_idx);
 987              		.loc 1 479 3 view .LVU301
 988              		.loc 1 479 27 is_stmt 0 view .LVU302
 989 0016 A288     		ldrh	r2, [r4, #4]
 990              	.LVL142:
 991              	.LBB118:
 992              	.LBI118:
 306:lib/TinyUSB/src/common/tusb_fifo.c ****   // Only run at most 3 times since index is limit in the range of [0..2*depth)
 993              		.loc 1 306 46 is_stmt 1 view .LVU303
 994              	.LBB119:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 995              		.loc 1 308 3 view .LVU304
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 996              		.loc 1 308 9 is_stmt 0 view .LVU305
 997 0018 0CE0     		b	.L50
 998              	.LVL143:
 999              	.L46:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1000              		.loc 1 308 9 view .LVU306
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 41


 1001              	.LBE119:
 1002              	.LBE118:
 1003              	.LBB121:
 1004              	.LBB117:
 230:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 231:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)(2 * depth + diff);
 1005              		.loc 3 231 5 is_stmt 1 view .LVU307
 1006              		.loc 3 231 12 is_stmt 0 view .LVU308
 1007 001a D01A     		subs	r0, r2, r3
 1008              	.LVL144:
 1009              		.loc 3 231 12 view .LVU309
 1010 001c 00EB4100 		add	r0, r0, r1, lsl #1
 1011 0020 80B2     		uxth	r0, r0
 1012 0022 F5E7     		b	.L47
 1013              	.LVL145:
 1014              	.L54:
 1015              		.loc 3 231 12 view .LVU310
 1016              	.LBE117:
 1017              	.LBE121:
 474:lib/TinyUSB/src/common/tusb_fifo.c ****     rd_idx = correct_read_index(f, wr_idx);
 1018              		.loc 1 474 25 is_stmt 1 view .LVU311
 475:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 1019              		.loc 1 475 5 view .LVU312
 475:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 1020              		.loc 1 475 14 is_stmt 0 view .LVU313
 1021 0024 1146     		mov	r1, r2
 1022 0026 2046     		mov	r0, r4
 1023              	.LVL146:
 475:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 1024              		.loc 1 475 14 view .LVU314
 1025 0028 FFF7FEFF 		bl	correct_read_index
 1026              	.LVL147:
 475:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 1027              		.loc 1 475 14 view .LVU315
 1028 002c 0346     		mov	r3, r0
 1029              	.LVL148:
 475:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 1030              		.loc 1 475 14 view .LVU316
 1031 002e F2E7     		b	.L49
 1032              	.LVL149:
 1033              	.L51:
 1034              	.LBB122:
 1035              	.LBB120:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1036              		.loc 1 309 5 is_stmt 1 view .LVU317
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1037              		.loc 1 309 9 is_stmt 0 view .LVU318
 1038 0030 9B1A     		subs	r3, r3, r2
 1039              	.LVL150:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1040              		.loc 1 309 9 view .LVU319
 1041 0032 9BB2     		uxth	r3, r3
 1042              	.LVL151:
 1043              	.L50:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1044              		.loc 1 308 9 is_stmt 1 view .LVU320
 1045 0034 9A42     		cmp	r2, r3
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 42


 1046 0036 FBD9     		bls	.L51
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1047              		.loc 1 311 3 view .LVU321
 1048              	.LVL152:
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1049              		.loc 1 311 3 is_stmt 0 view .LVU322
 1050              	.LBE120:
 1051              	.LBE122:
 480:lib/TinyUSB/src/common/tusb_fifo.c ****   memcpy(buf, f->buffer + (rd_ptr * f->item_size), f->item_size);
 1052              		.loc 1 480 3 is_stmt 1 view .LVU323
 1053              		.loc 1 480 16 is_stmt 0 view .LVU324
 1054 0038 2168     		ldr	r1, [r4]
 1055              		.loc 1 480 38 view .LVU325
 1056 003a E288     		ldrh	r2, [r4, #6]
 1057 003c C2F30E02 		ubfx	r2, r2, #0, #15
 1058              		.loc 1 480 3 view .LVU326
 1059 0040 02FB0311 		mla	r1, r2, r3, r1
 1060 0044 2846     		mov	r0, r5
 1061 0046 FFF7FEFF 		bl	memcpy
 1062              	.LVL153:
 481:lib/TinyUSB/src/common/tusb_fifo.c **** 
 482:lib/TinyUSB/src/common/tusb_fifo.c ****   return true;
 1063              		.loc 1 482 3 is_stmt 1 view .LVU327
 1064              		.loc 1 482 10 is_stmt 0 view .LVU328
 1065 004a 0120     		movs	r0, #1
 1066              	.L48:
 483:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1067              		.loc 1 483 1 view .LVU329
 1068 004c 38BD     		pop	{r3, r4, r5, pc}
 1069              	.LVL154:
 1070              	.L52:
 469:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1071              		.loc 1 469 12 view .LVU330
 1072 004e 0020     		movs	r0, #0
 1073              	.LVL155:
 469:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1074              		.loc 1 469 12 view .LVU331
 1075 0050 FCE7     		b	.L48
 1076              		.cfi_endproc
 1077              	.LFE90:
 1079              		.section	.text.tu_fifo_config,"ax",%progbits
 1080              		.align	1
 1081              		.global	tu_fifo_config
 1082              		.syntax unified
 1083              		.thumb
 1084              		.thumb_func
 1086              	tu_fifo_config:
 1087              	.LVL156:
 1088              	.LFB75:
  62:lib/TinyUSB/src/common/tusb_fifo.c ****   // Limit index space to 2*depth - this allows for a fast "modulo" calculation
 1089              		.loc 1 62 104 is_stmt 1 view -0
 1090              		.cfi_startproc
 1091              		@ args = 4, pretend = 0, frame = 0
 1092              		@ frame_needed = 0, uses_anonymous_args = 0
 1093              		@ link register save eliminated.
  66:lib/TinyUSB/src/common/tusb_fifo.c ****     return false;
 1094              		.loc 1 66 3 view .LVU333
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 43


  66:lib/TinyUSB/src/common/tusb_fifo.c ****     return false;
 1095              		.loc 1 66 6 is_stmt 0 view .LVU334
 1096 0000 B2F5004F 		cmp	r2, #32768
 1097 0004 10D8     		bhi	.L57
  70:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 1098              		.loc 1 70 23 is_stmt 1 view .LVU335
  71:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1099              		.loc 1 71 23 view .LVU336
  73:lib/TinyUSB/src/common/tusb_fifo.c ****   f->depth        = depth;
 1100              		.loc 1 73 3 view .LVU337
  73:lib/TinyUSB/src/common/tusb_fifo.c ****   f->depth        = depth;
 1101              		.loc 1 73 19 is_stmt 0 view .LVU338
 1102 0006 0160     		str	r1, [r0]
  74:lib/TinyUSB/src/common/tusb_fifo.c ****   f->item_size    = (uint16_t)(item_size & 0x7FFFu);
 1103              		.loc 1 74 3 is_stmt 1 view .LVU339
  74:lib/TinyUSB/src/common/tusb_fifo.c ****   f->item_size    = (uint16_t)(item_size & 0x7FFFu);
 1104              		.loc 1 74 19 is_stmt 0 view .LVU340
 1105 0008 8280     		strh	r2, [r0, #4]	@ movhi
  75:lib/TinyUSB/src/common/tusb_fifo.c ****   f->overwritable = overwritable;
 1106              		.loc 1 75 3 is_stmt 1 view .LVU341
  75:lib/TinyUSB/src/common/tusb_fifo.c ****   f->overwritable = overwritable;
 1107              		.loc 1 75 19 is_stmt 0 view .LVU342
 1108 000a C288     		ldrh	r2, [r0, #6]
 1109              	.LVL157:
  75:lib/TinyUSB/src/common/tusb_fifo.c ****   f->overwritable = overwritable;
 1110              		.loc 1 75 19 view .LVU343
 1111 000c 63F30E02 		bfi	r2, r3, #0, #15
 1112 0010 C280     		strh	r2, [r0, #6]	@ movhi
  76:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx       = 0u;
 1113              		.loc 1 76 3 is_stmt 1 view .LVU344
  76:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx       = 0u;
 1114              		.loc 1 76 19 is_stmt 0 view .LVU345
 1115 0012 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 1116              	.LVL158:
  76:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx       = 0u;
 1117              		.loc 1 76 19 view .LVU346
 1118 0014 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 1119 0018 62F3C713 		bfi	r3, r2, #7, #1
 1120              	.LVL159:
  76:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx       = 0u;
 1121              		.loc 1 76 19 view .LVU347
 1122 001c C371     		strb	r3, [r0, #7]
  77:lib/TinyUSB/src/common/tusb_fifo.c ****   f->wr_idx       = 0u;
 1123              		.loc 1 77 3 is_stmt 1 view .LVU348
  77:lib/TinyUSB/src/common/tusb_fifo.c ****   f->wr_idx       = 0u;
 1124              		.loc 1 77 19 is_stmt 0 view .LVU349
 1125 001e 0023     		movs	r3, #0
 1126 0020 4381     		strh	r3, [r0, #10]	@ movhi
  78:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1127              		.loc 1 78 3 is_stmt 1 view .LVU350
  78:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1128              		.loc 1 78 19 is_stmt 0 view .LVU351
 1129 0022 0381     		strh	r3, [r0, #8]	@ movhi
  80:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 1130              		.loc 1 80 25 is_stmt 1 view .LVU352
  81:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1131              		.loc 1 81 25 view .LVU353
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 44


  83:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1132              		.loc 1 83 3 view .LVU354
  83:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1133              		.loc 1 83 10 is_stmt 0 view .LVU355
 1134 0024 0120     		movs	r0, #1
 1135              	.LVL160:
  83:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1136              		.loc 1 83 10 view .LVU356
 1137 0026 7047     		bx	lr
 1138              	.LVL161:
 1139              	.L57:
  67:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1140              		.loc 1 67 12 view .LVU357
 1141 0028 0020     		movs	r0, #0
 1142              	.LVL162:
  84:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1143              		.loc 1 84 1 view .LVU358
 1144 002a 7047     		bx	lr
 1145              		.cfi_endproc
 1146              	.LFE75:
 1148              		.section	.text.tu_fifo_clear,"ax",%progbits
 1149              		.align	1
 1150              		.global	tu_fifo_clear
 1151              		.syntax unified
 1152              		.thumb
 1153              		.thumb_func
 1155              	tu_fifo_clear:
 1156              	.LVL163:
 1157              	.LFB76:
  87:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_wr);
 1158              		.loc 1 87 34 is_stmt 1 view -0
 1159              		.cfi_startproc
 1160              		@ args = 0, pretend = 0, frame = 0
 1161              		@ frame_needed = 0, uses_anonymous_args = 0
 1162              		@ link register save eliminated.
  88:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 1163              		.loc 1 88 23 view .LVU360
  89:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1164              		.loc 1 89 23 view .LVU361
  91:lib/TinyUSB/src/common/tusb_fifo.c ****   f->wr_idx = 0;
 1165              		.loc 1 91 3 view .LVU362
  91:lib/TinyUSB/src/common/tusb_fifo.c ****   f->wr_idx = 0;
 1166              		.loc 1 91 13 is_stmt 0 view .LVU363
 1167 0000 0023     		movs	r3, #0
 1168 0002 4381     		strh	r3, [r0, #10]	@ movhi
  92:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1169              		.loc 1 92 3 is_stmt 1 view .LVU364
  92:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1170              		.loc 1 92 13 is_stmt 0 view .LVU365
 1171 0004 0381     		strh	r3, [r0, #8]	@ movhi
  94:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 1172              		.loc 1 94 25 is_stmt 1 view .LVU366
  95:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1173              		.loc 1 95 25 view .LVU367
  96:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1174              		.loc 1 96 1 is_stmt 0 view .LVU368
 1175 0006 7047     		bx	lr
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 45


 1176              		.cfi_endproc
 1177              	.LFE76:
 1179              		.section	.text.tu_fifo_set_overwritable,"ax",%progbits
 1180              		.align	1
 1181              		.global	tu_fifo_set_overwritable
 1182              		.syntax unified
 1183              		.thumb
 1184              		.thumb_func
 1186              	tu_fifo_set_overwritable:
 1187              	.LVL164:
 1188              	.LFB77:
  99:lib/TinyUSB/src/common/tusb_fifo.c ****   if (f->overwritable == overwritable) {
 1189              		.loc 1 99 64 is_stmt 1 view -0
 1190              		.cfi_startproc
 1191              		@ args = 0, pretend = 0, frame = 0
 1192              		@ frame_needed = 0, uses_anonymous_args = 0
 1193              		@ link register save eliminated.
 100:lib/TinyUSB/src/common/tusb_fifo.c ****     return;
 1194              		.loc 1 100 3 view .LVU370
 100:lib/TinyUSB/src/common/tusb_fifo.c ****     return;
 1195              		.loc 1 100 8 is_stmt 0 view .LVU371
 1196 0000 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 100:lib/TinyUSB/src/common/tusb_fifo.c ****     return;
 1197              		.loc 1 100 6 view .LVU372
 1198 0002 B1EBD31F 		cmp	r1, r3, lsr #7
 1199 0006 03D0     		beq	.L59
 104:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 1200              		.loc 1 104 23 is_stmt 1 view .LVU373
 105:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1201              		.loc 1 105 23 view .LVU374
 107:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1202              		.loc 1 107 3 view .LVU375
 107:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1203              		.loc 1 107 19 is_stmt 0 view .LVU376
 1204 0008 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 1205 000a 61F3C713 		bfi	r3, r1, #7, #1
 1206              	.LVL165:
 107:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1207              		.loc 1 107 19 view .LVU377
 1208 000e C371     		strb	r3, [r0, #7]
 109:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 1209              		.loc 1 109 25 is_stmt 1 view .LVU378
 110:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1210              		.loc 1 110 25 view .LVU379
 1211              	.L59:
 111:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1212              		.loc 1 111 1 is_stmt 0 view .LVU380
 1213 0010 7047     		bx	lr
 1214              		.cfi_endproc
 1215              	.LFE77:
 1217              		.section	.text.tu_fifo_peek_n_access_mode,"ax",%progbits
 1218              		.align	1
 1219              		.global	tu_fifo_peek_n_access_mode
 1220              		.syntax unified
 1221              		.thumb
 1222              		.thumb_func
 1224              	tu_fifo_peek_n_access_mode:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 46


 1225              	.LVL166:
 1226              	.LFB85:
 335:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t count = tu_ff_overflow_count(f->depth, wr_idx, rd_idx);
 1227              		.loc 1 335 72 is_stmt 1 view -0
 1228              		.cfi_startproc
 1229              		@ args = 8, pretend = 0, frame = 0
 1230              		@ frame_needed = 0, uses_anonymous_args = 0
 335:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t count = tu_ff_overflow_count(f->depth, wr_idx, rd_idx);
 1231              		.loc 1 335 72 is_stmt 0 view .LVU382
 1232 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1233              	.LCFI11:
 1234              		.cfi_def_cfa_offset 20
 1235              		.cfi_offset 4, -20
 1236              		.cfi_offset 5, -16
 1237              		.cfi_offset 6, -12
 1238              		.cfi_offset 7, -8
 1239              		.cfi_offset 14, -4
 1240 0002 83B0     		sub	sp, sp, #12
 1241              	.LCFI12:
 1242              		.cfi_def_cfa_offset 32
 1243 0004 0546     		mov	r5, r0
 1244 0006 0E46     		mov	r6, r1
 1245 0008 1746     		mov	r7, r2
 1246 000a 1946     		mov	r1, r3
 1247              	.LVL167:
 335:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t count = tu_ff_overflow_count(f->depth, wr_idx, rd_idx);
 1248              		.loc 1 335 72 view .LVU383
 1249 000c BDF82030 		ldrh	r3, [sp, #32]
 1250              	.LVL168:
 336:lib/TinyUSB/src/common/tusb_fifo.c ****   if (count == 0) {
 1251              		.loc 1 336 3 is_stmt 1 view .LVU384
 336:lib/TinyUSB/src/common/tusb_fifo.c ****   if (count == 0) {
 1252              		.loc 1 336 20 is_stmt 0 view .LVU385
 1253 0010 8288     		ldrh	r2, [r0, #4]
 1254              	.LVL169:
 1255              	.LBB123:
 1256              	.LBI123:
 226:lib/TinyUSB/src/common/tusb_fifo.h ****   const int32_t diff = (int32_t)wr_idx - (int32_t)rd_idx;
 1257              		.loc 3 226 46 is_stmt 1 view .LVU386
 1258              	.LBB124:
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 1259              		.loc 3 227 3 view .LVU387
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 1260              		.loc 3 227 17 is_stmt 0 view .LVU388
 1261 0012 C81A     		subs	r0, r1, r3
 1262              	.LVL170:
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 1263              		.loc 3 228 3 is_stmt 1 view .LVU389
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 1264              		.loc 3 228 6 is_stmt 0 view .LVU390
 1265 0014 0028     		cmp	r0, #0
 1266 0016 08DB     		blt	.L62
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1267              		.loc 3 229 5 is_stmt 1 view .LVU391
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1268              		.loc 3 229 12 is_stmt 0 view .LVU392
 1269 0018 84B2     		uxth	r4, r0
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 47


 1270              	.L63:
 1271              	.LVL171:
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1272              		.loc 3 229 12 view .LVU393
 1273              	.LBE124:
 1274              	.LBE123:
 337:lib/TinyUSB/src/common/tusb_fifo.c ****     return 0; // nothing to peek
 1275              		.loc 1 337 3 is_stmt 1 view .LVU394
 337:lib/TinyUSB/src/common/tusb_fifo.c ****     return 0; // nothing to peek
 1276              		.loc 1 337 6 is_stmt 0 view .LVU395
 1277 001a ECB1     		cbz	r4, .L64
 342:lib/TinyUSB/src/common/tusb_fifo.c ****     rd_idx = correct_read_index(f, wr_idx);
 1278              		.loc 1 342 3 is_stmt 1 view .LVU396
 342:lib/TinyUSB/src/common/tusb_fifo.c ****     rd_idx = correct_read_index(f, wr_idx);
 1279              		.loc 1 342 6 is_stmt 0 view .LVU397
 1280 001c A242     		cmp	r2, r4
 1281 001e 09D3     		bcc	.L70
 1282              	.LVL172:
 1283              	.L65:
 347:lib/TinyUSB/src/common/tusb_fifo.c ****     n = count; // limit to available count
 1284              		.loc 1 347 3 is_stmt 1 view .LVU398
 347:lib/TinyUSB/src/common/tusb_fifo.c ****     n = count; // limit to available count
 1285              		.loc 1 347 6 is_stmt 0 view .LVU399
 1286 0020 BC42     		cmp	r4, r7
 1287 0022 00D3     		bcc	.L66
 347:lib/TinyUSB/src/common/tusb_fifo.c ****     n = count; // limit to available count
 1288              		.loc 1 347 6 view .LVU400
 1289 0024 3C46     		mov	r4, r7
 1290              	.LVL173:
 1291              	.L66:
 351:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_pull_n(f, p_buffer, n, rd_ptr, access_mode);
 1292              		.loc 1 351 3 is_stmt 1 view .LVU401
 351:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_pull_n(f, p_buffer, n, rd_ptr, access_mode);
 1293              		.loc 1 351 27 is_stmt 0 view .LVU402
 1294 0026 AA88     		ldrh	r2, [r5, #4]
 1295              	.LVL174:
 1296              	.LBB126:
 1297              	.LBI126:
 306:lib/TinyUSB/src/common/tusb_fifo.c ****   // Only run at most 3 times since index is limit in the range of [0..2*depth)
 1298              		.loc 1 306 46 is_stmt 1 view .LVU403
 1299              	.LBB127:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1300              		.loc 1 308 3 view .LVU404
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1301              		.loc 1 308 9 is_stmt 0 view .LVU405
 1302 0028 0CE0     		b	.L67
 1303              	.LVL175:
 1304              	.L62:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1305              		.loc 1 308 9 view .LVU406
 1306              	.LBE127:
 1307              	.LBE126:
 1308              	.LBB129:
 1309              	.LBB125:
 1310              		.loc 3 231 5 is_stmt 1 view .LVU407
 1311              		.loc 3 231 12 is_stmt 0 view .LVU408
 1312 002a CC1A     		subs	r4, r1, r3
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 48


 1313 002c 04EB4204 		add	r4, r4, r2, lsl #1
 1314 0030 A4B2     		uxth	r4, r4
 1315 0032 F2E7     		b	.L63
 1316              	.LVL176:
 1317              	.L70:
 1318              		.loc 3 231 12 view .LVU409
 1319              	.LBE125:
 1320              	.LBE129:
 343:lib/TinyUSB/src/common/tusb_fifo.c ****     count  = f->depth;
 1321              		.loc 1 343 5 is_stmt 1 view .LVU410
 343:lib/TinyUSB/src/common/tusb_fifo.c ****     count  = f->depth;
 1322              		.loc 1 343 14 is_stmt 0 view .LVU411
 1323 0034 2846     		mov	r0, r5
 1324 0036 FFF7FEFF 		bl	correct_read_index
 1325              	.LVL177:
 1326 003a 0346     		mov	r3, r0
 1327              	.LVL178:
 344:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1328              		.loc 1 344 5 is_stmt 1 view .LVU412
 344:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1329              		.loc 1 344 12 is_stmt 0 view .LVU413
 1330 003c AC88     		ldrh	r4, [r5, #4]
 1331              	.LVL179:
 344:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1332              		.loc 1 344 12 view .LVU414
 1333 003e EFE7     		b	.L65
 1334              	.LVL180:
 1335              	.L68:
 1336              	.LBB130:
 1337              	.LBB128:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1338              		.loc 1 309 5 is_stmt 1 view .LVU415
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1339              		.loc 1 309 9 is_stmt 0 view .LVU416
 1340 0040 9B1A     		subs	r3, r3, r2
 1341              	.LVL181:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1342              		.loc 1 309 9 view .LVU417
 1343 0042 9BB2     		uxth	r3, r3
 1344              	.LVL182:
 1345              	.L67:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1346              		.loc 1 308 9 is_stmt 1 view .LVU418
 1347 0044 9A42     		cmp	r2, r3
 1348 0046 FBD9     		bls	.L68
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1349              		.loc 1 311 3 view .LVU419
 1350              	.LVL183:
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1351              		.loc 1 311 3 is_stmt 0 view .LVU420
 1352              	.LBE128:
 1353              	.LBE130:
 352:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1354              		.loc 1 352 3 is_stmt 1 view .LVU421
 1355 0048 9DF82420 		ldrb	r2, [sp, #36]	@ zero_extendqisi2
 1356 004c 0092     		str	r2, [sp]
 1357 004e 2246     		mov	r2, r4
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 49


 1358 0050 3146     		mov	r1, r6
 1359 0052 2846     		mov	r0, r5
 1360 0054 FFF7FEFF 		bl	ff_pull_n
 1361              	.LVL184:
 354:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1362              		.loc 1 354 3 view .LVU422
 1363              	.L64:
 355:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1364              		.loc 1 355 1 is_stmt 0 view .LVU423
 1365 0058 2046     		mov	r0, r4
 1366 005a 03B0     		add	sp, sp, #12
 1367              	.LCFI13:
 1368              		.cfi_def_cfa_offset 20
 1369              		@ sp needed
 1370 005c F0BD     		pop	{r4, r5, r6, r7, pc}
 355:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1371              		.loc 1 355 1 view .LVU424
 1372              		.cfi_endproc
 1373              	.LFE85:
 1375              		.section	.text.tu_fifo_peek_n,"ax",%progbits
 1376              		.align	1
 1377              		.global	tu_fifo_peek_n
 1378              		.syntax unified
 1379              		.thumb
 1380              		.thumb_func
 1382              	tu_fifo_peek_n:
 1383              	.LVL185:
 1384              	.LFB86:
 358:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 1385              		.loc 1 358 67 is_stmt 1 view -0
 1386              		.cfi_startproc
 1387              		@ args = 0, pretend = 0, frame = 0
 1388              		@ frame_needed = 0, uses_anonymous_args = 0
 358:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 1389              		.loc 1 358 67 is_stmt 0 view .LVU426
 1390 0000 30B5     		push	{r4, r5, lr}
 1391              	.LCFI14:
 1392              		.cfi_def_cfa_offset 12
 1393              		.cfi_offset 4, -12
 1394              		.cfi_offset 5, -8
 1395              		.cfi_offset 14, -4
 1396 0002 83B0     		sub	sp, sp, #12
 1397              	.LCFI15:
 1398              		.cfi_def_cfa_offset 24
 359:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t ret = tu_fifo_peek_n_access_mode(f, p_buffer, n, f->wr_idx, f->rd_idx, TU_FIFO_INC
 1399              		.loc 1 359 23 is_stmt 1 view .LVU427
 360:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 1400              		.loc 1 360 3 view .LVU428
 360:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 1401              		.loc 1 360 24 is_stmt 0 view .LVU429
 1402 0004 0389     		ldrh	r3, [r0, #8]
 1403 0006 4489     		ldrh	r4, [r0, #10]
 1404 0008 A4B2     		uxth	r4, r4
 1405 000a 0025     		movs	r5, #0
 1406 000c 0195     		str	r5, [sp, #4]
 1407 000e 0094     		str	r4, [sp]
 1408 0010 9BB2     		uxth	r3, r3
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 50


 1409 0012 FFF7FEFF 		bl	tu_fifo_peek_n_access_mode
 1410              	.LVL186:
 361:lib/TinyUSB/src/common/tusb_fifo.c ****   return ret;
 1411              		.loc 1 361 25 is_stmt 1 view .LVU430
 362:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1412              		.loc 1 362 3 view .LVU431
 363:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1413              		.loc 1 363 1 is_stmt 0 view .LVU432
 1414 0016 03B0     		add	sp, sp, #12
 1415              	.LCFI16:
 1416              		.cfi_def_cfa_offset 12
 1417              		@ sp needed
 1418 0018 30BD     		pop	{r4, r5, pc}
 1419              		.cfi_endproc
 1420              	.LFE86:
 1422              		.section	.text.tu_fifo_read_n_access_mode,"ax",%progbits
 1423              		.align	1
 1424              		.global	tu_fifo_read_n_access_mode
 1425              		.syntax unified
 1426              		.thumb
 1427              		.thumb_func
 1429              	tu_fifo_read_n_access_mode:
 1430              	.LVL187:
 1431              	.LFB87:
 366:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 1432              		.loc 1 366 112 is_stmt 1 view -0
 1433              		.cfi_startproc
 1434              		@ args = 0, pretend = 0, frame = 0
 1435              		@ frame_needed = 0, uses_anonymous_args = 0
 366:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 1436              		.loc 1 366 112 is_stmt 0 view .LVU434
 1437 0000 30B5     		push	{r4, r5, lr}
 1438              	.LCFI17:
 1439              		.cfi_def_cfa_offset 12
 1440              		.cfi_offset 4, -12
 1441              		.cfi_offset 5, -8
 1442              		.cfi_offset 14, -4
 1443 0002 83B0     		sub	sp, sp, #12
 1444              	.LCFI18:
 1445              		.cfi_def_cfa_offset 24
 1446 0004 0446     		mov	r4, r0
 367:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1447              		.loc 1 367 23 is_stmt 1 view .LVU435
 370:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = advance_index(f->depth, f->rd_idx, n);
 1448              		.loc 1 370 3 view .LVU436
 370:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = advance_index(f->depth, f->rd_idx, n);
 1449              		.loc 1 370 15 is_stmt 0 view .LVU437
 1450 0006 B0F808C0 		ldrh	ip, [r0, #8]
 1451 000a 4589     		ldrh	r5, [r0, #10]
 1452 000c ADB2     		uxth	r5, r5
 1453 000e 0193     		str	r3, [sp, #4]
 1454 0010 0095     		str	r5, [sp]
 1455 0012 1FFA8CF3 		uxth	r3, ip
 1456              	.LVL188:
 370:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = advance_index(f->depth, f->rd_idx, n);
 1457              		.loc 1 370 15 view .LVU438
 1458 0016 FFF7FEFF 		bl	tu_fifo_peek_n_access_mode
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 51


 1459              	.LVL189:
 370:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = advance_index(f->depth, f->rd_idx, n);
 1460              		.loc 1 370 15 view .LVU439
 1461 001a 0546     		mov	r5, r0
 1462              	.LVL190:
 371:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1463              		.loc 1 371 3 is_stmt 1 view .LVU440
 371:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1464              		.loc 1 371 15 is_stmt 0 view .LVU441
 1465 001c 6189     		ldrh	r1, [r4, #10]
 1466 001e 0246     		mov	r2, r0
 1467 0020 89B2     		uxth	r1, r1
 1468 0022 A088     		ldrh	r0, [r4, #4]
 1469              	.LVL191:
 371:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1470              		.loc 1 371 15 view .LVU442
 1471 0024 FFF7FEFF 		bl	advance_index
 1472              	.LVL192:
 371:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1473              		.loc 1 371 13 view .LVU443
 1474 0028 6081     		strh	r0, [r4, #10]	@ movhi
 373:lib/TinyUSB/src/common/tusb_fifo.c ****   return n;
 1475              		.loc 1 373 25 is_stmt 1 view .LVU444
 374:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1476              		.loc 1 374 3 view .LVU445
 375:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1477              		.loc 1 375 1 is_stmt 0 view .LVU446
 1478 002a 2846     		mov	r0, r5
 1479 002c 03B0     		add	sp, sp, #12
 1480              	.LCFI19:
 1481              		.cfi_def_cfa_offset 12
 1482              		@ sp needed
 1483 002e 30BD     		pop	{r4, r5, pc}
 375:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1484              		.loc 1 375 1 view .LVU447
 1485              		.cfi_endproc
 1486              	.LFE87:
 1488              		.section	.text.tu_fifo_write_n_access_mode,"ax",%progbits
 1489              		.align	1
 1490              		.global	tu_fifo_write_n_access_mode
 1491              		.syntax unified
 1492              		.thumb
 1493              		.thumb_func
 1495              	tu_fifo_write_n_access_mode:
 1496              	.LVL193:
 1497              	.LFB88:
 378:lib/TinyUSB/src/common/tusb_fifo.c ****   if (n == 0) {
 1498              		.loc 1 378 117 is_stmt 1 view -0
 1499              		.cfi_startproc
 1500              		@ args = 0, pretend = 0, frame = 0
 1501              		@ frame_needed = 0, uses_anonymous_args = 0
 378:lib/TinyUSB/src/common/tusb_fifo.c ****   if (n == 0) {
 1502              		.loc 1 378 117 is_stmt 0 view .LVU449
 1503 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1504              	.LCFI20:
 1505              		.cfi_def_cfa_offset 28
 1506              		.cfi_offset 4, -28
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 52


 1507              		.cfi_offset 5, -24
 1508              		.cfi_offset 6, -20
 1509              		.cfi_offset 7, -16
 1510              		.cfi_offset 8, -12
 1511              		.cfi_offset 9, -8
 1512              		.cfi_offset 14, -4
 1513 0004 83B0     		sub	sp, sp, #12
 1514              	.LCFI21:
 1515              		.cfi_def_cfa_offset 40
 379:lib/TinyUSB/src/common/tusb_fifo.c ****     return 0;
 1516              		.loc 1 379 3 is_stmt 1 view .LVU450
 379:lib/TinyUSB/src/common/tusb_fifo.c ****     return 0;
 1517              		.loc 1 379 6 is_stmt 0 view .LVU451
 1518 0006 9146     		mov	r9, r2
 1519 0008 002A     		cmp	r2, #0
 1520 000a 59D0     		beq	.L87
 1521 000c 0446     		mov	r4, r0
 1522 000e 8846     		mov	r8, r1
 1523 0010 1F46     		mov	r7, r3
 383:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1524              		.loc 1 383 23 is_stmt 1 view .LVU452
 385:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t rd_idx = f->rd_idx;
 1525              		.loc 1 385 3 view .LVU453
 385:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t rd_idx = f->rd_idx;
 1526              		.loc 1 385 12 is_stmt 0 view .LVU454
 1527 0012 0689     		ldrh	r6, [r0, #8]
 1528 0014 B6B2     		uxth	r6, r6
 1529              	.LVL194:
 386:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1530              		.loc 1 386 3 is_stmt 1 view .LVU455
 386:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1531              		.loc 1 386 12 is_stmt 0 view .LVU456
 1532 0016 4189     		ldrh	r1, [r0, #10]
 1533              	.LVL195:
 386:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1534              		.loc 1 386 12 view .LVU457
 1535 0018 89B2     		uxth	r1, r1
 1536              	.LVL196:
 388:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1537              		.loc 1 388 3 is_stmt 1 view .LVU458
 391:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1538              		.loc 1 391 109 view .LVU459
 393:lib/TinyUSB/src/common/tusb_fifo.c ****     // limit up to full
 1539              		.loc 1 393 3 view .LVU460
 393:lib/TinyUSB/src/common/tusb_fifo.c ****     // limit up to full
 1540              		.loc 1 393 9 is_stmt 0 view .LVU461
 1541 001a C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 1542              	.LVL197:
 393:lib/TinyUSB/src/common/tusb_fifo.c ****     // limit up to full
 1543              		.loc 1 393 6 view .LVU462
 1544 001c DB09     		lsrs	r3, r3, #7
 1545 001e 17D1     		bne	.L77
 1546              	.LBB131:
 395:lib/TinyUSB/src/common/tusb_fifo.c ****     n                     = tu_min16(n, remain);
 1547              		.loc 1 395 5 is_stmt 1 view .LVU463
 395:lib/TinyUSB/src/common/tusb_fifo.c ****     n                     = tu_min16(n, remain);
 1548              		.loc 1 395 29 is_stmt 0 view .LVU464
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 53


 1549 0020 8388     		ldrh	r3, [r0, #4]
 1550              	.LVL198:
 1551              	.LBB132:
 1552              	.LBI132:
 232:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 233:lib/TinyUSB/src/common/tusb_fifo.h **** }
 234:lib/TinyUSB/src/common/tusb_fifo.h **** 
 235:lib/TinyUSB/src/common/tusb_fifo.h **** // return remaining slot in fifo
 236:lib/TinyUSB/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_ff_remaining_local(uint16_t depth, uint16_t wr_idx,
 1553              		.loc 3 236 46 is_stmt 1 view .LVU465
 1554              	.LBB133:
 237:lib/TinyUSB/src/common/tusb_fifo.h ****   const uint16_t ovf_count = tu_ff_overflow_count(depth, wr_idx, rd_idx);
 1555              		.loc 3 237 3 view .LVU466
 1556              	.LBB134:
 1557              	.LBI134:
 226:lib/TinyUSB/src/common/tusb_fifo.h ****   const int32_t diff = (int32_t)wr_idx - (int32_t)rd_idx;
 1558              		.loc 3 226 46 view .LVU467
 1559              	.LBB135:
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 1560              		.loc 3 227 3 view .LVU468
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 1561              		.loc 3 227 17 is_stmt 0 view .LVU469
 1562 0022 721A     		subs	r2, r6, r1
 1563              	.LVL199:
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 1564              		.loc 3 228 3 is_stmt 1 view .LVU470
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 1565              		.loc 3 228 6 is_stmt 0 view .LVU471
 1566 0024 002A     		cmp	r2, #0
 1567 0026 0CDB     		blt	.L78
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1568              		.loc 3 229 5 is_stmt 1 view .LVU472
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1569              		.loc 3 229 12 is_stmt 0 view .LVU473
 1570 0028 95B2     		uxth	r5, r2
 1571              	.L79:
 1572              	.LVL200:
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1573              		.loc 3 229 12 view .LVU474
 1574              	.LBE135:
 1575              	.LBE134:
 238:lib/TinyUSB/src/common/tusb_fifo.h ****   return (depth > ovf_count) ? (depth - ovf_count) : 0;
 1576              		.loc 3 238 3 is_stmt 1 view .LVU475
 1577              		.loc 3 238 52 is_stmt 0 view .LVU476
 1578 002a AB42     		cmp	r3, r5
 1579 002c 0ED9     		bls	.L88
 1580 002e 5D1B     		subs	r5, r3, r5
 1581              	.LVL201:
 1582              		.loc 3 238 52 view .LVU477
 1583 0030 ADB2     		uxth	r5, r5
 1584              	.L80:
 1585              	.LVL202:
 1586              		.loc 3 238 52 view .LVU478
 1587              	.LBE133:
 1588              	.LBE132:
 396:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 1589              		.loc 1 396 5 is_stmt 1 view .LVU479
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 54


 1590              	.LBB139:
 1591              	.LBI139:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1592              		.loc 2 206 46 view .LVU480
 1593              	.LBB140:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1594              		.loc 2 206 82 view .LVU481
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1595              		.loc 2 206 101 is_stmt 0 view .LVU482
 1596 0032 4D45     		cmp	r5, r9
 1597 0034 28BF     		it	cs
 1598 0036 4D46     		movcs	r5, r9
 1599              	.LVL203:
 1600              	.L81:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1601              		.loc 2 206 101 view .LVU483
 1602              	.LBE140:
 1603              	.LBE139:
 1604              	.LBE131:
 1605              	.LBB142:
 432:lib/TinyUSB/src/common/tusb_fifo.c ****     }
 1606              		.loc 1 432 7 is_stmt 1 view .LVU484
 1607              	.LBE142:
 436:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint16_t wr_ptr = idx2ptr(f->depth, wr_idx);
 1608              		.loc 1 436 3 view .LVU485
 436:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint16_t wr_ptr = idx2ptr(f->depth, wr_idx);
 1609              		.loc 1 436 6 is_stmt 0 view .LVU486
 1610 0038 002D     		cmp	r5, #0
 1611 003a 42D0     		beq	.L76
 1612              	.LBB147:
 437:lib/TinyUSB/src/common/tusb_fifo.c ****     TU_LOG(TU_FIFO_DBG, "actual_n = %u, wr_ptr = %u", n, wr_ptr);
 1613              		.loc 1 437 5 is_stmt 1 view .LVU487
 437:lib/TinyUSB/src/common/tusb_fifo.c ****     TU_LOG(TU_FIFO_DBG, "actual_n = %u, wr_ptr = %u", n, wr_ptr);
 1614              		.loc 1 437 29 is_stmt 0 view .LVU488
 1615 003c A288     		ldrh	r2, [r4, #4]
 1616              	.LVL204:
 1617              	.LBB148:
 1618              	.LBI148:
 306:lib/TinyUSB/src/common/tusb_fifo.c ****   // Only run at most 3 times since index is limit in the range of [0..2*depth)
 1619              		.loc 1 306 46 is_stmt 1 view .LVU489
 1620              	.LBB149:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1621              		.loc 1 308 3 view .LVU490
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1622              		.loc 1 308 9 is_stmt 0 view .LVU491
 1623 003e 3346     		mov	r3, r6
 1624 0040 2FE0     		b	.L85
 1625              	.LVL205:
 1626              	.L78:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1627              		.loc 1 308 9 view .LVU492
 1628              	.LBE149:
 1629              	.LBE148:
 1630              	.LBE147:
 1631              	.LBB152:
 1632              	.LBB141:
 1633              	.LBB138:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 55


 1634              	.LBB137:
 1635              	.LBB136:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1636              		.loc 3 231 5 is_stmt 1 view .LVU493
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1637              		.loc 3 231 12 is_stmt 0 view .LVU494
 1638 0042 751A     		subs	r5, r6, r1
 1639 0044 05EB4305 		add	r5, r5, r3, lsl #1
 1640 0048 ADB2     		uxth	r5, r5
 1641 004a EEE7     		b	.L79
 1642              	.LVL206:
 1643              	.L88:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1644              		.loc 3 231 12 view .LVU495
 1645              	.LBE136:
 1646              	.LBE137:
 1647              		.loc 3 238 52 view .LVU496
 1648 004c 0025     		movs	r5, #0
 1649              	.LVL207:
 1650              		.loc 3 238 52 view .LVU497
 1651 004e F0E7     		b	.L80
 1652              	.LVL208:
 1653              	.L77:
 1654              		.loc 3 238 52 view .LVU498
 1655              	.LBE138:
 1656              	.LBE141:
 1657              	.LBE152:
 402:lib/TinyUSB/src/common/tusb_fifo.c ****       // Only copy last part
 1658              		.loc 1 402 5 is_stmt 1 view .LVU499
 402:lib/TinyUSB/src/common/tusb_fifo.c ****       // Only copy last part
 1659              		.loc 1 402 15 is_stmt 0 view .LVU500
 1660 0050 8588     		ldrh	r5, [r0, #4]
 402:lib/TinyUSB/src/common/tusb_fifo.c ****       // Only copy last part
 1661              		.loc 1 402 8 view .LVU501
 1662 0052 9542     		cmp	r5, r2
 1663 0054 09D8     		bhi	.L82
 404:lib/TinyUSB/src/common/tusb_fifo.c ****         buf8 += (n - f->depth) * f->item_size;
 1664              		.loc 1 404 7 is_stmt 1 view .LVU502
 404:lib/TinyUSB/src/common/tusb_fifo.c ****         buf8 += (n - f->depth) * f->item_size;
 1665              		.loc 1 404 10 is_stmt 0 view .LVU503
 1666 0056 F7B9     		cbnz	r7, .L89
 405:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 1667              		.loc 1 405 9 is_stmt 1 view .LVU504
 405:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 1668              		.loc 1 405 20 is_stmt 0 view .LVU505
 1669 0058 A2EB0509 		sub	r9, r2, r5
 405:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 1670              		.loc 1 405 35 view .LVU506
 1671 005c C388     		ldrh	r3, [r0, #6]
 1672 005e C3F30E03 		ubfx	r3, r3, #0, #15
 405:lib/TinyUSB/src/common/tusb_fifo.c ****       } else {
 1673              		.loc 1 405 14 view .LVU507
 1674 0062 03FB0988 		mla	r8, r3, r9, r8
 1675              	.LVL209:
 414:lib/TinyUSB/src/common/tusb_fifo.c ****     } else {
 1676              		.loc 1 414 14 view .LVU508
 1677 0066 0E46     		mov	r6, r1
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 56


 1678              	.LVL210:
 414:lib/TinyUSB/src/common/tusb_fifo.c ****     } else {
 1679              		.loc 1 414 14 view .LVU509
 1680 0068 E6E7     		b	.L81
 1681              	.LVL211:
 1682              	.L82:
 1683              	.LBB153:
 416:lib/TinyUSB/src/common/tusb_fifo.c ****       if (overflowable_count + n >= 2 * f->depth) {
 1684              		.loc 1 416 7 is_stmt 1 view .LVU510
 1685              	.LBB143:
 1686              	.LBI143:
 226:lib/TinyUSB/src/common/tusb_fifo.h ****   const int32_t diff = (int32_t)wr_idx - (int32_t)rd_idx;
 1687              		.loc 3 226 46 view .LVU511
 1688              	.LBB144:
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 1689              		.loc 3 227 3 view .LVU512
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 1690              		.loc 3 227 17 is_stmt 0 view .LVU513
 1691 006a 731A     		subs	r3, r6, r1
 1692              	.LVL212:
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 1693              		.loc 3 228 3 is_stmt 1 view .LVU514
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 1694              		.loc 3 228 6 is_stmt 0 view .LVU515
 1695 006c 002B     		cmp	r3, #0
 1696 006e 0DDB     		blt	.L83
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1697              		.loc 3 229 5 is_stmt 1 view .LVU516
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1698              		.loc 3 229 12 is_stmt 0 view .LVU517
 1699 0070 9BB2     		uxth	r3, r3
 1700              	.LVL213:
 1701              	.L84:
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1702              		.loc 3 229 12 view .LVU518
 1703              	.LBE144:
 1704              	.LBE143:
 417:lib/TinyUSB/src/common/tusb_fifo.c ****         // Double overflowed
 1705              		.loc 1 417 7 is_stmt 1 view .LVU519
 417:lib/TinyUSB/src/common/tusb_fifo.c ****         // Double overflowed
 1706              		.loc 1 417 30 is_stmt 0 view .LVU520
 1707 0072 4B44     		add	r3, r3, r9
 1708              	.LVL214:
 417:lib/TinyUSB/src/common/tusb_fifo.c ****         // Double overflowed
 1709              		.loc 1 417 10 view .LVU521
 1710 0074 B3EB450F 		cmp	r3, r5, lsl #1
 1711 0078 0FDB     		blt	.L90
 421:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1712              		.loc 1 421 9 is_stmt 1 view .LVU522
 421:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1713              		.loc 1 421 18 is_stmt 0 view .LVU523
 1714 007a A5EB0902 		sub	r2, r5, r9
 1715              	.LVL215:
 421:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1716              		.loc 1 421 18 view .LVU524
 1717 007e 92B2     		uxth	r2, r2
 1718 0080 2846     		mov	r0, r5
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 57


 1719              	.LVL216:
 421:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1720              		.loc 1 421 18 view .LVU525
 1721 0082 FFF7FEFF 		bl	advance_index
 1722              	.LVL217:
 421:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1723              		.loc 1 421 18 view .LVU526
 1724 0086 0646     		mov	r6, r0
 1725              	.LVL218:
 421:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1726              		.loc 1 421 18 view .LVU527
 1727 0088 4D46     		mov	r5, r9
 1728 008a D5E7     		b	.L81
 1729              	.LVL219:
 1730              	.L83:
 1731              	.LBB146:
 1732              	.LBB145:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1733              		.loc 3 231 5 is_stmt 1 view .LVU528
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1734              		.loc 3 231 12 is_stmt 0 view .LVU529
 1735 008c 731A     		subs	r3, r6, r1
 1736              	.LVL220:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1737              		.loc 3 231 12 view .LVU530
 1738 008e 03EB4503 		add	r3, r3, r5, lsl #1
 1739 0092 9BB2     		uxth	r3, r3
 1740 0094 EDE7     		b	.L84
 1741              	.LVL221:
 1742              	.L89:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1743              		.loc 3 231 12 view .LVU531
 1744              	.LBE145:
 1745              	.LBE146:
 1746              	.LBE153:
 414:lib/TinyUSB/src/common/tusb_fifo.c ****     } else {
 1747              		.loc 1 414 14 view .LVU532
 1748 0096 0E46     		mov	r6, r1
 1749              	.LVL222:
 414:lib/TinyUSB/src/common/tusb_fifo.c ****     } else {
 1750              		.loc 1 414 14 view .LVU533
 1751 0098 CEE7     		b	.L81
 1752              	.LVL223:
 1753              	.L90:
 1754              	.LBB154:
 414:lib/TinyUSB/src/common/tusb_fifo.c ****     } else {
 1755              		.loc 1 414 14 view .LVU534
 1756 009a 4D46     		mov	r5, r9
 1757 009c CCE7     		b	.L81
 1758              	.LVL224:
 1759              	.L86:
 414:lib/TinyUSB/src/common/tusb_fifo.c ****     } else {
 1760              		.loc 1 414 14 view .LVU535
 1761              	.LBE154:
 1762              	.LBB155:
 1763              	.LBB151:
 1764              	.LBB150:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 58


 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1765              		.loc 1 309 5 is_stmt 1 view .LVU536
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1766              		.loc 1 309 9 is_stmt 0 view .LVU537
 1767 009e 9B1A     		subs	r3, r3, r2
 1768              	.LVL225:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1769              		.loc 1 309 9 view .LVU538
 1770 00a0 9BB2     		uxth	r3, r3
 1771              	.LVL226:
 1772              	.L85:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 1773              		.loc 1 308 9 is_stmt 1 view .LVU539
 1774 00a2 9A42     		cmp	r2, r3
 1775 00a4 FBD9     		bls	.L86
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1776              		.loc 1 311 3 view .LVU540
 1777              	.LVL227:
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1778              		.loc 1 311 3 is_stmt 0 view .LVU541
 1779              	.LBE150:
 1780              	.LBE151:
 438:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1781              		.loc 1 438 65 is_stmt 1 view .LVU542
 440:lib/TinyUSB/src/common/tusb_fifo.c ****     f->wr_idx = advance_index(f->depth, wr_idx, n);
 1782              		.loc 1 440 5 view .LVU543
 1783 00a6 0097     		str	r7, [sp]
 1784 00a8 2A46     		mov	r2, r5
 1785 00aa 4146     		mov	r1, r8
 1786 00ac 2046     		mov	r0, r4
 1787 00ae FFF7FEFF 		bl	ff_push_n
 1788              	.LVL228:
 441:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1789              		.loc 1 441 5 view .LVU544
 441:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1790              		.loc 1 441 17 is_stmt 0 view .LVU545
 1791 00b2 2A46     		mov	r2, r5
 1792 00b4 3146     		mov	r1, r6
 1793 00b6 A088     		ldrh	r0, [r4, #4]
 1794 00b8 FFF7FEFF 		bl	advance_index
 1795              	.LVL229:
 441:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1796              		.loc 1 441 15 view .LVU546
 1797 00bc 2081     		strh	r0, [r4, #8]	@ movhi
 1798 00be 00E0     		b	.L76
 1799              	.LVL230:
 1800              	.L87:
 441:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1801              		.loc 1 441 15 view .LVU547
 1802              	.LBE155:
 380:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 1803              		.loc 1 380 12 view .LVU548
 1804 00c0 1546     		mov	r5, r2
 1805              	.LVL231:
 1806              	.L76:
 449:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1807              		.loc 1 449 1 view .LVU549
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 59


 1808 00c2 2846     		mov	r0, r5
 1809 00c4 03B0     		add	sp, sp, #12
 1810              	.LCFI22:
 1811              		.cfi_def_cfa_offset 28
 1812              		@ sp needed
 1813 00c6 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1814              		.cfi_endproc
 1815              	.LFE88:
 1817              		.section	.text.tu_fifo_discard_n,"ax",%progbits
 1818              		.align	1
 1819              		.global	tu_fifo_discard_n
 1820              		.syntax unified
 1821              		.thumb
 1822              		.thumb_func
 1824              	tu_fifo_discard_n:
 1825              	.LVL232:
 1826              	.LFB89:
 451:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t count = tu_min16(n, tu_fifo_count(f)); // limit to available count
 1827              		.loc 1 451 54 is_stmt 1 view -0
 1828              		.cfi_startproc
 1829              		@ args = 0, pretend = 0, frame = 0
 1830              		@ frame_needed = 0, uses_anonymous_args = 0
 451:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t count = tu_min16(n, tu_fifo_count(f)); // limit to available count
 1831              		.loc 1 451 54 is_stmt 0 view .LVU551
 1832 0000 38B5     		push	{r3, r4, r5, lr}
 1833              	.LCFI23:
 1834              		.cfi_def_cfa_offset 16
 1835              		.cfi_offset 3, -16
 1836              		.cfi_offset 4, -12
 1837              		.cfi_offset 5, -8
 1838              		.cfi_offset 14, -4
 1839 0002 0446     		mov	r4, r0
 1840 0004 0D46     		mov	r5, r1
 452:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 1841              		.loc 1 452 3 is_stmt 1 view .LVU552
 1842              	.LVL233:
 1843              	.LBB156:
 1844              	.LBI156:
 239:lib/TinyUSB/src/common/tusb_fifo.h **** }
 240:lib/TinyUSB/src/common/tusb_fifo.h **** 
 241:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 242:lib/TinyUSB/src/common/tusb_fifo.h **** // State API
 243:lib/TinyUSB/src/common/tusb_fifo.h **** // Following functions are reentrant since they only access read/write indices once, therefore can 
 244:lib/TinyUSB/src/common/tusb_fifo.h **** // ISRs context without the need of mutexes
 245:lib/TinyUSB/src/common/tusb_fifo.h **** //--------------------------------------------------------------------+
 246:lib/TinyUSB/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_fifo_depth(const tu_fifo_t *f) {
 247:lib/TinyUSB/src/common/tusb_fifo.h ****   return f->depth;
 248:lib/TinyUSB/src/common/tusb_fifo.h **** }
 249:lib/TinyUSB/src/common/tusb_fifo.h **** 
 250:lib/TinyUSB/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline bool tu_fifo_empty(const tu_fifo_t *f) {
 251:lib/TinyUSB/src/common/tusb_fifo.h ****   const uint16_t wr_idx = f->wr_idx;
 252:lib/TinyUSB/src/common/tusb_fifo.h ****   const uint16_t rd_idx = f->rd_idx;
 253:lib/TinyUSB/src/common/tusb_fifo.h ****   return wr_idx == rd_idx;
 254:lib/TinyUSB/src/common/tusb_fifo.h **** }
 255:lib/TinyUSB/src/common/tusb_fifo.h **** 
 256:lib/TinyUSB/src/common/tusb_fifo.h **** // return number of items in fifo, capped to fifo's depth
 257:lib/TinyUSB/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline uint16_t tu_fifo_count(const tu_fifo_t *f) {
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 60


 1845              		.loc 3 257 46 view .LVU553
 1846              	.LBB157:
 258:lib/TinyUSB/src/common/tusb_fifo.h ****   return tu_min16(tu_ff_overflow_count(f->depth, f->wr_idx, f->rd_idx), f->depth);
 1847              		.loc 3 258 3 view .LVU554
 1848              		.loc 3 258 10 is_stmt 0 view .LVU555
 1849 0006 8088     		ldrh	r0, [r0, #4]
 1850              	.LVL234:
 1851              		.loc 3 258 10 view .LVU556
 1852 0008 2389     		ldrh	r3, [r4, #8]
 1853 000a 9BB2     		uxth	r3, r3
 1854 000c 6289     		ldrh	r2, [r4, #10]
 1855 000e 92B2     		uxth	r2, r2
 1856              	.LVL235:
 1857              	.LBB158:
 1858              	.LBI158:
 226:lib/TinyUSB/src/common/tusb_fifo.h ****   const int32_t diff = (int32_t)wr_idx - (int32_t)rd_idx;
 1859              		.loc 3 226 46 is_stmt 1 view .LVU557
 1860              	.LBB159:
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 1861              		.loc 3 227 3 view .LVU558
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 1862              		.loc 3 227 17 is_stmt 0 view .LVU559
 1863 0010 991A     		subs	r1, r3, r2
 1864              	.LVL236:
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 1865              		.loc 3 228 3 is_stmt 1 view .LVU560
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 1866              		.loc 3 228 6 is_stmt 0 view .LVU561
 1867 0012 0029     		cmp	r1, #0
 1868 0014 0EDB     		blt	.L93
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1869              		.loc 3 229 5 is_stmt 1 view .LVU562
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1870              		.loc 3 229 12 is_stmt 0 view .LVU563
 1871 0016 8BB2     		uxth	r3, r1
 1872              	.LVL237:
 1873              	.L94:
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 1874              		.loc 3 229 12 view .LVU564
 1875              	.LBE159:
 1876              	.LBE158:
 1877              	.LBB161:
 1878              	.LBI161:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1879              		.loc 2 206 46 is_stmt 1 view .LVU565
 1880              	.LBB162:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1881              		.loc 2 206 82 view .LVU566
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1882              		.loc 2 206 101 is_stmt 0 view .LVU567
 1883 0018 8342     		cmp	r3, r0
 1884 001a 28BF     		it	cs
 1885 001c 0346     		movcs	r3, r0
 1886              	.LVL238:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1887              		.loc 2 206 101 view .LVU568
 1888              	.LBE162:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 61


 1889              	.LBE161:
 1890              	.LBE157:
 1891              	.LBE156:
 1892              	.LBB165:
 1893              	.LBI165:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1894              		.loc 2 206 46 is_stmt 1 view .LVU569
 1895              	.LBB166:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1896              		.loc 2 206 82 view .LVU570
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1897              		.loc 2 206 101 is_stmt 0 view .LVU571
 1898 001e 9D42     		cmp	r5, r3
 1899 0020 28BF     		it	cs
 1900 0022 1D46     		movcs	r5, r3
 1901              	.LVL239:
 206:lib/TinyUSB/src/common/tusb_common.h **** TU_ATTR_ALWAYS_INLINE static inline uint32_t tu_min32 (uint32_t x, uint32_t y) { return (x < y) ? x
 1902              		.loc 2 206 101 view .LVU572
 1903              	.LBE166:
 1904              	.LBE165:
 453:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = advance_index(f->depth, f->rd_idx, count);
 1905              		.loc 1 453 23 is_stmt 1 view .LVU573
 454:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 1906              		.loc 1 454 3 view .LVU574
 454:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 1907              		.loc 1 454 15 is_stmt 0 view .LVU575
 1908 0024 6189     		ldrh	r1, [r4, #10]
 1909 0026 2A46     		mov	r2, r5
 1910 0028 89B2     		uxth	r1, r1
 1911 002a FFF7FEFF 		bl	advance_index
 1912              	.LVL240:
 454:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 1913              		.loc 1 454 13 view .LVU576
 1914 002e 6081     		strh	r0, [r4, #10]	@ movhi
 455:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1915              		.loc 1 455 25 is_stmt 1 view .LVU577
 457:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1916              		.loc 1 457 3 view .LVU578
 458:lib/TinyUSB/src/common/tusb_fifo.c **** 
 1917              		.loc 1 458 1 is_stmt 0 view .LVU579
 1918 0030 2846     		mov	r0, r5
 1919 0032 38BD     		pop	{r3, r4, r5, pc}
 1920              	.LVL241:
 1921              	.L93:
 1922              	.LBB167:
 1923              	.LBB164:
 1924              	.LBB163:
 1925              	.LBB160:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1926              		.loc 3 231 5 is_stmt 1 view .LVU580
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1927              		.loc 3 231 12 is_stmt 0 view .LVU581
 1928 0034 9B1A     		subs	r3, r3, r2
 1929              	.LVL242:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 1930              		.loc 3 231 12 view .LVU582
 1931 0036 03EB4003 		add	r3, r3, r0, lsl #1
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 62


 1932 003a 9BB2     		uxth	r3, r3
 1933 003c ECE7     		b	.L94
 1934              	.LBE160:
 1935              	.LBE163:
 1936              	.LBE164:
 1937              	.LBE167:
 1938              		.cfi_endproc
 1939              	.LFE89:
 1941              		.section	.text.tu_fifo_read,"ax",%progbits
 1942              		.align	1
 1943              		.global	tu_fifo_read
 1944              		.syntax unified
 1945              		.thumb
 1946              		.thumb_func
 1948              	tu_fifo_read:
 1949              	.LVL243:
 1950              	.LFB91:
 484:lib/TinyUSB/src/common/tusb_fifo.c **** 
 485:lib/TinyUSB/src/common/tusb_fifo.c **** // Read one element out of the buffer, correct read index if overflowed
 486:lib/TinyUSB/src/common/tusb_fifo.c **** bool tu_fifo_read(tu_fifo_t *f, void *buffer) {
 1951              		.loc 1 486 47 is_stmt 1 view -0
 1952              		.cfi_startproc
 1953              		@ args = 0, pretend = 0, frame = 0
 1954              		@ frame_needed = 0, uses_anonymous_args = 0
 1955              		.loc 1 486 47 is_stmt 0 view .LVU584
 1956 0000 38B5     		push	{r3, r4, r5, lr}
 1957              	.LCFI24:
 1958              		.cfi_def_cfa_offset 16
 1959              		.cfi_offset 3, -16
 1960              		.cfi_offset 4, -12
 1961              		.cfi_offset 5, -8
 1962              		.cfi_offset 14, -4
 1963 0002 0446     		mov	r4, r0
 487:lib/TinyUSB/src/common/tusb_fifo.c ****   // Peek the data
 488:lib/TinyUSB/src/common/tusb_fifo.c ****   // f->rd_idx might get modified in case of an overflow so we can not use a local variable
 489:lib/TinyUSB/src/common/tusb_fifo.c ****   const bool ret = ff_peek_local(f, buffer, f->wr_idx, f->rd_idx);
 1964              		.loc 1 489 3 is_stmt 1 view .LVU585
 1965              		.loc 1 489 20 is_stmt 0 view .LVU586
 1966 0004 0289     		ldrh	r2, [r0, #8]
 1967 0006 4389     		ldrh	r3, [r0, #10]
 1968 0008 9BB2     		uxth	r3, r3
 1969 000a 92B2     		uxth	r2, r2
 1970 000c FFF7FEFF 		bl	ff_peek_local
 1971              	.LVL244:
 490:lib/TinyUSB/src/common/tusb_fifo.c ****   if (ret) {
 1972              		.loc 1 490 3 is_stmt 1 view .LVU587
 1973              		.loc 1 490 6 is_stmt 0 view .LVU588
 1974 0010 0546     		mov	r5, r0
 1975 0012 30B1     		cbz	r0, .L97
 491:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_lock(f->mutex_rd);
 1976              		.loc 1 491 25 is_stmt 1 view .LVU589
 492:lib/TinyUSB/src/common/tusb_fifo.c ****     f->rd_idx = advance_index(f->depth, f->rd_idx, 1);
 1977              		.loc 1 492 5 view .LVU590
 1978              		.loc 1 492 17 is_stmt 0 view .LVU591
 1979 0014 6189     		ldrh	r1, [r4, #10]
 1980 0016 0122     		movs	r2, #1
 1981 0018 89B2     		uxth	r1, r1
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 63


 1982 001a A088     		ldrh	r0, [r4, #4]
 1983              	.LVL245:
 1984              		.loc 1 492 17 view .LVU592
 1985 001c FFF7FEFF 		bl	advance_index
 1986              	.LVL246:
 1987              		.loc 1 492 15 view .LVU593
 1988 0020 6081     		strh	r0, [r4, #10]	@ movhi
 1989              	.L97:
 493:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 1990              		.loc 1 493 27 is_stmt 1 view .LVU594
 494:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 495:lib/TinyUSB/src/common/tusb_fifo.c **** 
 496:lib/TinyUSB/src/common/tusb_fifo.c ****   return ret;
 1991              		.loc 1 496 3 view .LVU595
 497:lib/TinyUSB/src/common/tusb_fifo.c **** }
 1992              		.loc 1 497 1 is_stmt 0 view .LVU596
 1993 0022 2846     		mov	r0, r5
 1994 0024 38BD     		pop	{r3, r4, r5, pc}
 1995              		.loc 1 497 1 view .LVU597
 1996              		.cfi_endproc
 1997              	.LFE91:
 1999              		.section	.text.tu_fifo_peek,"ax",%progbits
 2000              		.align	1
 2001              		.global	tu_fifo_peek
 2002              		.syntax unified
 2003              		.thumb
 2004              		.thumb_func
 2006              	tu_fifo_peek:
 2007              	.LVL247:
 2008              	.LFB92:
 498:lib/TinyUSB/src/common/tusb_fifo.c **** 
 499:lib/TinyUSB/src/common/tusb_fifo.c **** // Read one item without removing it from the FIFO, correct read index if overflowed
 500:lib/TinyUSB/src/common/tusb_fifo.c **** bool tu_fifo_peek(tu_fifo_t *f, void *p_buffer) {
 2009              		.loc 1 500 49 is_stmt 1 view -0
 2010              		.cfi_startproc
 2011              		@ args = 0, pretend = 0, frame = 0
 2012              		@ frame_needed = 0, uses_anonymous_args = 0
 2013              		.loc 1 500 49 is_stmt 0 view .LVU599
 2014 0000 08B5     		push	{r3, lr}
 2015              	.LCFI25:
 2016              		.cfi_def_cfa_offset 8
 2017              		.cfi_offset 3, -8
 2018              		.cfi_offset 14, -4
 501:lib/TinyUSB/src/common/tusb_fifo.c ****   return ff_peek_local(f, p_buffer, f->wr_idx, f->rd_idx);
 2019              		.loc 1 501 3 is_stmt 1 view .LVU600
 2020              		.loc 1 501 10 is_stmt 0 view .LVU601
 2021 0002 0289     		ldrh	r2, [r0, #8]
 2022 0004 4389     		ldrh	r3, [r0, #10]
 2023 0006 9BB2     		uxth	r3, r3
 2024 0008 92B2     		uxth	r2, r2
 2025 000a FFF7FEFF 		bl	ff_peek_local
 2026              	.LVL248:
 502:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2027              		.loc 1 502 1 view .LVU602
 2028 000e 08BD     		pop	{r3, pc}
 2029              		.cfi_endproc
 2030              	.LFE92:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 64


 2032              		.section	.text.tu_fifo_write,"ax",%progbits
 2033              		.align	1
 2034              		.global	tu_fifo_write
 2035              		.syntax unified
 2036              		.thumb
 2037              		.thumb_func
 2039              	tu_fifo_write:
 2040              	.LVL249:
 2041              	.LFB93:
 503:lib/TinyUSB/src/common/tusb_fifo.c **** 
 504:lib/TinyUSB/src/common/tusb_fifo.c **** // Write one element into the buffer
 505:lib/TinyUSB/src/common/tusb_fifo.c **** bool tu_fifo_write(tu_fifo_t *f, const void *data) {
 2042              		.loc 1 505 52 is_stmt 1 view -0
 2043              		.cfi_startproc
 2044              		@ args = 0, pretend = 0, frame = 0
 2045              		@ frame_needed = 0, uses_anonymous_args = 0
 2046              		.loc 1 505 52 is_stmt 0 view .LVU604
 2047 0000 38B5     		push	{r3, r4, r5, lr}
 2048              	.LCFI26:
 2049              		.cfi_def_cfa_offset 16
 2050              		.cfi_offset 3, -16
 2051              		.cfi_offset 4, -12
 2052              		.cfi_offset 5, -8
 2053              		.cfi_offset 14, -4
 2054 0002 0446     		mov	r4, r0
 506:lib/TinyUSB/src/common/tusb_fifo.c ****   bool ret;
 2055              		.loc 1 506 3 is_stmt 1 view .LVU605
 507:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_wr);
 2056              		.loc 1 507 23 view .LVU606
 508:lib/TinyUSB/src/common/tusb_fifo.c **** 
 509:lib/TinyUSB/src/common/tusb_fifo.c ****   const uint16_t wr_idx = f->wr_idx;
 2057              		.loc 1 509 3 view .LVU607
 2058              		.loc 1 509 18 is_stmt 0 view .LVU608
 2059 0004 0589     		ldrh	r5, [r0, #8]
 2060 0006 ADB2     		uxth	r5, r5
 2061              	.LVL250:
 510:lib/TinyUSB/src/common/tusb_fifo.c **** 
 511:lib/TinyUSB/src/common/tusb_fifo.c ****   if (tu_fifo_full(f) && !f->overwritable) {
 2062              		.loc 1 511 3 is_stmt 1 view .LVU609
 2063              	.LBB168:
 2064              	.LBI168:
 259:lib/TinyUSB/src/common/tusb_fifo.h **** }
 260:lib/TinyUSB/src/common/tusb_fifo.h **** 
 261:lib/TinyUSB/src/common/tusb_fifo.h **** // check if fifo is full
 262:lib/TinyUSB/src/common/tusb_fifo.h **** TU_ATTR_ALWAYS_INLINE static inline bool tu_fifo_full(const tu_fifo_t *f) {
 2065              		.loc 3 262 42 view .LVU610
 2066              	.LBB169:
 263:lib/TinyUSB/src/common/tusb_fifo.h ****   return tu_ff_overflow_count(f->depth, f->wr_idx, f->rd_idx) >= f->depth;
 2067              		.loc 3 263 3 view .LVU611
 2068              		.loc 3 263 10 is_stmt 0 view .LVU612
 2069 0008 8288     		ldrh	r2, [r0, #4]
 2070 000a 0389     		ldrh	r3, [r0, #8]
 2071 000c 9BB2     		uxth	r3, r3
 2072 000e 4089     		ldrh	r0, [r0, #10]
 2073              	.LVL251:
 2074              		.loc 3 263 10 view .LVU613
 2075 0010 80B2     		uxth	r0, r0
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 65


 2076              	.LVL252:
 2077              	.LBB170:
 2078              	.LBI170:
 226:lib/TinyUSB/src/common/tusb_fifo.h ****   const int32_t diff = (int32_t)wr_idx - (int32_t)rd_idx;
 2079              		.loc 3 226 46 is_stmt 1 view .LVU614
 2080              	.LBB171:
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 2081              		.loc 3 227 3 view .LVU615
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 2082              		.loc 3 227 17 is_stmt 0 view .LVU616
 2083 0012 A3EB000C 		sub	ip, r3, r0
 2084              	.LVL253:
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 2085              		.loc 3 228 3 is_stmt 1 view .LVU617
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 2086              		.loc 3 228 6 is_stmt 0 view .LVU618
 2087 0016 BCF1000F 		cmp	ip, #0
 2088 001a 08DB     		blt	.L102
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 2089              		.loc 3 229 5 is_stmt 1 view .LVU619
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 2090              		.loc 3 229 12 is_stmt 0 view .LVU620
 2091 001c 1FFA8CF3 		uxth	r3, ip
 2092              	.LVL254:
 2093              	.L103:
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 2094              		.loc 3 229 12 view .LVU621
 2095              	.LBE171:
 2096              	.LBE170:
 2097              	.LBE169:
 2098              	.LBE168:
 2099              		.loc 1 511 6 view .LVU622
 2100 0020 9A42     		cmp	r2, r3
 2101 0022 1DD8     		bhi	.L108
 2102              		.loc 1 511 28 discriminator 1 view .LVU623
 2103 0024 E079     		ldrb	r0, [r4, #7]	@ zero_extendqisi2
 2104              		.loc 1 511 23 discriminator 1 view .LVU624
 2105 0026 C009     		lsrs	r0, r0, #7
 2106 0028 19D0     		beq	.L105
 2107 002a 2B46     		mov	r3, r5
 2108 002c 06E0     		b	.L106
 2109              	.LVL255:
 2110              	.L102:
 2111              	.LBB175:
 2112              	.LBB174:
 2113              	.LBB173:
 2114              	.LBB172:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2115              		.loc 3 231 5 is_stmt 1 view .LVU625
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2116              		.loc 3 231 12 is_stmt 0 view .LVU626
 2117 002e 1B1A     		subs	r3, r3, r0
 2118              	.LVL256:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2119              		.loc 3 231 12 view .LVU627
 2120 0030 03EB4203 		add	r3, r3, r2, lsl #1
 2121 0034 9BB2     		uxth	r3, r3
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 66


 2122 0036 F3E7     		b	.L103
 2123              	.LVL257:
 2124              	.L107:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2125              		.loc 3 231 12 view .LVU628
 2126              	.LBE172:
 2127              	.LBE173:
 2128              	.LBE174:
 2129              	.LBE175:
 2130              	.LBB176:
 2131              	.LBB177:
 2132              	.LBB178:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2133              		.loc 1 309 5 is_stmt 1 view .LVU629
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2134              		.loc 1 309 9 is_stmt 0 view .LVU630
 2135 0038 9B1A     		subs	r3, r3, r2
 2136              	.LVL258:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2137              		.loc 1 309 9 view .LVU631
 2138 003a 9BB2     		uxth	r3, r3
 2139              	.LVL259:
 2140              	.L106:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2141              		.loc 1 308 9 is_stmt 1 view .LVU632
 2142 003c 9A42     		cmp	r2, r3
 2143 003e FBD9     		bls	.L107
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2144              		.loc 1 311 3 view .LVU633
 2145              	.LVL260:
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2146              		.loc 1 311 3 is_stmt 0 view .LVU634
 2147              	.LBE178:
 2148              	.LBE177:
 512:lib/TinyUSB/src/common/tusb_fifo.c ****     ret = false;
 513:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 514:lib/TinyUSB/src/common/tusb_fifo.c ****     const uint16_t wr_ptr = idx2ptr(f->depth, wr_idx);
 515:lib/TinyUSB/src/common/tusb_fifo.c ****     memcpy(f->buffer + (wr_ptr * f->item_size), data, f->item_size);
 2149              		.loc 1 515 5 is_stmt 1 view .LVU635
 2150              		.loc 1 515 13 is_stmt 0 view .LVU636
 2151 0040 2068     		ldr	r0, [r4]
 2152              		.loc 1 515 35 view .LVU637
 2153 0042 E288     		ldrh	r2, [r4, #6]
 2154 0044 C2F30E02 		ubfx	r2, r2, #0, #15
 2155              		.loc 1 515 5 view .LVU638
 2156 0048 02FB0300 		mla	r0, r2, r3, r0
 2157 004c FFF7FEFF 		bl	memcpy
 2158              	.LVL261:
 516:lib/TinyUSB/src/common/tusb_fifo.c ****     f->wr_idx = advance_index(f->depth, wr_idx, 1);
 2159              		.loc 1 516 5 is_stmt 1 view .LVU639
 2160              		.loc 1 516 17 is_stmt 0 view .LVU640
 2161 0050 0122     		movs	r2, #1
 2162 0052 2946     		mov	r1, r5
 2163 0054 A088     		ldrh	r0, [r4, #4]
 2164 0056 FFF7FEFF 		bl	advance_index
 2165              	.LVL262:
 2166              		.loc 1 516 15 view .LVU641
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 67


 2167 005a 2081     		strh	r0, [r4, #8]	@ movhi
 517:lib/TinyUSB/src/common/tusb_fifo.c ****     ret       = true;
 2168              		.loc 1 517 5 is_stmt 1 view .LVU642
 2169              	.LVL263:
 2170              		.loc 1 517 15 is_stmt 0 view .LVU643
 2171 005c 0120     		movs	r0, #1
 2172              	.LVL264:
 2173              	.L105:
 2174              		.loc 1 517 15 view .LVU644
 2175              	.LBE176:
 518:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 519:lib/TinyUSB/src/common/tusb_fifo.c **** 
 520:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_wr);
 2176              		.loc 1 520 25 is_stmt 1 view .LVU645
 521:lib/TinyUSB/src/common/tusb_fifo.c **** 
 522:lib/TinyUSB/src/common/tusb_fifo.c ****   return ret;
 2177              		.loc 1 522 3 view .LVU646
 523:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2178              		.loc 1 523 1 is_stmt 0 view .LVU647
 2179 005e 38BD     		pop	{r3, r4, r5, pc}
 2180              	.LVL265:
 2181              	.L108:
 2182              		.loc 1 523 1 view .LVU648
 2183 0060 2B46     		mov	r3, r5
 2184 0062 EBE7     		b	.L106
 2185              		.cfi_endproc
 2186              	.LFE93:
 2188              		.section	.text.tu_fifo_advance_write_pointer,"ax",%progbits
 2189              		.align	1
 2190              		.global	tu_fifo_advance_write_pointer
 2191              		.syntax unified
 2192              		.thumb
 2193              		.thumb_func
 2195              	tu_fifo_advance_write_pointer:
 2196              	.LVL266:
 2197              	.LFB94:
 524:lib/TinyUSB/src/common/tusb_fifo.c **** 
 525:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 526:lib/TinyUSB/src/common/tusb_fifo.c **** // Index API
 527:lib/TinyUSB/src/common/tusb_fifo.c **** //--------------------------------------------------------------------+
 528:lib/TinyUSB/src/common/tusb_fifo.c **** 
 529:lib/TinyUSB/src/common/tusb_fifo.c **** /******************************************************************************/
 530:lib/TinyUSB/src/common/tusb_fifo.c **** /*!
 531:lib/TinyUSB/src/common/tusb_fifo.c ****     @brief Advance write pointer - intended to be used in combination with DMA.
 532:lib/TinyUSB/src/common/tusb_fifo.c ****     It is possible to fill the FIFO by use of a DMA in circular mode. Within
 533:lib/TinyUSB/src/common/tusb_fifo.c ****     DMA ISRs you may update the write pointer to be able to read from the FIFO.
 534:lib/TinyUSB/src/common/tusb_fifo.c ****     As long as the DMA is the only process writing into the FIFO this is safe
 535:lib/TinyUSB/src/common/tusb_fifo.c ****     to use.
 536:lib/TinyUSB/src/common/tusb_fifo.c **** 
 537:lib/TinyUSB/src/common/tusb_fifo.c ****     USE WITH CARE - WE DO NOT CONDUCT SAFETY CHECKS HERE!
 538:lib/TinyUSB/src/common/tusb_fifo.c **** 
 539:lib/TinyUSB/src/common/tusb_fifo.c ****     @param[in]  f
 540:lib/TinyUSB/src/common/tusb_fifo.c ****                 Pointer to the FIFO buffer to manipulate
 541:lib/TinyUSB/src/common/tusb_fifo.c ****     @param[in]  n
 542:lib/TinyUSB/src/common/tusb_fifo.c ****                 Number of items the write pointer moves forward
 543:lib/TinyUSB/src/common/tusb_fifo.c ****  */
 544:lib/TinyUSB/src/common/tusb_fifo.c **** /******************************************************************************/
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 68


 545:lib/TinyUSB/src/common/tusb_fifo.c **** void tu_fifo_advance_write_pointer(tu_fifo_t *f, uint16_t n) {
 2198              		.loc 1 545 62 is_stmt 1 view -0
 2199              		.cfi_startproc
 2200              		@ args = 0, pretend = 0, frame = 0
 2201              		@ frame_needed = 0, uses_anonymous_args = 0
 2202              		.loc 1 545 62 is_stmt 0 view .LVU650
 2203 0000 10B5     		push	{r4, lr}
 2204              	.LCFI27:
 2205              		.cfi_def_cfa_offset 8
 2206              		.cfi_offset 4, -8
 2207              		.cfi_offset 14, -4
 2208 0002 0446     		mov	r4, r0
 2209 0004 0A46     		mov	r2, r1
 546:lib/TinyUSB/src/common/tusb_fifo.c ****   f->wr_idx = advance_index(f->depth, f->wr_idx, n);
 2210              		.loc 1 546 3 is_stmt 1 view .LVU651
 2211              		.loc 1 546 15 is_stmt 0 view .LVU652
 2212 0006 0189     		ldrh	r1, [r0, #8]
 2213              	.LVL267:
 2214              		.loc 1 546 15 view .LVU653
 2215 0008 89B2     		uxth	r1, r1
 2216 000a 8088     		ldrh	r0, [r0, #4]
 2217              	.LVL268:
 2218              		.loc 1 546 15 view .LVU654
 2219 000c FFF7FEFF 		bl	advance_index
 2220              	.LVL269:
 2221              		.loc 1 546 13 view .LVU655
 2222 0010 2081     		strh	r0, [r4, #8]	@ movhi
 547:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2223              		.loc 1 547 1 view .LVU656
 2224 0012 10BD     		pop	{r4, pc}
 2225              		.loc 1 547 1 view .LVU657
 2226              		.cfi_endproc
 2227              	.LFE94:
 2229              		.section	.text.tu_fifo_correct_read_pointer,"ax",%progbits
 2230              		.align	1
 2231              		.global	tu_fifo_correct_read_pointer
 2232              		.syntax unified
 2233              		.thumb
 2234              		.thumb_func
 2236              	tu_fifo_correct_read_pointer:
 2237              	.LVL270:
 2238              	.LFB95:
 548:lib/TinyUSB/src/common/tusb_fifo.c **** 
 549:lib/TinyUSB/src/common/tusb_fifo.c **** // Correct the read index in case tu_fifo_overflow() returned true!
 550:lib/TinyUSB/src/common/tusb_fifo.c **** void tu_fifo_correct_read_pointer(tu_fifo_t *f) {
 2239              		.loc 1 550 49 is_stmt 1 view -0
 2240              		.cfi_startproc
 2241              		@ args = 0, pretend = 0, frame = 0
 2242              		@ frame_needed = 0, uses_anonymous_args = 0
 2243              		.loc 1 550 49 is_stmt 0 view .LVU659
 2244 0000 08B5     		push	{r3, lr}
 2245              	.LCFI28:
 2246              		.cfi_def_cfa_offset 8
 2247              		.cfi_offset 3, -8
 2248              		.cfi_offset 14, -4
 551:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_lock(f->mutex_rd);
 2249              		.loc 1 551 23 is_stmt 1 view .LVU660
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 69


 552:lib/TinyUSB/src/common/tusb_fifo.c ****   correct_read_index(f, f->wr_idx);
 2250              		.loc 1 552 3 view .LVU661
 2251 0002 0189     		ldrh	r1, [r0, #8]
 2252 0004 89B2     		uxth	r1, r1
 2253 0006 FFF7FEFF 		bl	correct_read_index
 2254              	.LVL271:
 553:lib/TinyUSB/src/common/tusb_fifo.c ****   ff_unlock(f->mutex_rd);
 2255              		.loc 1 553 25 view .LVU662
 554:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2256              		.loc 1 554 1 is_stmt 0 view .LVU663
 2257 000a 08BD     		pop	{r3, pc}
 2258              		.cfi_endproc
 2259              	.LFE95:
 2261              		.section	.text.tu_fifo_advance_read_pointer,"ax",%progbits
 2262              		.align	1
 2263              		.global	tu_fifo_advance_read_pointer
 2264              		.syntax unified
 2265              		.thumb
 2266              		.thumb_func
 2268              	tu_fifo_advance_read_pointer:
 2269              	.LVL272:
 2270              	.LFB96:
 555:lib/TinyUSB/src/common/tusb_fifo.c **** 
 556:lib/TinyUSB/src/common/tusb_fifo.c **** /******************************************************************************/
 557:lib/TinyUSB/src/common/tusb_fifo.c **** /*!
 558:lib/TinyUSB/src/common/tusb_fifo.c ****     @brief Advance read pointer - intended to be used in combination with DMA.
 559:lib/TinyUSB/src/common/tusb_fifo.c ****     It is possible to read from the FIFO by use of a DMA in linear mode. Within
 560:lib/TinyUSB/src/common/tusb_fifo.c ****     DMA ISRs you may update the read pointer to be able to again write into the
 561:lib/TinyUSB/src/common/tusb_fifo.c ****     FIFO. As long as the DMA is the only process reading from the FIFO this is
 562:lib/TinyUSB/src/common/tusb_fifo.c ****     safe to use.
 563:lib/TinyUSB/src/common/tusb_fifo.c **** 
 564:lib/TinyUSB/src/common/tusb_fifo.c ****     USE WITH CARE - WE DO NOT CONDUCT SAFETY CHECKS HERE!
 565:lib/TinyUSB/src/common/tusb_fifo.c **** 
 566:lib/TinyUSB/src/common/tusb_fifo.c ****     @param[in]  f
 567:lib/TinyUSB/src/common/tusb_fifo.c ****                 Pointer to the FIFO buffer to manipulate
 568:lib/TinyUSB/src/common/tusb_fifo.c ****     @param[in]  n
 569:lib/TinyUSB/src/common/tusb_fifo.c ****                 Number of items the read pointer moves forward
 570:lib/TinyUSB/src/common/tusb_fifo.c ****  */
 571:lib/TinyUSB/src/common/tusb_fifo.c **** /******************************************************************************/
 572:lib/TinyUSB/src/common/tusb_fifo.c **** void tu_fifo_advance_read_pointer(tu_fifo_t *f, uint16_t n) {
 2271              		.loc 1 572 61 is_stmt 1 view -0
 2272              		.cfi_startproc
 2273              		@ args = 0, pretend = 0, frame = 0
 2274              		@ frame_needed = 0, uses_anonymous_args = 0
 2275              		.loc 1 572 61 is_stmt 0 view .LVU665
 2276 0000 10B5     		push	{r4, lr}
 2277              	.LCFI29:
 2278              		.cfi_def_cfa_offset 8
 2279              		.cfi_offset 4, -8
 2280              		.cfi_offset 14, -4
 2281 0002 0446     		mov	r4, r0
 2282 0004 0A46     		mov	r2, r1
 573:lib/TinyUSB/src/common/tusb_fifo.c ****   f->rd_idx = advance_index(f->depth, f->rd_idx, n);
 2283              		.loc 1 573 3 is_stmt 1 view .LVU666
 2284              		.loc 1 573 15 is_stmt 0 view .LVU667
 2285 0006 4189     		ldrh	r1, [r0, #10]
 2286              	.LVL273:
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 70


 2287              		.loc 1 573 15 view .LVU668
 2288 0008 89B2     		uxth	r1, r1
 2289 000a 8088     		ldrh	r0, [r0, #4]
 2290              	.LVL274:
 2291              		.loc 1 573 15 view .LVU669
 2292 000c FFF7FEFF 		bl	advance_index
 2293              	.LVL275:
 2294              		.loc 1 573 13 view .LVU670
 2295 0010 6081     		strh	r0, [r4, #10]	@ movhi
 574:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2296              		.loc 1 574 1 view .LVU671
 2297 0012 10BD     		pop	{r4, pc}
 2298              		.loc 1 574 1 view .LVU672
 2299              		.cfi_endproc
 2300              	.LFE96:
 2302              		.section	.text.tu_fifo_get_read_info,"ax",%progbits
 2303              		.align	1
 2304              		.global	tu_fifo_get_read_info
 2305              		.syntax unified
 2306              		.thumb
 2307              		.thumb_func
 2309              	tu_fifo_get_read_info:
 2310              	.LVL276:
 2311              	.LFB97:
 575:lib/TinyUSB/src/common/tusb_fifo.c **** 
 576:lib/TinyUSB/src/common/tusb_fifo.c **** /******************************************************************************/
 577:lib/TinyUSB/src/common/tusb_fifo.c **** /*!
 578:lib/TinyUSB/src/common/tusb_fifo.c ****    @brief Get read info
 579:lib/TinyUSB/src/common/tusb_fifo.c **** 
 580:lib/TinyUSB/src/common/tusb_fifo.c ****    Returns the length and pointer from which bytes can be read in a linear manner.
 581:lib/TinyUSB/src/common/tusb_fifo.c ****    This is of major interest for DMA transmissions. If returned length is zero the
 582:lib/TinyUSB/src/common/tusb_fifo.c ****    corresponding pointer is invalid.
 583:lib/TinyUSB/src/common/tusb_fifo.c ****    The read pointer does NOT get advanced, use tu_fifo_advance_read_pointer() to
 584:lib/TinyUSB/src/common/tusb_fifo.c ****    do so!
 585:lib/TinyUSB/src/common/tusb_fifo.c ****    @param[in]       f
 586:lib/TinyUSB/src/common/tusb_fifo.c ****                     Pointer to FIFO
 587:lib/TinyUSB/src/common/tusb_fifo.c ****    @param[out]      *info
 588:lib/TinyUSB/src/common/tusb_fifo.c ****                     Pointer to struct which holds the desired infos
 589:lib/TinyUSB/src/common/tusb_fifo.c ****  */
 590:lib/TinyUSB/src/common/tusb_fifo.c **** /******************************************************************************/
 591:lib/TinyUSB/src/common/tusb_fifo.c **** void tu_fifo_get_read_info(tu_fifo_t *f, tu_fifo_buffer_info_t *info) {
 2312              		.loc 1 591 71 is_stmt 1 view -0
 2313              		.cfi_startproc
 2314              		@ args = 0, pretend = 0, frame = 0
 2315              		@ frame_needed = 0, uses_anonymous_args = 0
 2316              		.loc 1 591 71 is_stmt 0 view .LVU674
 2317 0000 70B5     		push	{r4, r5, r6, lr}
 2318              	.LCFI30:
 2319              		.cfi_def_cfa_offset 16
 2320              		.cfi_offset 4, -16
 2321              		.cfi_offset 5, -12
 2322              		.cfi_offset 6, -8
 2323              		.cfi_offset 14, -4
 2324 0002 0546     		mov	r5, r0
 2325 0004 0E46     		mov	r6, r1
 592:lib/TinyUSB/src/common/tusb_fifo.c ****   // Operate on temporary values in case they change in between
 593:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wr_idx = f->wr_idx;
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 71


 2326              		.loc 1 593 3 is_stmt 1 view .LVU675
 2327              		.loc 1 593 12 is_stmt 0 view .LVU676
 2328 0006 0489     		ldrh	r4, [r0, #8]
 2329 0008 A4B2     		uxth	r4, r4
 2330              	.LVL277:
 594:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t rd_idx = f->rd_idx;
 2331              		.loc 1 594 3 is_stmt 1 view .LVU677
 2332              		.loc 1 594 12 is_stmt 0 view .LVU678
 2333 000a 4389     		ldrh	r3, [r0, #10]
 2334 000c 9BB2     		uxth	r3, r3
 2335              	.LVL278:
 595:lib/TinyUSB/src/common/tusb_fifo.c **** 
 596:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t cnt = tu_ff_overflow_count(f->depth, wr_idx, rd_idx);
 2336              		.loc 1 596 3 is_stmt 1 view .LVU679
 2337              		.loc 1 596 18 is_stmt 0 view .LVU680
 2338 000e 8288     		ldrh	r2, [r0, #4]
 2339              	.LVL279:
 2340              	.LBB179:
 2341              	.LBI179:
 226:lib/TinyUSB/src/common/tusb_fifo.h ****   const int32_t diff = (int32_t)wr_idx - (int32_t)rd_idx;
 2342              		.loc 3 226 46 is_stmt 1 view .LVU681
 2343              	.LBB180:
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 2344              		.loc 3 227 3 view .LVU682
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 2345              		.loc 3 227 17 is_stmt 0 view .LVU683
 2346 0010 E11A     		subs	r1, r4, r3
 2347              	.LVL280:
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 2348              		.loc 3 228 3 is_stmt 1 view .LVU684
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 2349              		.loc 3 228 6 is_stmt 0 view .LVU685
 2350 0012 0029     		cmp	r1, #0
 2351 0014 05DB     		blt	.L118
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 2352              		.loc 3 229 5 is_stmt 1 view .LVU686
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 2353              		.loc 3 229 12 is_stmt 0 view .LVU687
 2354 0016 88B2     		uxth	r0, r1
 2355              	.LVL281:
 2356              	.L119:
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 2357              		.loc 3 229 12 view .LVU688
 2358              	.LBE180:
 2359              	.LBE179:
 597:lib/TinyUSB/src/common/tusb_fifo.c **** 
 598:lib/TinyUSB/src/common/tusb_fifo.c ****   // Check overflow and correct if required - may happen in case a DMA wrote too fast
 599:lib/TinyUSB/src/common/tusb_fifo.c ****   if (cnt > f->depth) {
 2360              		.loc 1 599 3 is_stmt 1 view .LVU689
 2361              		.loc 1 599 6 is_stmt 0 view .LVU690
 2362 0018 8242     		cmp	r2, r0
 2363 001a 07D3     		bcc	.L129
 2364              	.L120:
 600:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_lock(f->mutex_rd);
 601:lib/TinyUSB/src/common/tusb_fifo.c ****     rd_idx = correct_read_index(f, wr_idx);
 602:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 603:lib/TinyUSB/src/common/tusb_fifo.c **** 
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 72


 604:lib/TinyUSB/src/common/tusb_fifo.c ****     cnt = f->depth;
 605:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 606:lib/TinyUSB/src/common/tusb_fifo.c **** 
 607:lib/TinyUSB/src/common/tusb_fifo.c ****   // Check if fifo is empty
 608:lib/TinyUSB/src/common/tusb_fifo.c ****   if (cnt == 0) {
 2365              		.loc 1 608 3 is_stmt 1 view .LVU691
 2366              		.loc 1 608 6 is_stmt 0 view .LVU692
 2367 001c 68B1     		cbz	r0, .L130
 609:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.len  = 0;
 610:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 611:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.ptr  = NULL;
 612:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 613:lib/TinyUSB/src/common/tusb_fifo.c ****     return;
 614:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 615:lib/TinyUSB/src/common/tusb_fifo.c **** 
 616:lib/TinyUSB/src/common/tusb_fifo.c ****   // Get relative pointers
 617:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wr_ptr = idx2ptr(f->depth, wr_idx);
 2368              		.loc 1 617 3 is_stmt 1 view .LVU693
 2369              		.loc 1 617 21 is_stmt 0 view .LVU694
 2370 001e AA88     		ldrh	r2, [r5, #4]
 2371              	.LVL282:
 2372              	.LBB182:
 2373              	.LBI182:
 306:lib/TinyUSB/src/common/tusb_fifo.c ****   // Only run at most 3 times since index is limit in the range of [0..2*depth)
 2374              		.loc 1 306 46 is_stmt 1 view .LVU695
 2375              	.LBB183:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2376              		.loc 1 308 3 view .LVU696
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2377              		.loc 1 308 9 is_stmt 0 view .LVU697
 2378 0020 13E0     		b	.L123
 2379              	.LVL283:
 2380              	.L118:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2381              		.loc 1 308 9 view .LVU698
 2382              	.LBE183:
 2383              	.LBE182:
 2384              	.LBB185:
 2385              	.LBB181:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2386              		.loc 3 231 5 is_stmt 1 view .LVU699
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2387              		.loc 3 231 12 is_stmt 0 view .LVU700
 2388 0022 E01A     		subs	r0, r4, r3
 2389              	.LVL284:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2390              		.loc 3 231 12 view .LVU701
 2391 0024 00EB4200 		add	r0, r0, r2, lsl #1
 2392 0028 80B2     		uxth	r0, r0
 2393 002a F5E7     		b	.L119
 2394              	.LVL285:
 2395              	.L129:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2396              		.loc 3 231 12 view .LVU702
 2397              	.LBE181:
 2398              	.LBE185:
 600:lib/TinyUSB/src/common/tusb_fifo.c ****     rd_idx = correct_read_index(f, wr_idx);
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 73


 2399              		.loc 1 600 25 is_stmt 1 view .LVU703
 601:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 2400              		.loc 1 601 5 view .LVU704
 601:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 2401              		.loc 1 601 14 is_stmt 0 view .LVU705
 2402 002c 2146     		mov	r1, r4
 2403 002e 2846     		mov	r0, r5
 2404              	.LVL286:
 601:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 2405              		.loc 1 601 14 view .LVU706
 2406 0030 FFF7FEFF 		bl	correct_read_index
 2407              	.LVL287:
 601:lib/TinyUSB/src/common/tusb_fifo.c ****     ff_unlock(f->mutex_rd);
 2408              		.loc 1 601 14 view .LVU707
 2409 0034 0346     		mov	r3, r0
 2410              	.LVL288:
 602:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2411              		.loc 1 602 27 is_stmt 1 view .LVU708
 604:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2412              		.loc 1 604 5 view .LVU709
 604:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2413              		.loc 1 604 9 is_stmt 0 view .LVU710
 2414 0036 A888     		ldrh	r0, [r5, #4]
 2415              	.LVL289:
 604:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2416              		.loc 1 604 9 view .LVU711
 2417 0038 F0E7     		b	.L120
 2418              	.L130:
 609:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 2419              		.loc 1 609 5 is_stmt 1 view .LVU712
 609:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 2420              		.loc 1 609 23 is_stmt 0 view .LVU713
 2421 003a 0023     		movs	r3, #0
 2422              	.LVL290:
 609:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 2423              		.loc 1 609 23 view .LVU714
 2424 003c 3380     		strh	r3, [r6]	@ movhi
 610:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.ptr  = NULL;
 2425              		.loc 1 610 5 is_stmt 1 view .LVU715
 610:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.ptr  = NULL;
 2426              		.loc 1 610 23 is_stmt 0 view .LVU716
 2427 003e 3381     		strh	r3, [r6, #8]	@ movhi
 611:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 2428              		.loc 1 611 5 is_stmt 1 view .LVU717
 611:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 2429              		.loc 1 611 23 is_stmt 0 view .LVU718
 2430 0040 7360     		str	r3, [r6, #4]
 612:lib/TinyUSB/src/common/tusb_fifo.c ****     return;
 2431              		.loc 1 612 5 is_stmt 1 view .LVU719
 612:lib/TinyUSB/src/common/tusb_fifo.c ****     return;
 2432              		.loc 1 612 23 is_stmt 0 view .LVU720
 2433 0042 F360     		str	r3, [r6, #12]
 613:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2434              		.loc 1 613 5 is_stmt 1 view .LVU721
 2435              	.LVL291:
 2436              	.L117:
 618:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t rd_ptr = idx2ptr(f->depth, rd_idx);
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 74


 619:lib/TinyUSB/src/common/tusb_fifo.c **** 
 620:lib/TinyUSB/src/common/tusb_fifo.c ****   // Copy pointer to buffer to start reading from
 621:lib/TinyUSB/src/common/tusb_fifo.c ****   info->linear.ptr = &f->buffer[rd_ptr];
 622:lib/TinyUSB/src/common/tusb_fifo.c **** 
 623:lib/TinyUSB/src/common/tusb_fifo.c ****   // Check if there is a wrap around necessary
 624:lib/TinyUSB/src/common/tusb_fifo.c ****   if (wr_ptr > rd_ptr) {
 625:lib/TinyUSB/src/common/tusb_fifo.c ****     // Non wrapping case
 626:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.len = cnt;
 627:lib/TinyUSB/src/common/tusb_fifo.c **** 
 628:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 629:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 630:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 631:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.len = f->depth - rd_ptr; // Also the case if FIFO was full
 632:lib/TinyUSB/src/common/tusb_fifo.c **** 
 633:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = cnt - info->linear.len;
 634:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = f->buffer;
 635:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 636:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2437              		.loc 1 636 1 is_stmt 0 view .LVU722
 2438 0044 70BD     		pop	{r4, r5, r6, pc}
 2439              	.LVL292:
 2440              	.L124:
 2441              	.LBB186:
 2442              	.LBB184:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2443              		.loc 1 309 5 is_stmt 1 view .LVU723
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2444              		.loc 1 309 9 is_stmt 0 view .LVU724
 2445 0046 A41A     		subs	r4, r4, r2
 2446              	.LVL293:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2447              		.loc 1 309 9 view .LVU725
 2448 0048 A4B2     		uxth	r4, r4
 2449              	.LVL294:
 2450              	.L123:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2451              		.loc 1 308 9 is_stmt 1 view .LVU726
 2452 004a A242     		cmp	r2, r4
 2453 004c FBD9     		bls	.L124
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2454              		.loc 1 308 9 is_stmt 0 view .LVU727
 2455 004e 01E0     		b	.L125
 2456              	.LVL295:
 2457              	.L126:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2458              		.loc 1 308 9 view .LVU728
 2459              	.LBE184:
 2460              	.LBE186:
 2461              	.LBB187:
 2462              	.LBB188:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2463              		.loc 1 309 5 is_stmt 1 view .LVU729
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2464              		.loc 1 309 9 is_stmt 0 view .LVU730
 2465 0050 9B1A     		subs	r3, r3, r2
 2466              	.LVL296:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 75


 2467              		.loc 1 309 9 view .LVU731
 2468 0052 9BB2     		uxth	r3, r3
 2469              	.LVL297:
 2470              	.L125:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2471              		.loc 1 308 9 is_stmt 1 view .LVU732
 2472 0054 9A42     		cmp	r2, r3
 2473 0056 FBD9     		bls	.L126
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2474              		.loc 1 311 3 view .LVU733
 2475              	.LVL298:
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2476              		.loc 1 311 3 is_stmt 0 view .LVU734
 2477              	.LBE188:
 2478              	.LBE187:
 621:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2479              		.loc 1 621 3 is_stmt 1 view .LVU735
 621:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2480              		.loc 1 621 24 is_stmt 0 view .LVU736
 2481 0058 2A68     		ldr	r2, [r5]
 621:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2482              		.loc 1 621 22 view .LVU737
 2483 005a 1A44     		add	r2, r2, r3
 621:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2484              		.loc 1 621 20 view .LVU738
 2485 005c 7260     		str	r2, [r6, #4]
 624:lib/TinyUSB/src/common/tusb_fifo.c ****     // Non wrapping case
 2486              		.loc 1 624 3 is_stmt 1 view .LVU739
 624:lib/TinyUSB/src/common/tusb_fifo.c ****     // Non wrapping case
 2487              		.loc 1 624 6 is_stmt 0 view .LVU740
 2488 005e A342     		cmp	r3, r4
 2489 0060 04D2     		bcs	.L127
 626:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2490              		.loc 1 626 5 is_stmt 1 view .LVU741
 626:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2491              		.loc 1 626 22 is_stmt 0 view .LVU742
 2492 0062 3080     		strh	r0, [r6]	@ movhi
 628:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 2493              		.loc 1 628 5 is_stmt 1 view .LVU743
 628:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 2494              		.loc 1 628 23 is_stmt 0 view .LVU744
 2495 0064 0023     		movs	r3, #0
 2496              	.LVL299:
 628:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 2497              		.loc 1 628 23 view .LVU745
 2498 0066 3381     		strh	r3, [r6, #8]	@ movhi
 629:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 2499              		.loc 1 629 5 is_stmt 1 view .LVU746
 629:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 2500              		.loc 1 629 23 is_stmt 0 view .LVU747
 2501 0068 F360     		str	r3, [r6, #12]
 2502 006a EBE7     		b	.L117
 2503              	.LVL300:
 2504              	.L127:
 631:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2505              		.loc 1 631 5 is_stmt 1 view .LVU748
 631:lib/TinyUSB/src/common/tusb_fifo.c **** 
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 76


 2506              		.loc 1 631 25 is_stmt 0 view .LVU749
 2507 006c AA88     		ldrh	r2, [r5, #4]
 631:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2508              		.loc 1 631 33 view .LVU750
 2509 006e D31A     		subs	r3, r2, r3
 2510              	.LVL301:
 631:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2511              		.loc 1 631 33 view .LVU751
 2512 0070 9BB2     		uxth	r3, r3
 631:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2513              		.loc 1 631 22 view .LVU752
 2514 0072 3380     		strh	r3, [r6]	@ movhi
 633:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = f->buffer;
 2515              		.loc 1 633 5 is_stmt 1 view .LVU753
 633:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = f->buffer;
 2516              		.loc 1 633 29 is_stmt 0 view .LVU754
 2517 0074 C01A     		subs	r0, r0, r3
 2518              	.LVL302:
 633:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = f->buffer;
 2519              		.loc 1 633 23 view .LVU755
 2520 0076 3081     		strh	r0, [r6, #8]	@ movhi
 634:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2521              		.loc 1 634 5 is_stmt 1 view .LVU756
 634:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2522              		.loc 1 634 26 is_stmt 0 view .LVU757
 2523 0078 2B68     		ldr	r3, [r5]
 634:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2524              		.loc 1 634 23 view .LVU758
 2525 007a F360     		str	r3, [r6, #12]
 2526 007c E2E7     		b	.L117
 2527              		.cfi_endproc
 2528              	.LFE97:
 2530              		.section	.text.tu_fifo_get_write_info,"ax",%progbits
 2531              		.align	1
 2532              		.global	tu_fifo_get_write_info
 2533              		.syntax unified
 2534              		.thumb
 2535              		.thumb_func
 2537              	tu_fifo_get_write_info:
 2538              	.LVL303:
 2539              	.LFB98:
 637:lib/TinyUSB/src/common/tusb_fifo.c **** 
 638:lib/TinyUSB/src/common/tusb_fifo.c **** /******************************************************************************/
 639:lib/TinyUSB/src/common/tusb_fifo.c **** /*!
 640:lib/TinyUSB/src/common/tusb_fifo.c ****    @brief Get linear write info
 641:lib/TinyUSB/src/common/tusb_fifo.c **** 
 642:lib/TinyUSB/src/common/tusb_fifo.c ****    Returns the length and pointer to which bytes can be written into FIFO in a linear manner.
 643:lib/TinyUSB/src/common/tusb_fifo.c ****    This is of major interest for DMA transmissions not using circular mode. If a returned length is
 644:lib/TinyUSB/src/common/tusb_fifo.c ****    corresponding pointer is invalid. The returned lengths summed up are the currently free space in
 645:lib/TinyUSB/src/common/tusb_fifo.c ****    The write pointer does NOT get advanced, use tu_fifo_advance_write_pointer() to do so!
 646:lib/TinyUSB/src/common/tusb_fifo.c ****    TAKE CARE TO NOT OVERFLOW THE BUFFER MORE THAN TWO TIMES THE FIFO DEPTH - IT CAN NOT RECOVERE OT
 647:lib/TinyUSB/src/common/tusb_fifo.c ****    @param[in]       f
 648:lib/TinyUSB/src/common/tusb_fifo.c ****                     Pointer to FIFO
 649:lib/TinyUSB/src/common/tusb_fifo.c ****    @param[out]      *info
 650:lib/TinyUSB/src/common/tusb_fifo.c ****                     Pointer to struct which holds the desired infos
 651:lib/TinyUSB/src/common/tusb_fifo.c ****  */
 652:lib/TinyUSB/src/common/tusb_fifo.c **** /******************************************************************************/
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 77


 653:lib/TinyUSB/src/common/tusb_fifo.c **** void tu_fifo_get_write_info(tu_fifo_t *f, tu_fifo_buffer_info_t *info) {
 2540              		.loc 1 653 72 is_stmt 1 view -0
 2541              		.cfi_startproc
 2542              		@ args = 0, pretend = 0, frame = 0
 2543              		@ frame_needed = 0, uses_anonymous_args = 0
 2544              		.loc 1 653 72 is_stmt 0 view .LVU760
 2545 0000 30B5     		push	{r4, r5, lr}
 2546              	.LCFI31:
 2547              		.cfi_def_cfa_offset 12
 2548              		.cfi_offset 4, -12
 2549              		.cfi_offset 5, -8
 2550              		.cfi_offset 14, -4
 654:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wr_idx = f->wr_idx;
 2551              		.loc 1 654 3 is_stmt 1 view .LVU761
 2552              		.loc 1 654 12 is_stmt 0 view .LVU762
 2553 0002 0389     		ldrh	r3, [r0, #8]
 2554 0004 9BB2     		uxth	r3, r3
 2555              	.LVL304:
 655:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t rd_idx = f->rd_idx;
 2556              		.loc 1 655 3 is_stmt 1 view .LVU763
 2557              		.loc 1 655 12 is_stmt 0 view .LVU764
 2558 0006 4289     		ldrh	r2, [r0, #10]
 2559 0008 92B2     		uxth	r2, r2
 2560              	.LVL305:
 656:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t remain = tu_ff_remaining_local(f->depth, wr_idx, rd_idx);
 2561              		.loc 1 656 3 is_stmt 1 view .LVU765
 2562              		.loc 1 656 21 is_stmt 0 view .LVU766
 2563 000a B0F804C0 		ldrh	ip, [r0, #4]
 2564              	.LVL306:
 2565              	.LBB189:
 2566              	.LBI189:
 236:lib/TinyUSB/src/common/tusb_fifo.h ****   const uint16_t ovf_count = tu_ff_overflow_count(depth, wr_idx, rd_idx);
 2567              		.loc 3 236 46 is_stmt 1 view .LVU767
 2568              	.LBB190:
 237:lib/TinyUSB/src/common/tusb_fifo.h ****   return (depth > ovf_count) ? (depth - ovf_count) : 0;
 2569              		.loc 3 237 3 view .LVU768
 2570              	.LBB191:
 2571              	.LBI191:
 226:lib/TinyUSB/src/common/tusb_fifo.h ****   const int32_t diff = (int32_t)wr_idx - (int32_t)rd_idx;
 2572              		.loc 3 226 46 view .LVU769
 2573              	.LBB192:
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 2574              		.loc 3 227 3 view .LVU770
 227:lib/TinyUSB/src/common/tusb_fifo.h ****   if (diff >= 0) {
 2575              		.loc 3 227 17 is_stmt 0 view .LVU771
 2576 000e 9C1A     		subs	r4, r3, r2
 2577              	.LVL307:
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 2578              		.loc 3 228 3 is_stmt 1 view .LVU772
 228:lib/TinyUSB/src/common/tusb_fifo.h ****     return (uint16_t)diff;
 2579              		.loc 3 228 6 is_stmt 0 view .LVU773
 2580 0010 002C     		cmp	r4, #0
 2581 0012 0EDB     		blt	.L132
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 2582              		.loc 3 229 5 is_stmt 1 view .LVU774
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 2583              		.loc 3 229 12 is_stmt 0 view .LVU775
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 78


 2584 0014 1FFA84FE 		uxth	lr, r4
 2585              	.L133:
 2586              	.LVL308:
 229:lib/TinyUSB/src/common/tusb_fifo.h ****   } else {
 2587              		.loc 3 229 12 view .LVU776
 2588              	.LBE192:
 2589              	.LBE191:
 238:lib/TinyUSB/src/common/tusb_fifo.h **** }
 2590              		.loc 3 238 3 is_stmt 1 view .LVU777
 238:lib/TinyUSB/src/common/tusb_fifo.h **** }
 2591              		.loc 3 238 52 is_stmt 0 view .LVU778
 2592 0018 F445     		cmp	ip, lr
 2593 001a 04D9     		bls	.L134
 2594 001c ACEB0E0E 		sub	lr, ip, lr
 2595              	.LVL309:
 238:lib/TinyUSB/src/common/tusb_fifo.h **** }
 2596              		.loc 3 238 52 view .LVU779
 2597 0020 1FFA8EF4 		uxth	r4, lr
 2598              	.LVL310:
 238:lib/TinyUSB/src/common/tusb_fifo.h **** }
 2599              		.loc 3 238 52 view .LVU780
 2600              	.LBE190:
 2601              	.LBE189:
 657:lib/TinyUSB/src/common/tusb_fifo.c **** 
 658:lib/TinyUSB/src/common/tusb_fifo.c ****   if (remain == 0) {
 2602              		.loc 1 658 3 is_stmt 1 view .LVU781
 2603              		.loc 1 658 6 is_stmt 0 view .LVU782
 2604 0024 7CB9     		cbnz	r4, .L135
 2605              	.LVL311:
 2606              	.L134:
 659:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.len  = 0;
 2607              		.loc 1 659 5 is_stmt 1 view .LVU783
 2608              		.loc 1 659 23 is_stmt 0 view .LVU784
 2609 0026 0023     		movs	r3, #0
 2610              	.LVL312:
 2611              		.loc 1 659 23 view .LVU785
 2612 0028 0B80     		strh	r3, [r1]	@ movhi
 660:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 2613              		.loc 1 660 5 is_stmt 1 view .LVU786
 2614              		.loc 1 660 23 is_stmt 0 view .LVU787
 2615 002a 0B81     		strh	r3, [r1, #8]	@ movhi
 661:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.ptr  = NULL;
 2616              		.loc 1 661 5 is_stmt 1 view .LVU788
 2617              		.loc 1 661 23 is_stmt 0 view .LVU789
 2618 002c 4B60     		str	r3, [r1, #4]
 662:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 2619              		.loc 1 662 5 is_stmt 1 view .LVU790
 2620              		.loc 1 662 23 is_stmt 0 view .LVU791
 2621 002e CB60     		str	r3, [r1, #12]
 663:lib/TinyUSB/src/common/tusb_fifo.c ****     return;
 2622              		.loc 1 663 5 is_stmt 1 view .LVU792
 2623              	.LVL313:
 2624              	.L131:
 664:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 665:lib/TinyUSB/src/common/tusb_fifo.c **** 
 666:lib/TinyUSB/src/common/tusb_fifo.c ****   // Get relative pointers
 667:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t wr_ptr = idx2ptr(f->depth, wr_idx);
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 79


 668:lib/TinyUSB/src/common/tusb_fifo.c ****   uint16_t rd_ptr = idx2ptr(f->depth, rd_idx);
 669:lib/TinyUSB/src/common/tusb_fifo.c **** 
 670:lib/TinyUSB/src/common/tusb_fifo.c ****   // Copy pointer to buffer to start writing to
 671:lib/TinyUSB/src/common/tusb_fifo.c ****   info->linear.ptr = &f->buffer[wr_ptr];
 672:lib/TinyUSB/src/common/tusb_fifo.c **** 
 673:lib/TinyUSB/src/common/tusb_fifo.c ****   if (wr_ptr < rd_ptr) {
 674:lib/TinyUSB/src/common/tusb_fifo.c ****     // Non wrapping case
 675:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.len  = rd_ptr - wr_ptr;
 676:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 677:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 678:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 679:lib/TinyUSB/src/common/tusb_fifo.c ****     info->linear.len  = f->depth - wr_ptr;
 680:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = remain - info->linear.len; // Remaining length - n already was limited to r
 681:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = f->buffer;              // Always start of buffer
 682:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 683:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2625              		.loc 1 683 1 is_stmt 0 view .LVU793
 2626 0030 30BD     		pop	{r4, r5, pc}
 2627              	.LVL314:
 2628              	.L132:
 2629              	.LBB196:
 2630              	.LBB195:
 2631              	.LBB194:
 2632              	.LBB193:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2633              		.loc 3 231 5 is_stmt 1 view .LVU794
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2634              		.loc 3 231 12 is_stmt 0 view .LVU795
 2635 0032 A3EB020E 		sub	lr, r3, r2
 2636 0036 0EEB4C0E 		add	lr, lr, ip, lsl #1
 2637 003a 1FFA8EFE 		uxth	lr, lr
 2638 003e EBE7     		b	.L133
 2639              	.LVL315:
 2640              	.L137:
 231:lib/TinyUSB/src/common/tusb_fifo.h ****   }
 2641              		.loc 3 231 12 view .LVU796
 2642              	.LBE193:
 2643              	.LBE194:
 2644              	.LBE195:
 2645              	.LBE196:
 2646              	.LBB197:
 2647              	.LBB198:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2648              		.loc 1 309 5 is_stmt 1 view .LVU797
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2649              		.loc 1 309 9 is_stmt 0 view .LVU798
 2650 0040 A3EB0C03 		sub	r3, r3, ip
 2651              	.LVL316:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2652              		.loc 1 309 9 view .LVU799
 2653 0044 9BB2     		uxth	r3, r3
 2654              	.LVL317:
 2655              	.L135:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2656              		.loc 1 308 9 is_stmt 1 view .LVU800
 2657 0046 9C45     		cmp	ip, r3
 2658 0048 FAD9     		bls	.L137
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 80


 2659 004a 02E0     		b	.L138
 2660              	.LVL318:
 2661              	.L139:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2662              		.loc 1 308 9 is_stmt 0 view .LVU801
 2663              	.LBE198:
 2664              	.LBE197:
 2665              	.LBB199:
 2666              	.LBB200:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2667              		.loc 1 309 5 is_stmt 1 view .LVU802
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2668              		.loc 1 309 9 is_stmt 0 view .LVU803
 2669 004c A2EB0C02 		sub	r2, r2, ip
 2670              	.LVL319:
 309:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2671              		.loc 1 309 9 view .LVU804
 2672 0050 92B2     		uxth	r2, r2
 2673              	.LVL320:
 2674              	.L138:
 308:lib/TinyUSB/src/common/tusb_fifo.c ****     idx -= depth;
 2675              		.loc 1 308 9 is_stmt 1 view .LVU805
 2676 0052 9445     		cmp	ip, r2
 2677 0054 FAD9     		bls	.L139
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2678              		.loc 1 311 3 view .LVU806
 2679              	.LVL321:
 311:lib/TinyUSB/src/common/tusb_fifo.c **** }
 2680              		.loc 1 311 3 is_stmt 0 view .LVU807
 2681              	.LBE200:
 2682              	.LBE199:
 671:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2683              		.loc 1 671 3 is_stmt 1 view .LVU808
 671:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2684              		.loc 1 671 24 is_stmt 0 view .LVU809
 2685 0056 0568     		ldr	r5, [r0]
 671:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2686              		.loc 1 671 22 view .LVU810
 2687 0058 1D44     		add	r5, r5, r3
 671:lib/TinyUSB/src/common/tusb_fifo.c **** 
 2688              		.loc 1 671 20 view .LVU811
 2689 005a 4D60     		str	r5, [r1, #4]
 673:lib/TinyUSB/src/common/tusb_fifo.c ****     // Non wrapping case
 2690              		.loc 1 673 3 is_stmt 1 view .LVU812
 673:lib/TinyUSB/src/common/tusb_fifo.c ****     // Non wrapping case
 2691              		.loc 1 673 6 is_stmt 0 view .LVU813
 2692 005c 9A42     		cmp	r2, r3
 2693 005e 05D9     		bls	.L140
 675:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 2694              		.loc 1 675 5 is_stmt 1 view .LVU814
 675:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 2695              		.loc 1 675 32 is_stmt 0 view .LVU815
 2696 0060 D31A     		subs	r3, r2, r3
 675:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = 0;
 2697              		.loc 1 675 23 view .LVU816
 2698 0062 0B80     		strh	r3, [r1]	@ movhi
 676:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 81


 2699              		.loc 1 676 5 is_stmt 1 view .LVU817
 676:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = NULL;
 2700              		.loc 1 676 23 is_stmt 0 view .LVU818
 2701 0064 0023     		movs	r3, #0
 2702 0066 0B81     		strh	r3, [r1, #8]	@ movhi
 677:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 2703              		.loc 1 677 5 is_stmt 1 view .LVU819
 677:lib/TinyUSB/src/common/tusb_fifo.c ****   } else {
 2704              		.loc 1 677 23 is_stmt 0 view .LVU820
 2705 0068 CB60     		str	r3, [r1, #12]
 2706 006a E1E7     		b	.L131
 2707              	.L140:
 679:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = remain - info->linear.len; // Remaining length - n already was limited to r
 2708              		.loc 1 679 5 is_stmt 1 view .LVU821
 679:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = remain - info->linear.len; // Remaining length - n already was limited to r
 2709              		.loc 1 679 26 is_stmt 0 view .LVU822
 2710 006c 8288     		ldrh	r2, [r0, #4]
 2711              	.LVL322:
 679:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = remain - info->linear.len; // Remaining length - n already was limited to r
 2712              		.loc 1 679 34 view .LVU823
 2713 006e D31A     		subs	r3, r2, r3
 2714 0070 9BB2     		uxth	r3, r3
 679:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.len = remain - info->linear.len; // Remaining length - n already was limited to r
 2715              		.loc 1 679 23 view .LVU824
 2716 0072 0B80     		strh	r3, [r1]	@ movhi
 680:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = f->buffer;              // Always start of buffer
 2717              		.loc 1 680 5 is_stmt 1 view .LVU825
 680:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = f->buffer;              // Always start of buffer
 2718              		.loc 1 680 32 is_stmt 0 view .LVU826
 2719 0074 E41A     		subs	r4, r4, r3
 2720              	.LVL323:
 680:lib/TinyUSB/src/common/tusb_fifo.c ****     info->wrapped.ptr = f->buffer;              // Always start of buffer
 2721              		.loc 1 680 23 view .LVU827
 2722 0076 0C81     		strh	r4, [r1, #8]	@ movhi
 681:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2723              		.loc 1 681 5 is_stmt 1 view .LVU828
 681:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2724              		.loc 1 681 26 is_stmt 0 view .LVU829
 2725 0078 0368     		ldr	r3, [r0]
 681:lib/TinyUSB/src/common/tusb_fifo.c ****   }
 2726              		.loc 1 681 23 view .LVU830
 2727 007a CB60     		str	r3, [r1, #12]
 2728 007c D8E7     		b	.L131
 2729              		.cfi_endproc
 2730              	.LFE98:
 2732              		.text
 2733              	.Letext0:
 2734              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 2735              		.file 5 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 2736              		.file 6 "<built-in>"
ARM GAS  C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s 			page 82


DEFINED SYMBOLS
                            *ABS*:00000000 tusb_fifo.c
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:20     .text.advance_index:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:25     .text.advance_index:00000000 advance_index
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:73     .text.correct_read_index:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:78     .text.correct_read_index:00000000 correct_read_index
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:120    .text.ff_pull_fixed_addr_rw32:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:125    .text.ff_pull_fixed_addr_rw32:00000000 ff_pull_fixed_addr_rw32
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:226    .text.ff_pull_n:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:231    .text.ff_pull_n:00000000 ff_pull_n
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:538    .text.ff_push_fixed_addr_rw32:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:543    .text.ff_push_fixed_addr_rw32:00000000 ff_push_fixed_addr_rw32
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:642    .text.ff_push_n:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:647    .text.ff_push_n:00000000 ff_push_n
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:930    .text.ff_peek_local:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:935    .text.ff_peek_local:00000000 ff_peek_local
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1080   .text.tu_fifo_config:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1086   .text.tu_fifo_config:00000000 tu_fifo_config
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1149   .text.tu_fifo_clear:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1155   .text.tu_fifo_clear:00000000 tu_fifo_clear
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1180   .text.tu_fifo_set_overwritable:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1186   .text.tu_fifo_set_overwritable:00000000 tu_fifo_set_overwritable
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1218   .text.tu_fifo_peek_n_access_mode:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1224   .text.tu_fifo_peek_n_access_mode:00000000 tu_fifo_peek_n_access_mode
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1376   .text.tu_fifo_peek_n:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1382   .text.tu_fifo_peek_n:00000000 tu_fifo_peek_n
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1423   .text.tu_fifo_read_n_access_mode:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1429   .text.tu_fifo_read_n_access_mode:00000000 tu_fifo_read_n_access_mode
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1489   .text.tu_fifo_write_n_access_mode:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1495   .text.tu_fifo_write_n_access_mode:00000000 tu_fifo_write_n_access_mode
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1818   .text.tu_fifo_discard_n:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1824   .text.tu_fifo_discard_n:00000000 tu_fifo_discard_n
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1942   .text.tu_fifo_read:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:1948   .text.tu_fifo_read:00000000 tu_fifo_read
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2000   .text.tu_fifo_peek:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2006   .text.tu_fifo_peek:00000000 tu_fifo_peek
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2033   .text.tu_fifo_write:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2039   .text.tu_fifo_write:00000000 tu_fifo_write
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2189   .text.tu_fifo_advance_write_pointer:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2195   .text.tu_fifo_advance_write_pointer:00000000 tu_fifo_advance_write_pointer
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2230   .text.tu_fifo_correct_read_pointer:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2236   .text.tu_fifo_correct_read_pointer:00000000 tu_fifo_correct_read_pointer
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2262   .text.tu_fifo_advance_read_pointer:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2268   .text.tu_fifo_advance_read_pointer:00000000 tu_fifo_advance_read_pointer
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2303   .text.tu_fifo_get_read_info:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2309   .text.tu_fifo_get_read_info:00000000 tu_fifo_get_read_info
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2531   .text.tu_fifo_get_write_info:00000000 $t
C:\Users\krisa\AppData\Local\Temp\ccS0gSXa.s:2537   .text.tu_fifo_get_write_info:00000000 tu_fifo_get_write_info

UNDEFINED SYMBOLS
memcpy
